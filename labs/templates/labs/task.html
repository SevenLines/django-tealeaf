{% load static %}
<li id="task{{ task.id }}"
    class="{% if task.user %}{% if not user.is_authenticated %}selected {% endif %} {% endif %}{{ task.complexity }}">
    <div class="info">
        {% include "labs/task_info.html" %}
    </div>
    {% if user.is_authenticated and page.publisher_is_draft %}

        <div class="edit">
            <div class="form-inline pull-left">
                <div class="form-group">
                    <button class="turn-edit-on-btn form-control btn btn-default btn-sm">
                        <i class="glyphicon glyphicon-edit"></i>
                    </button>
                </div>
            </div>
            <form name="save" class="form-inline save" action="{% url "labs.views.update_task" pk=task.id %}"
                  method="post">
                {% csrf_token %}
                <div class="form-group">
                    <input class="form-control small" type="text" name="user" value="{{ task.user }}"
                           placeholder="фамилия...">
                </div>
                <div class="form-group">
                    <select name="complexity" class="form-control small" autocomplete="off">
                        {% for c in complex_choices %}
                            <option {% if c.0 == task.complexity %}selected{% endif %} value="{{ c.0 }}">
                                {{ c.0 }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <button type="submit" class="form-control btn-default btn btn-sm">
                        <i class="glyphicon glyphicon-save"></i>
                    </button>
                </div>
            </form>
            <script>
                var editor = new TaskEditor('task{{ task.id }}', 'task_content_{{ task.id }}');
            </script>
        </div>
    {% endif %}
    <div style="clear: both"></div>
</li>
