(function(){var e,t;e=function(){function e(t,n){var o,r;o=e.create_ckEditor(n),r=$("#"+t).find("form.lab-save")[0],$(r).submit(function(){var e,n;return e=$(r).serializeArray(),console.log(r.action),e.push({name:"description",value:o.getData()}),n=$.post(r.action,e),n.success(function(){return $("#"+t).toggleClass("bg-success",!0),setTimeout(function(){return $("#"+t).toggleClass("bg-success",!1)},1e3)}),n.fail(function(){return $("#"+t).toggleClass("bg-danger",!0),setTimeout(function(){return $("#"+t).toggleClass("bg-danger",!1)},1e3)}),!1})}return e.clear_complexity=function(e){return $("#"+e).removeClass()},e.create_ckEditor=function(e){var t,n;return t=CKEDITOR.inline(""+e),FileUploadForm&&(n=new FileUploadForm({editor:t})),t},e}(),t=function(){function e(t,n){var o,r,i,s;return o=null,$("#"+t).find(".turn-edit-on-btn").click(function(){return $(this).hide("fast"),$("#"+n).attr("contenteditable",!0),o=e.create_ckEditor(n)}),r=$("#"+t).find("form.save"),0===r.size()?void console.log("#"+t+" form.save didn't find"):(r=r[0],s=$(r).find("button"),i=$(r).find("select"),void $(r).submit(function(){var l,a;try{o=CKEDITOR.inline(n)}catch(c){}return console.log(o),l=$(r).serializeArray(),null!==o&&(console.log("good"),l.push({name:"description",value:o.getData()})),a=$.post(r.action,l),a.success(function(n){var o;return e.clear_complexity(t),$("#"+t).toggleClass(i[0].value,!0),$("#"+t+" .info").html(n),o=$("#"+t).find(".turn-edit-on-btn"),o.show("fast"),$("#"+t+" .edit").toggleClass("bg-success",!0),setTimeout(function(){return $("#"+t+" .edit").toggleClass("bg-success",!1)},1e3)}),a.fail(function(){return e.restore_style(s),$("#"+t+" .edit").toggleClass("bg-danger",!0),setTimeout(function(){return $("#"+t+" .edit").toggleClass("bg-danger",!1)},1e3)}),!1}))}return e.restore_style=function(e){return e.toggleClass("btn-warning",!1),e.toggleClass("btn-success",!1)},e.clear_complexity=function(e){return $("#"+e).removeClass()},e.create_ckEditor=function(e){var t,n;return t=CKEDITOR.inline(e),FileUploadForm&&(n=new FileUploadForm({editor:t})),t},e}(),window.TaskEditor=t,window.LabEditor=e}).call(this);