(function(){var e,t,n;e=function(){function e(t,n){var r,i;r=e.create_ckEditor(n),i=$("#"+t).find("form.lab-save")[0],$(i).submit(function(){var e,n;return e=$(i).serializeArray(),e.push({name:"description",value:r.getData()}),n=$.post(i.action,e),n.success(function(){return $("#"+t).toggleClass("bg-success",!0),setTimeout(function(){return $("#"+t).toggleClass("bg-success",!1)},1e3)}),n.fail(function(){return $("#"+t).toggleClass("bg-danger",!0),setTimeout(function(){return $("#"+t).toggleClass("bg-danger",!1)},1e3)}),!1})}return e.clear_complexity=function(e){return $("#"+e).removeClass()},e.create_ckEditor=function(e){var t,n;return t=CKEDITOR.inline(""+e),FileUploadForm&&(n=new FileUploadForm({editor:t})),t},e}(),n=function(){function e(t,n){var r,i,o,s;return r=null,$("#"+t).find(".turn-edit-on-btn").click(function(){return $(this).hide("fast"),$("#"+n).attr("contenteditable",!0),r=e.create_ckEditor(n)}),i=$("#"+t).find("form.save"),0===i.size()?void console.log("#"+t+" form.save didn't find"):(i=i[0],s=$(i).find("button"),o=$(i).find("select"),void $(i).submit(function(){var u,a;try{r=CKEDITOR.inline(n)}catch(l){}return u=$(i).serializeArray(),0===$(i).find("select[name='users'] option").size()&&u.push({name:"no_users",value:""}),console.dir(u),null!==r&&u.push({name:"description",value:r.getData()}),a=$.post(i.action,u),a.success(function(n){var r;return e.clear_complexity(t),$("#"+t).toggleClass(o[0].value,!0),$("#"+t+" .info").html(n),r=$("#"+t).find(".turn-edit-on-btn"),r.show("fast"),$("#"+t+" .edit").toggleClass("bg-success",!0),setTimeout(function(){return $("#"+t+" .edit").toggleClass("bg-success",!1)},1e3)}),a.fail(function(){return e.restore_style(s),$("#"+t+" .edit").toggleClass("bg-danger",!0),setTimeout(function(){return $("#"+t+" .edit").toggleClass("bg-danger",!1)},1e3)}),!1}))}return e.restore_style=function(e){return e.toggleClass("btn-warning",!1),e.toggleClass("btn-success",!1)},e.clear_complexity=function(e){return $("#"+e).removeClass("easy medium hard nightmare")},e.create_ckEditor=function(e){var t,n;return t=CKEDITOR.inline(e),FileUploadForm&&(n=new FileUploadForm({editor:t})),t},e}(),t=function(){function e(e,t){$(e).select2({placeholder:"студенты",multiple:!0,minimumInputLength:2,initSelection:function(e,t){var n;n=[],$(e).closest("form").find("select[name='users'] option").each(function(e,t){return console.log(t),n.push({id:t.value,text:t.text})}),t(n)},ajax:{url:t,dataType:"json",data:function(){return function(e){return{filter:e}}}(this),results:function(){return function(e){return{results:e}}}(this)}}).select2("val",[]).on("change",function(e){var t,n,r,i,o,s;for(t=$(this).closest("form").find("select[name='users']"),$(t).find("option").remove(),o=e.val,s=[],r=0,i=o.length;i>r;r++)n=o[r],s.push($(t).append("<option val='"+n+"' selected>"+n+"</option>"));return s})}return e.prototype.update_select=function(){},e}(),window.SelectStudent=t,window.TaskEditor=n,window.LabEditor=e}).call(this);