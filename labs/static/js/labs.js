(function(){var e,t;e=function(){function e(t,n){var r,i;r=e.create_ckEditor(n),i=$("#"+t).find("form.lab-save")[0],$(i).submit(function(){var e,n;return e=$(i).serializeArray(),console.log(i.action),e.push({name:"description",value:r.getData()}),n=$.post(i.action,e),n.success(function(){return $("#"+t).toggleClass("bg-success",!0),setTimeout(function(){return $("#"+t).toggleClass("bg-success",!1)},1e3)}),n.fail(function(){return $("#"+t).toggleClass("bg-danger",!0),setTimeout(function(){return $("#"+t).toggleClass("bg-danger",!1)},1e3)}),!1})}return e.clear_complexity=function(e){return $("#"+e).removeClass()},e.create_ckEditor=function(e){var t,n;return t=CKEDITOR.inline(""+e),FileUploadForm&&(n=new FileUploadForm({editor:t})),t},e}(),t=function(){function e(t,n){var r,i,o,s;return r=null,$("#"+t).find(".turn-edit-on-btn").click(function(){return $(this).hide("fast"),$("#"+n).attr("contenteditable",!0),r=e.create_ckEditor(n)}),i=$("#"+t).find("form.save"),0===i.size()?void console.log("#"+t+" form.save didn't find"):(i=i[0],s=$(i).find("button"),o=$(i).find("select"),void $(i).submit(function(){var a,l;return a=$(i).serializeArray(),$("#"+n).size()>0&&null===r&&(r=CKEDITOR.inline(n),a.push({name:"description",value:r.getData()})),l=$.post(i.action,a),l.success(function(n){var r;return e.clear_complexity(t),$("#"+t).toggleClass(o[0].value,!0),$("#"+t+" .info").html(n),r=$("#"+t).find(".turn-edit-on-btn"),r.show("fast"),$("#"+t+" .edit").toggleClass("bg-success",!0),setTimeout(function(){return $("#"+t+" .edit").toggleClass("bg-success",!1)},1e3)}),l.fail(function(){return e.restore_style(s),$("#"+t+" .edit").toggleClass("bg-danger",!0),setTimeout(function(){return $("#"+t+" .edit").toggleClass("bg-danger",!1)},1e3)}),!1}))}return e.restore_style=function(e){return e.toggleClass("btn-warning",!1),e.toggleClass("btn-success",!1)},e.clear_complexity=function(e){return $("#"+e).removeClass()},e.create_ckEditor=function(e){var t,n;return t=CKEDITOR.inline(e),FileUploadForm&&(n=new FileUploadForm({editor:t})),t},e}(),window.TaskEditor=t,window.LabEditor=e}).call(this);