(function(){var e,t,n;e=function(){function e(t,n){var o,r;o=e.create_ckEditor(n),r=$("#"+t).find("form.lab-save")[0],$(r).submit(function(){var e,n;return e=$(r).serializeArray(),console.log(r.action),e.push({name:"description",value:o.getData()}),n=$.post(r.action,e),n.success(function(){return $("#"+t).toggleClass("bg-success",!0),setTimeout(function(){return $("#"+t).toggleClass("bg-success",!1)},1e3)}),n.fail(function(){return $("#"+t).toggleClass("bg-danger",!0),setTimeout(function(){return $("#"+t).toggleClass("bg-danger",!1)},1e3)}),!1})}return e.clear_complexity=function(e){return $("#"+e).removeClass()},e.create_ckEditor=function(e){var t,n;return t=CKEDITOR.inline(""+e),FileUploadForm&&(n=new FileUploadForm({editor:t})),t},e}(),n=function(){function e(t,n){var o,r,i,s;return o=null,$("#"+t).find(".turn-edit-on-btn").click(function(){return $(this).hide("fast"),$("#"+n).attr("contenteditable",!0),o=e.create_ckEditor(n)}),r=$("#"+t).find("form.save"),0===r.size()?void console.log("#"+t+" form.save didn't find"):(r=r[0],s=$(r).find("button"),i=$(r).find("select"),void $(r).submit(function(){var l,u;try{o=CKEDITOR.inline(n)}catch(a){}return console.log(o),l=$(r).serializeArray(),null!==o&&(console.log("good"),l.push({name:"description",value:o.getData()})),u=$.post(r.action,l),u.success(function(n){var o;return e.clear_complexity(t),$("#"+t).toggleClass(i[0].value,!0),$("#"+t+" .info").html(n),o=$("#"+t).find(".turn-edit-on-btn"),o.show("fast"),$("#"+t+" .edit").toggleClass("bg-success",!0),setTimeout(function(){return $("#"+t+" .edit").toggleClass("bg-success",!1)},1e3)}),u.fail(function(){return e.restore_style(s),$("#"+t+" .edit").toggleClass("bg-danger",!0),setTimeout(function(){return $("#"+t+" .edit").toggleClass("bg-danger",!1)},1e3)}),!1}))}return e.restore_style=function(e){return e.toggleClass("btn-warning",!1),e.toggleClass("btn-success",!1)},e.clear_complexity=function(e){return $("#"+e).removeClass("easy medium hard nightmare")},e.create_ckEditor=function(e){var t,n;return t=CKEDITOR.inline(e),FileUploadForm&&(n=new FileUploadForm({editor:t})),t},e}(),t=function(){function e(e,t){$(e).select2({placeholder:"студенты",multiple:!0,minimumInputLength:2,initSelection:function(e,t){var n;n=[],$(e).closest("form").find("select[name='users'] option").each(function(e,t){return console.log(t),n.push({id:t.value,text:t.text})}),t(n)},ajax:{url:t,dataType:"json",data:function(){return function(e){return{filter:e}}}(this),results:function(){return function(e){return{results:e}}}(this)}}).select2("val",[]).on("change",function(e){var t,n,o,r,i,s;for(t=$(this).closest("form").find("select[name='users']"),$(t).find("option").remove(),i=e.val,s=[],o=0,r=i.length;r>o;o++)n=i[o],s.push($(t).append("<option val='"+n+"' selected>"+n+"</option>"));return s})}return e.prototype.update_select=function(){},e}(),window.SelectStudent=t,window.TaskEditor=n,window.LabEditor=e}).call(this);