(function(){var n,r,t;r=function(){function n(r){var t,e,o;this.id=r,t=$("#task"+r),o=t.find(".task-edit"),e=t.find(".task-edit-option"),e.find("a").click(function(){return n.hide_all(),o.slideDown("fast"),!1}),o.find("form").ajaxForm({success:function(e){var o;return console.log("hi"),t.replaceWith(e),o=new n(r)}}),$(document).mouseup(function(r){return o.is(r.target)||0!==o.has(r.target).length||e.is(r.target)||0!==e.has(r.target).length?void 0:n.hide_all()})}return n.hide_all=function(){return $(".task-edit").hide()},n}(),n=function(){function n(r,t){var e,o;e=n.create_ckEditor(t),o=$("#"+r).find("form.lab-save")[0],$(o).submit(function(){var n,t;return n=$(o).serializeArray(),console.log(o.action),n.push({name:"description",value:e.getData()}),t=$.post(o.action,n),t.success(function(){var n;return n=$("#"+r).css("background-color"),$("#"+r).animate({"background-color":"#BBFFBB"},500).animate({"background-color":n},500)}),t.fail(function(){var n;return n=$("#"+r).css("background-color"),$("#"+r).animate({"background-color":"#FFBBBB"},500).animate({"background-color":n},500)}),!1})}return n.clear_complexity=function(n){return $("#"+n).removeClass()},n.create_ckEditor=function(n){var r,t;return r=CKEDITOR.inline(""+n),FileUploadForm&&(t=new FileUploadForm({editor:r})),r},n}(),t=function(){function n(r,t){var e,o,i,a;return e=null,$("#"+r).find(".turn-edit-on-btn").click(function(){return $(this).hide("fast"),$("#"+t).attr("contenteditable",!0),e=n.create_ckEditor(t)}),o=$("#"+r).find("form.save"),0===o.size()?void console.log("#"+r+" form.save didn't find"):(o=o[0],a=$(o).find("button"),i=$(o).find("select"),void $(o).submit(function(){var c,l;return null===e&&(e=CKEDITOR.inline(t)),c=$(o).serializeArray(),c.push({name:"description",value:e.getData()}),l=$.post(o.action,c),l.success(function(t){var e,o;return n.clear_complexity(r),$("#"+r).toggleClass(i[0].value,!0),$("#"+r+" .info").html(t),o=$("#"+r).find(".turn-edit-on-btn"),o.show("fast"),e=$("#"+r).css("border-color"),$("#"+r).animate({"border-color":"green"},500).animate({"border-color":e},500)}),l.fail(function(){var t;return n.restore_style(a),t=$("#"+r).css("border-color"),$("#"+r).animate({"border-color":"red"},500).animate({"border-color":t},500)}),!1}))}return n.restore_style=function(n){return n.toggleClass("btn-warning",!1),n.toggleClass("btn-success",!1)},n.clear_complexity=function(n){return $("#"+n).removeClass()},n.create_ckEditor=function(n){var r,t;return r=CKEDITOR.inline(n),FileUploadForm&&(t=new FileUploadForm({editor:r})),r},n}(),window.TaskEditor=t,window.LabTask=r,window.LabEditor=n}).call(this);