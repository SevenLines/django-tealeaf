function ModalConfirm(data){data=data?data:{};if(data.prototype){return}var self=this;self.modal_selector=data.modal_selector;self.message=ko.observable(data.message);self.header=ko.observable(data.header);self.variable_name=data.variable_name;self.label={yes:"Да",no:"Нет"};self.custom_modal_body=data.custom_modal_body?data.custom_modal_body:"";self.callback_confirm=null;self.callback_decline=null;self._generate_modal=function(){if(self.variable_name==null){console.error("One should pass variable_name to use autogenerate modal:\n"+"var modalForm = new ModalConfirm({variable_name: 'modalForm'})");return}var id="modal-"+self.variable_name;$("#"+id).remove();var html='<div id="'+id+'" class="modal fade" role="dialog" '+'data-bind="with: '+self.variable_name+'">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-header" data-bind="text: header"></div>'+'<div class="modal-body">'+'<span data-bind="html: message"></span>'+self.custom_modal_body+"</div>"+'<div class="modal-footer">'+'<button type="button" class="btn btn-default" data-decline data-dismiss="modal">'+self.label.no+"</button>"+'<button type="button" class="btn btn-danger" data-confirm data-dismiss="modal">'+self.label.yes+"</button>"+"</div></div></div></div>";$("body").prepend(html);return"#"+id};self.init=function(){if(self.modal_selector==null){self.modal_selector=self._generate_modal()}$(self.modal_selector).find("[data-confirm]").unbind("click");$(self.modal_selector).find("[data-confirm]").click(function(){if(self.callback_confirm)self.callback_confirm()});$(self.modal_selector).find("[data-decline]").unbind("click");$(self.modal_selector).find("[data-decline]").click(function(){if(self.callback_decline)self.callback_decline()})};self.show=function(callback_confirm,callback_decline){self.callback_confirm=callback_confirm===undefined?null:callback_confirm;self.callback_decline=callback_decline===undefined?null:callback_decline;$(self.modal_selector).modal("show")};self.init()}