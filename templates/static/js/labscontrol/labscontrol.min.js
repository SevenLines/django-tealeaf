/*! jsTree - v3.0.8 - 2014-10-23 - (MIT) */
(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)})(function(v,B){if(!v.jstree){var m=0,b=!1,C=!1,j=!1,y=[],w=v("script:last").attr("src"),f=document,x=f.createElement("LI"),k,p;x.setAttribute("role","treeitem"),k=f.createElement("I"),k.className="jstree-icon jstree-ocl",k.setAttribute("role","presentation"),x.appendChild(k),k=f.createElement("A"),k.className="jstree-anchor",k.setAttribute("href","#"),k.setAttribute("tabindex","-1"),p=f.createElement("I"),p.className="jstree-icon jstree-themeicon",p.setAttribute("role","presentation"),k.appendChild(p),x.appendChild(k),k=p=null,v.jstree={version:"3.0.8",defaults:{plugins:[]},plugins:{},path:w&&-1!==w.indexOf("/")?w.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%]/g},v.jstree.create=function(a,d){var c=new v.jstree.core(++m),e=d;return d=v.extend(!0,{},v.jstree.defaults,d),e&&e.plugins&&(d.plugins=e.plugins),v.each(d.plugins,function(h,g){"core"!==h&&(c=c.plugin(g,d[g]))}),c.init(a,d),c},v.jstree.destroy=function(){v(".jstree:jstree").jstree("destroy"),v(document).off(".jstree")},v.jstree.core=function(a){this._id=a,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},v.jstree.reference=function(a){var d=null,c=null;if(a&&a.id&&(a=a.id),!c||!c.length){try{c=v(a)}catch(e){}}if(!c||!c.length){try{c=v("#"+a.replace(v.jstree.idregex,"\\$&"))}catch(e){}}return c&&c.length&&(c=c.closest(".jstree")).length&&(c=c.data("jstree"))?d=c:v(".jstree").each(function(){var g=v(this).data("jstree");return g&&g._model.data[a]?(d=g,!1):B}),d},v.fn.jstree=function(a){var d="string"==typeof a,c=Array.prototype.slice.call(arguments,1),e=null;return a!==!0||this.length?(this.each(function(){var g=v.jstree.reference(this),h=d&&g?g[a]:null;return e=d&&h?h.apply(g,c):null,g||d||a!==B&&!v.isPlainObject(a)||v(this).data("jstree",new v.jstree.create(this,a)),(g&&!d||a===!0)&&(e=g||!1),null!==e&&e!==B?!1:B}),null!==e&&e!==B?e:this):!1},v.expr[":"].jstree=v.expr.createPseudo(function(a){return function(c){return v(c).hasClass("jstree")&&v(c).data("jstree")!==B}}),v.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:v.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1},v.jstree.core.prototype={plugin:function(c,a){var d=v.jstree.plugins[c];return d?(this._data[c]={},d.prototype=this,new d(a,this)):this},init:function(c,a){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=v(c).addClass("jstree jstree-"+this._id),this.settings=a,this.element.bind("destroyed",v.proxy(this.teardown,this)),this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(c){if(this._wrk){try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(a){}}c||this.element.empty(),this.element.unbind("destroyed",this.teardown),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var a="",c=null;this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var g=window.getSelection();try{g.removeAllRanges(),g.collapse()}catch(d){}}}}).on("click.jstree",".jstree-ocl",v.proxy(function(d){this.toggle_node(d.target)},this)).on("click.jstree",".jstree-anchor",v.proxy(function(d){d.preventDefault(),d.currentTarget!==document.activeElement&&v(d.currentTarget).focus(),this.activate_node(d.currentTarget,d)},this)).on("keydown.jstree",".jstree-anchor",v.proxy(function(e){if("INPUT"===e.target.tagName){return !0}var d=null;switch(this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37)),e.which){case 32:e.ctrlKey&&(e.type="click",v(e.currentTarget).trigger(e));break;case 13:e.type="click",v(e.currentTarget).trigger(e);break;case 37:e.preventDefault(),this.is_open(e.currentTarget)?this.close_node(e.currentTarget):(d=this.get_parent(e.currentTarget),d&&"#"!==d.id&&this.get_node(d,!0).children(".jstree-anchor").focus());break;case 38:e.preventDefault(),d=this.get_prev_dom(e.currentTarget),d&&d.length&&d.children(".jstree-anchor").focus();break;case 39:e.preventDefault(),this.is_closed(e.currentTarget)?this.open_node(e.currentTarget,function(g){this.get_node(g,!0).children(".jstree-anchor").focus()}):this.is_open(e.currentTarget)&&(d=this.get_node(e.currentTarget,!0).children(".jstree-children")[0],d&&v(this._firstChild(d)).children(".jstree-anchor").focus());break;case 40:e.preventDefault(),d=this.get_next_dom(e.currentTarget),d&&d.length&&d.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:e.preventDefault(),d=this._firstChild(this.get_container_ul()[0]),d&&v(d).children(".jstree-anchor").filter(":visible").focus();break;case 35:e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",v.proxy(function(e,d){if(d.status&&("#"!==d.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),!this._data.core.ready&&!this.get_container_ul().find(".jstree-loading").length)){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var h=[],g,l;for(g=0,l=this._data.core.selected.length;l>g;g++){h=h.concat(this._model.data[this._data.core.selected[g]].parents)}for(h=v.vakata.array_unique(h),g=0,l=h.length;l>g;g++){this.open_node(h[g],!1,0)}}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}setTimeout(v.proxy(function(){this.trigger("ready")},this),0)}},this)).on("keypress.jstree",v.proxy(function(g){if("INPUT"===g.target.tagName){return !0}c&&clearTimeout(c),c=setTimeout(function(){a=""},500);var l=String.fromCharCode(g.which).toLowerCase(),e=this.element.find(".jstree-anchor").filter(":visible"),i=e.index(document.activeElement)||0,h=!1;if(a+=l,a.length>1){if(e.slice(i).each(v.proxy(function(n,d){return 0===v(d).text().toLowerCase().indexOf(a)?(v(d).focus(),h=!0,!1):B},this)),h){return}if(e.slice(0,i).each(v.proxy(function(n,d){return 0===v(d).text().toLowerCase().indexOf(a)?(v(d).focus(),h=!0,!1):B},this)),h){return}}if(RegExp("^"+l+"+$").test(a)){if(e.slice(i+1).each(v.proxy(function(d,n){return v(n).text().toLowerCase().charAt(0)===l?(v(n).focus(),h=!0,!1):B},this)),h){return}if(e.slice(0,i+1).each(v.proxy(function(d,n){return v(n).text().toLowerCase().charAt(0)===l?(v(n).focus(),h=!0,!1):B},this)),h){return}}},this)).on("init.jstree",v.proxy(function(){var d=this.settings.core.themes;this._data.core.themes.dots=d.dots,this._data.core.themes.stripes=d.stripes,this._data.core.themes.icons=d.icons,this.set_theme(d.name||"default",d.url),this.set_theme_variant(d.variant)},this)).on("loading.jstree",v.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",v.proxy(function(d){this._data.core.focused=null,v(d.currentTarget).filter(".jstree-hovered").mouseleave()},this)).on("focus.jstree",".jstree-anchor",v.proxy(function(e){var d=this.get_node(e.currentTarget);d&&d.id&&(this._data.core.focused=d.id),this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),v(e.currentTarget).mouseenter()},this)).on("focus.jstree",v.proxy(function(){this._data.core.focused||this.get_node(this.element.attr("aria-activedescendant"),!0).find("> .jstree-anchor").focus()},this)).on("mouseenter.jstree",".jstree-anchor",v.proxy(function(d){this.hover_node(d.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",v.proxy(function(d){this.dehover_node(d.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),v(document).off(".jstree-"+this._id)},trigger:function(c,a){a||(a={}),a.instance=this,this.element.triggerHandler(c.replace(".jstree","")+".jstree",a)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(c){var a=this.settings.core.strings;return v.isFunction(a)?a.call(this,c):a&&a[c]?a[c]:c},_firstChild:function(a){a=a?a.firstChild:null;while(null!==a&&1!==a.nodeType){a=a.nextSibling}return a},_nextSibling:function(a){a=a?a.nextSibling:null;while(null!==a&&1!==a.nodeType){a=a.nextSibling}return a},_previousSibling:function(a){a=a?a.previousSibling:null;while(null!==a&&1!==a.nodeType){a=a.previousSibling}return a},get_node:function(c,a){c&&c.id&&(c=c.id);var e;try{if(this._model.data[c]){c=this._model.data[c]}else{if("string"==typeof c&&this._model.data[c.replace(/^#/,"")]){c=this._model.data[c.replace(/^#/,"")]}else{if("string"==typeof c&&(e=v("#"+c.replace(v.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[e.closest(".jstree-node").attr("id")]){c=this._model.data[e.closest(".jstree-node").attr("id")]}else{if((e=v(c,this.element)).length&&this._model.data[e.closest(".jstree-node").attr("id")]){c=this._model.data[e.closest(".jstree-node").attr("id")]}else{if(!(e=v(c,this.element)).length||!e.hasClass("jstree")){return !1}c=this._model.data["#"]}}}}return a&&(c="#"===c.id?this.element:v("#"+c.id.replace(v.jstree.idregex,"\\$&"),this.element)),c}catch(d){return !1}},get_path:function(h,c,a){if(h=h.parents?h:this.get_node(h),!h||"#"===h.id||!h.parents){return !1}var g,d,l=[];for(l.push(a?h.id:h.text),g=0,d=h.parents.length;d>g;g++){l.push(a?h.parents[g]:this.get_text(h.parents[g]))}return l=l.reverse().slice(1),c?l.join(c):l},get_next_dom:function(c,a){var d;if(c=this.get_node(c,!0),c[0]===this.element[0]){d=this._firstChild(this.get_container_ul()[0]);while(d&&0===d.offsetHeight){d=this._nextSibling(d)}return d?v(d):!1}if(!c||!c.length){return !1}if(a){d=c[0];do{d=this._nextSibling(d)}while(d&&0===d.offsetHeight);return d?v(d):!1}if(c.hasClass("jstree-open")){d=this._firstChild(c.children(".jstree-children")[0]);while(d&&0===d.offsetHeight){d=this._nextSibling(d)}if(null!==d){return v(d)}}d=c[0];do{d=this._nextSibling(d)}while(d&&0===d.offsetHeight);return null!==d?v(d):c.parentsUntil(".jstree",".jstree-node").next(".jstree-node:visible").first()},get_prev_dom:function(c,a){var d;if(c=this.get_node(c,!0),c[0]===this.element[0]){d=this.get_container_ul()[0].lastChild;while(d&&0===d.offsetHeight){d=this._previousSibling(d)}return d?v(d):!1}if(!c||!c.length){return !1}if(a){d=c[0];do{d=this._previousSibling(d)}while(d&&0===d.offsetHeight);return d?v(d):!1}d=c[0];do{d=this._previousSibling(d)}while(d&&0===d.offsetHeight);if(null!==d){c=v(d);while(c.hasClass("jstree-open")){c=c.children(".jstree-children").first().children(".jstree-node:visible:last")}return c}return d=c[0].parentNode.parentNode,d&&d.className&&-1!==d.className.indexOf("jstree-node")?v(d):!1},get_parent:function(a){return a=this.get_node(a),a&&"#"!==a.id?a.parent:!1},get_children_dom:function(a){return a=this.get_node(a,!0),a[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):a&&a.length?a.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(a){return a=this.get_node(a),a&&(a.state.loaded===!1||a.children.length>0)},is_loaded:function(a){return a=this.get_node(a),a&&a.state.loaded},is_loading:function(a){return a=this.get_node(a),a&&a.state&&a.state.loading},is_open:function(a){return a=this.get_node(a),a&&a.state.opened},is_closed:function(a){return a=this.get_node(a),a&&this.is_parent(a)&&!a.state.opened},is_leaf:function(a){return !this.is_parent(a)},load_node:function(g,e){var l,h,u,c,o;if(v.isArray(g)){return this._load_nodes(g.slice(),e),!0}if(g=this.get_node(g),!g){return e&&e.call(this,g,!1),!1}if(g.state.loaded){for(g.state.loaded=!1,l=0,h=g.children_d.length;h>l;l++){for(u=0,c=g.parents.length;c>u;u++){this._model.data[g.parents[u]].children_d=v.vakata.array_remove_item(this._model.data[g.parents[u]].children_d,g.children_d[l])}this._model.data[g.children_d[l]].state.selected&&(o=!0,this._data.core.selected=v.vakata.array_remove_item(this._data.core.selected,g.children_d[l])),delete this._model.data[g.children_d[l]]}g.children=[],g.children_d=[],o&&this.trigger("changed",{action:"load_node",node:g,selected:this._data.core.selected})}return g.state.loading=!0,this.get_node(g,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(g,v.proxy(function(d){g=this._model.data[g.id],g.state.loading=!1,g.state.loaded=d;var a=this.get_node(g,!0);g.state.loaded&&!g.children.length&&a&&a.length&&!a.hasClass("jstree-leaf")&&a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),a.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:g,status:d}),e&&e.call(this,g,d)},this)),!0},_load_nodes:function(u,h,g){var o=!0,l=function(){this._load_nodes(u,h,!0)},E=this._model.data,c,D;for(c=0,D=u.length;D>c;c++){!E[u[c]]||E[u[c]].state.loaded&&g||(this.is_loading(u[c])||this.load_node(u[c],l),o=!1)}o&&h&&!h.done&&(h.call(this,u),h.done=!0)},load_all:function(o,g){if(o||(o="#"),o=this.get_node(o),!o){return !1}var d=[],l=this._model.data,h=l[o.id].children_d,u,c;for(o.state&&!o.state.loaded&&d.push(o.id),u=0,c=h.length;c>u;u++){l[h[u]]&&l[h[u]].state&&!l[h[u]].state.loaded&&d.push(h[u])}d.length?this._load_nodes(d,function(){this.load_all(o,g)}):(g&&g.call(this,o),this.trigger("load_all",{node:o}))},_load_node:function(c,a){var e=this.settings.core.data,d;return e?v.isFunction(e)?e.call(this,c,v.proxy(function(g){g===!1&&a.call(this,!1),this["string"==typeof g?"_append_html_data":"_append_json_data"](c,"string"==typeof g?v(g):g,function(h){a.call(this,h)})},this)):"object"==typeof e?e.url?(e=v.extend(!0,{},e),v.isFunction(e.url)&&(e.url=e.url.call(this,c)),v.isFunction(e.data)&&(e.data=e.data.call(this,c)),v.ajax(e).done(v.proxy(function(i,h,l){var g=l.getResponseHeader("Content-Type");return -1!==g.indexOf("json")||"object"==typeof i?this._append_json_data(c,i,function(n){a.call(this,n)}):-1!==g.indexOf("html")||"string"==typeof i?this._append_html_data(c,v(i),function(n){a.call(this,n)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:c.id,xhr:l})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1))},this)).fail(v.proxy(function(g){a.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:c.id,xhr:g})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(d=v.isArray(e)||v.isPlainObject(e)?JSON.parse(JSON.stringify(e)):e,"#"===c.id?this._append_json_data(c,d,function(g){a.call(this,g)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:c.id})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1))):"string"==typeof e?"#"===c.id?this._append_html_data(c,v(e),function(g){a.call(this,g)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:c.id})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1)):a.call(this,!1):"#"===c.id?this._append_html_data(c,this._data.core.original_container_html.clone(!0),function(g){a.call(this,g)}):a.call(this,!1)},_node_changed:function(a){a=this.get_node(a),a&&this._model.changed.push(a.id)},_append_html_data:function(M,F,e){M=this.get_node(M),M.children=[],M.children_d=[];var N=F.is("ul")?F.children():F,D=M.id,J=[],H=[],g=this._model.data,I=g[D],E=this._data.core.selected.length,G,K,L;for(N.each(v.proxy(function(c,a){G=this._parse_model_from_html(v(a),D,I.parents.concat()),G&&(J.push(G),H.push(G),g[G].children_d.length&&(H=H.concat(g[G].children_d)))},this)),I.children=J,I.children_d=H,K=0,L=I.parents.length;L>K;K++){g[I.parents[K]].children_d=g[I.parents[K]].children_d.concat(H)}this.trigger("model",{nodes:H,parent:D}),"#"!==D?(this._node_changed(D),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==E&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),e.call(this,!0)},_append_json_data:function(F,l,e,G){F=this.get_node(F),F.children=[],F.children_d=[],l.d&&(l=l.d,"string"==typeof l&&(l=JSON.parse(l))),v.isArray(l)||(l=[l]);var h=null,E={df:this._model.default_state,dat:l,par:F.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},u=function(V,J){V.data&&(V=V.data);var R=V.dat,L=V.par,K=[],O=[],Y=[],W=V.df,N=V.t_id,X=V.t_cnt,Q=V.m,S=Q[L],Z=V.sel,I,T,U,M,P=function(ac,aa,a){a=a?a.concat():[],aa&&a.unshift(aa);var af=""+ac.id,t,d,ad,ab,ae={id:af,text:ac.text||"",icon:ac.icon!==J?ac.icon:!0,parent:aa,parents:a,children:ac.children||[],children_d:ac.children_d||[],data:ac.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(t in W){W.hasOwnProperty(t)&&(ae.state[t]=W[t])}if(ac&&ac.data&&ac.data.jstree&&ac.data.jstree.icon&&(ae.icon=ac.data.jstree.icon),ac&&ac.data&&(ae.data=ac.data,ac.data.jstree)){for(t in ac.data.jstree){ac.data.jstree.hasOwnProperty(t)&&(ae.state[t]=ac.data.jstree[t])}}if(ac&&"object"==typeof ac.state){for(t in ac.state){ac.state.hasOwnProperty(t)&&(ae.state[t]=ac.state[t])}}if(ac&&"object"==typeof ac.li_attr){for(t in ac.li_attr){ac.li_attr.hasOwnProperty(t)&&(ae.li_attr[t]=ac.li_attr[t])}}if(ae.li_attr.id||(ae.li_attr.id=af),ac&&"object"==typeof ac.a_attr){for(t in ac.a_attr){ac.a_attr.hasOwnProperty(t)&&(ae.a_attr[t]=ac.a_attr[t])}}for(ac&&ac.children&&ac.children===!0&&(ae.state.loaded=!1,ae.children=[],ae.children_d=[]),Q[ae.id]=ae,t=0,d=ae.children.length;d>t;t++){ad=P(Q[ae.children[t]],ae.id,a),ab=Q[ad],ae.children_d.push(ad),ab.children_d.length&&(ae.children_d=ae.children_d.concat(ab.children_d))}return delete ac.data,delete ac.children,Q[ae.id].original=ac,ae.state.selected&&Y.push(ae.id),ae.id},H=function(aa,d,a){a=a?a.concat():[],d&&a.unshift(d);var ad=!1,c,o,ab,ac,t;do{ad="j"+N+"_"+ ++X}while(Q[ad]);t={id:!1,text:"string"==typeof aa?aa:"",icon:"object"==typeof aa&&aa.icon!==J?aa.icon:!0,parent:d,parents:a,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(c in W){W.hasOwnProperty(c)&&(t.state[c]=W[c])}if(aa&&aa.id&&(t.id=""+aa.id),aa&&aa.text&&(t.text=aa.text),aa&&aa.data&&aa.data.jstree&&aa.data.jstree.icon&&(t.icon=aa.data.jstree.icon),aa&&aa.data&&(t.data=aa.data,aa.data.jstree)){for(c in aa.data.jstree){aa.data.jstree.hasOwnProperty(c)&&(t.state[c]=aa.data.jstree[c])}}if(aa&&"object"==typeof aa.state){for(c in aa.state){aa.state.hasOwnProperty(c)&&(t.state[c]=aa.state[c])}}if(aa&&"object"==typeof aa.li_attr){for(c in aa.li_attr){aa.li_attr.hasOwnProperty(c)&&(t.li_attr[c]=aa.li_attr[c])}}if(t.li_attr.id&&!t.id&&(t.id=""+t.li_attr.id),t.id||(t.id=ad),t.li_attr.id||(t.li_attr.id=t.id),aa&&"object"==typeof aa.a_attr){for(c in aa.a_attr){aa.a_attr.hasOwnProperty(c)&&(t.a_attr[c]=aa.a_attr[c])}}if(aa&&aa.children&&aa.children.length){for(c=0,o=aa.children.length;o>c;c++){ab=H(aa.children[c],t.id,a),ac=Q[ab],t.children.push(ab),ac.children_d.length&&(t.children_d=t.children_d.concat(ac.children_d))}t.children_d=t.children_d.concat(t.children)}return aa&&aa.children&&aa.children===!0&&(t.state.loaded=!1,t.children=[],t.children_d=[]),delete aa.data,delete aa.children,t.original=aa,Q[t.id]=t,t.state.selected&&Y.push(t.id),t.id};if(R.length&&R[0].id!==J&&R[0].parent!==J){for(T=0,U=R.length;U>T;T++){R[T].children||(R[T].children=[]),Q[""+R[T].id]=R[T]}for(T=0,U=R.length;U>T;T++){Q[""+R[T].parent].children.push(""+R[T].id),S.children_d.push(""+R[T].id)}for(T=0,U=S.children.length;U>T;T++){I=P(Q[S.children[T]],L,S.parents.concat()),O.push(I),Q[I].children_d.length&&(O=O.concat(Q[I].children_d))}for(T=0,U=S.parents.length;U>T;T++){Q[S.parents[T]].children_d=Q[S.parents[T]].children_d.concat(O)}M={cnt:X,mod:Q,sel:Z,par:L,dpc:O,add:Y}}else{for(T=0,U=R.length;U>T;T++){I=H(R[T],L,S.parents.concat()),I&&(K.push(I),O.push(I),Q[I].children_d.length&&(O=O.concat(Q[I].children_d)))}for(S.children=K,S.children_d=O,T=0,U=S.parents.length;U>T;T++){Q[S.parents[T]].children_d=Q[S.parents[T]].children_d.concat(O)}M={cnt:X,mod:Q,sel:Z,par:L,dpc:O,add:Y}}return"undefined"!=typeof window&&window.document!==J?M:(postMessage(M),J)},g=function(I,H){if(this._cnt=I.cnt,this._model.data=I.mod,H){var J,N,r=I.add,L=I.sel,K=this._data.core.selected.slice(),M=this._model.data;if(L.length!==K.length||v.vakata.array_unique(L.concat(K)).length!==L.length){for(J=0,N=L.length;N>J;J++){-1===v.inArray(L[J],r)&&-1===v.inArray(L[J],K)&&(M[L[J]].state.selected=!1)}for(J=0,N=K.length;N>J;J++){-1===v.inArray(K[J],L)&&(M[K[J]].state.selected=!0)}}}I.add.length&&(this._data.core.selected=this._data.core.selected.concat(I.add)),this.trigger("model",{nodes:I.dpc,parent:I.par}),"#"!==I.par?(this._node_changed(I.par),this.redraw()):this.redraw(!0),I.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),e.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker){try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+(""+u)],{type:"text/javascript"}))),!this._data.core.working||G?(this._data.core.working=!0,h=new window.Worker(this._wrk),h.onmessage=v.proxy(function(c){g.call(this,c.data,!0);try{h.terminate(),h=null}catch(a){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),E.par?h.postMessage(E):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([F,l,e,!0])}catch(D){g.call(this,u(E),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}}else{g.call(this,u(E),!1)}},_parse_model_from_html:function(D,e,I){I=I?[].concat(I):[],e&&I.unshift(e);var t,H,F=this._model.data,g={id:!1,text:!1,icon:!0,parent:e,parents:I,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},G,u,E;for(G in this._model.default_state){this._model.default_state.hasOwnProperty(G)&&(g.state[G]=this._model.default_state[G])}if(u=v.vakata.attributes(D,!0),v.each(u,function(a,c){return c=v.trim(c),c.length?(g.li_attr[a]=c,"id"===a&&(g.id=""+c),B):!0}),u=D.children("a").first(),u.length&&(u=v.vakata.attributes(u,!0),v.each(u,function(c,a){a=v.trim(a),a.length&&(g.a_attr[c]=a)})),u=D.children("a").first().length?D.children("a").first().clone():D.clone(),u.children("ins, i, ul").remove(),u=u.html(),u=v("<div />").html(u),g.text=this.settings.core.force_text?u.text():u.html(),u=D.data(),g.data=u?v.extend(!0,{},u):null,g.state.opened=D.hasClass("jstree-open"),g.state.selected=D.children("a").hasClass("jstree-clicked"),g.state.disabled=D.children("a").hasClass("jstree-disabled"),g.data&&g.data.jstree){for(G in g.data.jstree){g.data.jstree.hasOwnProperty(G)&&(g.state[G]=g.data.jstree[G])}}u=D.children("a").children(".jstree-themeicon"),u.length&&(g.icon=u.hasClass("jstree-themeicon-hidden")?!1:u.attr("rel")),g.state.icon&&(g.icon=g.state.icon),u=D.children("ul").children("li");do{E="j"+this._id+"_"+ ++this._cnt}while(F[E]);return g.id=g.li_attr.id?""+g.li_attr.id:E,u.length?(u.each(v.proxy(function(c,a){t=this._parse_model_from_html(v(a),g.id,I),H=this._model.data[t],g.children.push(t),H.children_d.length&&(g.children_d=g.children_d.concat(H.children_d))},this)),g.children_d=g.children_d.concat(g.children)):D.hasClass("jstree-closed")&&(g.state.loaded=!1),g.li_attr["class"]&&(g.li_attr["class"]=g.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),g.a_attr["class"]&&(g.a_attr["class"]=g.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),F[g.id]=g,g.state.selected&&this._data.core.selected.push(g.id),g.id},_parse_model_from_flat_json:function(G,E,g){g=g?g.concat():[],E&&g.unshift(E);var K=""+G.id,u=this._model.data,J=this._model.default_state,H,t,I,D,F={id:K,text:G.text||"",icon:G.icon!==B?G.icon:!0,parent:E,parents:g,children:G.children||[],children_d:G.children_d||[],data:G.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(H in J){J.hasOwnProperty(H)&&(F.state[H]=J[H])}if(G&&G.data&&G.data.jstree&&G.data.jstree.icon&&(F.icon=G.data.jstree.icon),G&&G.data&&(F.data=G.data,G.data.jstree)){for(H in G.data.jstree){G.data.jstree.hasOwnProperty(H)&&(F.state[H]=G.data.jstree[H])}}if(G&&"object"==typeof G.state){for(H in G.state){G.state.hasOwnProperty(H)&&(F.state[H]=G.state[H])}}if(G&&"object"==typeof G.li_attr){for(H in G.li_attr){G.li_attr.hasOwnProperty(H)&&(F.li_attr[H]=G.li_attr[H])}}if(F.li_attr.id||(F.li_attr.id=K),G&&"object"==typeof G.a_attr){for(H in G.a_attr){G.a_attr.hasOwnProperty(H)&&(F.a_attr[H]=G.a_attr[H])}}for(G&&G.children&&G.children===!0&&(F.state.loaded=!1,F.children=[],F.children_d=[]),u[F.id]=F,H=0,t=F.children.length;t>H;H++){I=this._parse_model_from_flat_json(u[F.children[H]],F.id,g),D=u[I],F.children_d.push(I),D.children_d.length&&(F.children_d=F.children_d.concat(D.children_d))}return delete G.data,delete G.children,u[F.id].original=G,F.state.selected&&this._data.core.selected.push(F.id),F.id},_parse_model_from_json:function(G,E,g){g=g?g.concat():[],E&&g.unshift(E);var K=!1,u,J,H,t,I=this._model.data,D=this._model.default_state,F;do{K="j"+this._id+"_"+ ++this._cnt}while(I[K]);F={id:!1,text:"string"==typeof G?G:"",icon:"object"==typeof G&&G.icon!==B?G.icon:!0,parent:E,parents:g,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(u in D){D.hasOwnProperty(u)&&(F.state[u]=D[u])}if(G&&G.id&&(F.id=""+G.id),G&&G.text&&(F.text=G.text),G&&G.data&&G.data.jstree&&G.data.jstree.icon&&(F.icon=G.data.jstree.icon),G&&G.data&&(F.data=G.data,G.data.jstree)){for(u in G.data.jstree){G.data.jstree.hasOwnProperty(u)&&(F.state[u]=G.data.jstree[u])}}if(G&&"object"==typeof G.state){for(u in G.state){G.state.hasOwnProperty(u)&&(F.state[u]=G.state[u])}}if(G&&"object"==typeof G.li_attr){for(u in G.li_attr){G.li_attr.hasOwnProperty(u)&&(F.li_attr[u]=G.li_attr[u])}}if(F.li_attr.id&&!F.id&&(F.id=""+F.li_attr.id),F.id||(F.id=K),F.li_attr.id||(F.li_attr.id=F.id),G&&"object"==typeof G.a_attr){for(u in G.a_attr){G.a_attr.hasOwnProperty(u)&&(F.a_attr[u]=G.a_attr[u])}}if(G&&G.children&&G.children.length){for(u=0,J=G.children.length;J>u;u++){H=this._parse_model_from_json(G.children[u],F.id,g),t=I[H],F.children.push(H),t.children_d.length&&(F.children_d=F.children_d.concat(t.children_d))}F.children_d=F.children_d.concat(F.children)}return G&&G.children&&G.children===!0&&(F.state.loaded=!1,F.children=[],F.children_d=[]),delete G.data,delete G.children,F.original=G,I[F.id]=F,F.state.selected&&this._data.core.selected.push(F.id),F.id},_redraw:function(){var h=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),c=document.createElement("UL"),a,g,d,l=this._data.core.focused;for(g=0,d=h.length;d>g;g++){a=this.redraw_node(h[g],!0,this._model.force_full_redraw),a&&this._model.force_full_redraw&&c.appendChild(a)}this._model.force_full_redraw&&(c.className=this.get_container_ul()[0].className,c.setAttribute("role","group"),this.element.empty().append(c)),null!==l&&(a=this.get_node(l,!0),a&&a.length&&a.children(".jstree-anchor")[0]!==document.activeElement?a.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:h})},redraw:function(a){a&&(this._model.force_full_redraw=!0),this._redraw()},redraw_node:function(Q,H,c,R){var E=this.get_node(Q),M=!1,L=!1,D=!1,G=!1,I=!1,O=!1,P="",J=document,K=this._model.data,e=!1,F=!1,N=null;if(!E){return !1}if("#"===E.id){return this.redraw(!0)}if(H=H||0===E.children.length,Q=document.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(E.id[0])?"\\3"+E.id[0]+" "+E.id.substr(1).replace(v.jstree.idregex,"\\$&"):E.id.replace(v.jstree.idregex,"\\$&"))):document.getElementById(E.id)){Q=v(Q),c||(M=Q.parent().parent()[0],M===this.element[0]&&(M=null),L=Q.index()),H||!E.children.length||Q.children(".jstree-children").length||(H=!0),H||(D=Q.children(".jstree-children")[0]),e=Q.children(".jstree-anchor")[0]===document.activeElement,Q.remove()}else{if(H=!0,!c){if(M="#"!==E.parent?v("#"+E.parent.replace(v.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===M||M&&K[E.parent].state.opened)){return !1}L=v.inArray(E.id,null===M?K["#"].children:K[E.parent].children)}}Q=x.cloneNode(!0),P="jstree-node ";for(G in E.li_attr){if(E.li_attr.hasOwnProperty(G)){if("id"===G){continue}"class"!==G?Q.setAttribute(G,E.li_attr[G]):P+=E.li_attr[G]}}E.a_attr.id||(E.a_attr.id=E.id+"_anchor"),Q.setAttribute("aria-selected",!!E.state.selected),Q.setAttribute("aria-level",E.parents.length),Q.setAttribute("aria-labelledby",E.a_attr.id),E.state.disabled&&Q.setAttribute("aria-disabled",!0),E.state.loaded&&!E.children.length?P+=" jstree-leaf":(P+=E.state.opened&&E.state.loaded?" jstree-open":" jstree-closed",Q.setAttribute("aria-expanded",E.state.opened&&E.state.loaded)),null!==E.parent&&K[E.parent].children[K[E.parent].children.length-1]===E.id&&(P+=" jstree-last"),Q.id=E.id,Q.className=P,P=(E.state.selected?" jstree-clicked":"")+(E.state.disabled?" jstree-disabled":"");for(I in E.a_attr){if(E.a_attr.hasOwnProperty(I)){if("href"===I&&"#"===E.a_attr[I]){continue}"class"!==I?Q.childNodes[1].setAttribute(I,E.a_attr[I]):P+=" "+E.a_attr[I]}}if(P.length&&(Q.childNodes[1].className="jstree-anchor "+P),(E.icon&&E.icon!==!0||E.icon===!1)&&(E.icon===!1?Q.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===E.icon.indexOf("/")&&-1===E.icon.indexOf(".")?Q.childNodes[1].childNodes[0].className+=" "+E.icon+" jstree-themeicon-custom":(Q.childNodes[1].childNodes[0].style.backgroundImage="url("+E.icon+")",Q.childNodes[1].childNodes[0].style.backgroundPosition="center center",Q.childNodes[1].childNodes[0].style.backgroundSize="auto",Q.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?Q.childNodes[1].appendChild(J.createTextNode(E.text)):Q.childNodes[1].innerHTML+=E.text,H&&E.children.length&&(E.state.opened||R)&&E.state.loaded){for(O=J.createElement("UL"),O.setAttribute("role","group"),O.className="jstree-children",G=0,I=E.children.length;I>G;G++){O.appendChild(this.redraw_node(E.children[G],H,!0))}Q.appendChild(O)}if(D&&Q.appendChild(D),!c){for(M||(M=this.element[0]),G=0,I=M.childNodes.length;I>G;G++){if(M.childNodes[G]&&M.childNodes[G].className&&-1!==M.childNodes[G].className.indexOf("jstree-children")){N=M.childNodes[G];break}}N||(N=J.createElement("UL"),N.setAttribute("role","group"),N.className="jstree-children",M.appendChild(N)),M=N,M.childNodes.length>L?M.insertBefore(Q,M.childNodes[L]):M.appendChild(Q),e&&Q.childNodes[1].focus()}return E.state.opened&&!E.state.loaded&&(E.state.opened=!1,setTimeout(v.proxy(function(){this.open_node(E.id,!1,0)},this),0)),Q},open_node:function(e,h,g){var u,c,t,l;if(v.isArray(e)){for(e=e.slice(),u=0,c=e.length;c>u;u++){this.open_node(e[u],h,g)}return !0}if(e=this.get_node(e),!e||"#"===e.id){return !1}if(g=g===B?this.settings.core.animation:g,!this.is_closed(e)){return h&&h.call(this,e,!1),!1}if(this.is_loaded(e)){t=this.get_node(e,!0),l=this,t.length&&(e.children.length&&!this._firstChild(t.children(".jstree-children")[0])&&(this.redraw_node(e,!0,!1,!0),t=this.get_node(e,!0)),g?(this.trigger("before_open",{node:e}),t.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(g,function(){this.style.display="",l.trigger("after_open",{node:e})})):(this.trigger("before_open",{node:e}),t[0].className=t[0].className.replace("jstree-closed","jstree-open"),t[0].setAttribute("aria-expanded",!0))),e.state.opened=!0,h&&h.call(this,e,!0),t.length||this.trigger("before_open",{node:e}),this.trigger("open_node",{node:e}),g&&t.length||this.trigger("after_open",{node:e})}else{if(this.is_loading(e)){return setTimeout(v.proxy(function(){this.open_node(e,h,g)},this),500)}this.load_node(e,function(d,a){return a?this.open_node(d,h,g):h?h.call(this,d,!1):!1})}},_open_to:function(c){if(c=this.get_node(c),!c||"#"===c.id){return !1}var a,e,d=c.parents;for(a=0,e=d.length;e>a;a+=1){"#"!==a&&this.open_node(d[a],!1,0)}return v("#"+c.id.replace(v.jstree.idregex,"\\$&"),this.element)},close_node:function(e,h){var g,o,c,l;if(v.isArray(e)){for(e=e.slice(),g=0,o=e.length;o>g;g++){this.close_node(e[g],h)}return !0}return e=this.get_node(e),e&&"#"!==e.id?this.is_closed(e)?!1:(h=h===B?this.settings.core.animation:h,c=this,l=this.get_node(e,!0),l.length&&(h?l.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(h,function(){this.style.display="",l.children(".jstree-children").remove(),c.trigger("after_close",{node:e})}):(l[0].className=l[0].className.replace("jstree-open","jstree-closed"),l.attr("aria-expanded",!1).children(".jstree-children").remove())),e.state.opened=!1,this.trigger("close_node",{node:e}),h&&l.length||this.trigger("after_close",{node:e}),B):!1},toggle_node:function(a){var d,c;if(v.isArray(a)){for(a=a.slice(),d=0,c=a.length;c>d;d++){this.toggle_node(a[d])}return !0}return this.is_closed(a)?this.open_node(a):this.is_open(a)?this.close_node(a):B},open_all:function(o,g,d){if(o||(o="#"),o=this.get_node(o),!o){return !1}var l="#"===o.id?this.get_container_ul():this.get_node(o,!0),h,u,c;if(!l.length){for(h=0,u=o.children_d.length;u>h;h++){this.is_closed(this._model.data[o.children_d[h]])&&(this._model.data[o.children_d[h]].state.opened=!0)}return this.trigger("open_all",{node:o})}d=d||l,c=this,l=this.is_closed(o)?l.find(".jstree-closed").addBack():l.find(".jstree-closed"),l.each(function(){c.open_node(this,function(i,a){a&&this.is_parent(i)&&this.open_all(i,g,d)},g||0)}),0===d.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(d)})},close_all:function(e,d){if(e||(e="#"),e=this.get_node(e),!e){return !1}var h="#"===e.id?this.get_container_ul():this.get_node(e,!0),g=this,l,c;if(!h.length){for(l=0,c=e.children_d.length;c>l;l++){this._model.data[e.children_d[l]].state.opened=!1}return this.trigger("close_all",{node:e})}h=this.is_open(e)?h.find(".jstree-open").addBack():h.find(".jstree-open"),v(h.get().reverse()).each(function(){g.close_node(this,d||0)}),this.trigger("close_all",{node:e})},is_disabled:function(a){return a=this.get_node(a),a&&a.state&&a.state.disabled},enable_node:function(a){var d,c;if(v.isArray(a)){for(a=a.slice(),d=0,c=a.length;c>d;d++){this.enable_node(a[d])}return !0}return a=this.get_node(a),a&&"#"!==a.id?(a.state.disabled=!1,this.get_node(a,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:a}),B):!1},disable_node:function(a){var d,c;if(v.isArray(a)){for(a=a.slice(),d=0,c=a.length;c>d;d++){this.disable_node(a[d])}return !0}return a=this.get_node(a),a&&"#"!==a.id?(a.state.disabled=!0,this.get_node(a,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:a}),B):!1},activate_node:function(t,g){if(this.is_disabled(t)){return !1}if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==B?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(g.metaKey||g.ctrlKey||g.shiftKey)&&(!g.shiftKey||this._data.core.last_clicked&&this.get_parent(t)&&this.get_parent(t)===this._data.core.last_clicked.parent)){if(g.shiftKey){var l=this.get_node(t).id,h=this._data.core.last_clicked.id,E=this.get_node(this._data.core.last_clicked.parent).children,c=!1,D,u;for(D=0,u=E.length;u>D;D+=1){E[D]===l&&(c=!c),E[D]===h&&(c=!c),c||E[D]===l||E[D]===h?this.select_node(E[D],!0,!1,g):this.deselect_node(E[D],!0,g)}this.trigger("changed",{action:"select_node",node:this.get_node(t),selected:this._data.core.selected,event:g})}else{this.is_selected(t)?this.deselect_node(t,!1,g):this.select_node(t,!1,!1,g)}}else{!this.settings.core.multiple&&(g.metaKey||g.ctrlKey||g.shiftKey)&&this.is_selected(t)?this.deselect_node(t,!1,g):(this.deselect_all(!0),this.select_node(t,!1,!1,g),this._data.core.last_clicked=this.get_node(t))}this.trigger("activate_node",{node:this.get_node(t)})},hover_node:function(d){if(d=this.get_node(d,!0),!d||!d.length||d.children(".jstree-hovered").length){return !1}var c=this.element.find(".jstree-hovered"),a=this.element;c&&c.length&&this.dehover_node(c),d.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(d)}),setTimeout(function(){a.attr("aria-activedescendant",d[0].id)},0)},dehover_node:function(a){return a=this.get_node(a,!0),a&&a.length&&a.children(".jstree-hovered").length?(a.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(a)}),B):!1},select_node:function(g,l,h,E){var e,u,t,D;if(v.isArray(g)){for(g=g.slice(),u=0,t=g.length;t>u;u++){this.select_node(g[u],l,h,E)}return !0}return g=this.get_node(g),g&&"#"!==g.id?(e=this.get_node(g,!0),g.state.selected||(g.state.selected=!0,this._data.core.selected.push(g.id),h||(e=this._open_to(g)),e&&e.length&&e.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:g,selected:this._data.core.selected,event:E}),l||this.trigger("changed",{action:"select_node",node:g,selected:this._data.core.selected,event:E})),B):!1},deselect_node:function(e,h,g){var o,c,l;if(v.isArray(e)){for(e=e.slice(),o=0,c=e.length;c>o;o++){this.deselect_node(e[o],h,g)}return !0}return e=this.get_node(e),e&&"#"!==e.id?(l=this.get_node(e,!0),e.state.selected&&(e.state.selected=!1,this._data.core.selected=v.vakata.array_remove_item(this._data.core.selected,e.id),l.length&&l.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:e,selected:this._data.core.selected,event:g}),h||this.trigger("changed",{action:"deselect_node",node:e,selected:this._data.core.selected,event:g})),B):!1},select_all:function(g){var c=this._data.core.selected.concat([]),a,d;for(this._data.core.selected=this._model.data["#"].children_d.concat(),a=0,d=this._data.core.selected.length;d>a;a++){this._model.data[this._data.core.selected[a]]&&(this._model.data[this._data.core.selected[a]].state.selected=!0)}this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),g||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:c})},deselect_all:function(g){var c=this._data.core.selected.concat([]),a,d;for(a=0,d=this._data.core.selected.length;d>a;a++){this._model.data[this._data.core.selected[a]]&&(this._model.data[this._data.core.selected[a]].state.selected=!1)}this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:c}),g||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:c})},is_selected:function(a){return a=this.get_node(a),a&&"#"!==a.id?a.state.selected:!1},get_selected:function(a){return a?v.map(this._data.core.selected,v.proxy(function(c){return this.get_node(c)},this)):this._data.core.selected.slice()},get_top_selected:function(g){var e=this.get_selected(!0),l={},h,u,c,o;for(h=0,u=e.length;u>h;h++){l[e[h].id]=e[h]}for(h=0,u=e.length;u>h;h++){for(c=0,o=e[h].children_d.length;o>c;c++){l[e[h].children_d[c]]&&delete l[e[h].children_d[c]]}}e=[];for(h in l){l.hasOwnProperty(h)&&e.push(h)}return g?v.map(e,v.proxy(function(a){return this.get_node(a)},this)):e},get_bottom_selected:function(c){var a=this.get_selected(!0),e=[],d,g;for(d=0,g=a.length;g>d;d++){a[d].children.length||e.push(a[d].id)}return c?v.map(e,v.proxy(function(h){return this.get_node(h)},this)):e},get_state:function(){var c={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},a;for(a in this._model.data){this._model.data.hasOwnProperty(a)&&"#"!==a&&(this._model.data[a].state.opened&&c.core.open.push(a),this._model.data[a].state.selected&&c.core.selected.push(a))}return c},set_state:function(e,h){if(e){if(e.core){var g,o,c,l;if(e.core.open){return v.isArray(e.core.open)?(g=!0,o=!1,c=this,v.each(e.core.open.concat([]),function(a,i){o=c.get_node(i),o&&(c.is_loaded(i)?(c.is_closed(i)&&c.open_node(i,!1,0),e&&e.core&&e.core.open&&v.vakata.array_remove_item(e.core.open,i)):(c.is_loading(i)||c.open_node(i,v.proxy(function(d,n){!n&&e&&e.core&&e.core.open&&v.vakata.array_remove_item(e.core.open,d.id),this.set_state(e,h)},c),0),g=!1))}),g&&(delete e.core.open,this.set_state(e,h)),!1):(delete e.core.open,this.set_state(e,h),!1)}if(e.core.scroll){return e.core.scroll&&e.core.scroll.left!==B&&this.element.scrollLeft(e.core.scroll.left),e.core.scroll&&e.core.scroll.top!==B&&this.element.scrollTop(e.core.scroll.top),delete e.core.scroll,this.set_state(e,h),!1}if(e.core.selected){return l=this,this.deselect_all(),v.each(e.core.selected,function(d,a){l.select_node(a)}),delete e.core.selected,this.set_state(e,h),!1}if(v.isEmptyObject(e.core)){return delete e.core,this.set_state(e,h),!1}}return v.isEmptyObject(e)?(e=null,h&&h.call(this),this.trigger("set_state"),!1):!0}return !1},refresh:function(c,a){this._data.core.state=a===!0?{}:this.get_state(),a&&v.isFunction(a)&&(this._data.core.state=a.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var d=this.get_container_ul()[0].className;c||(this.element.html("<ul class='"+d+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node("#",function(g,e){e&&(this.get_container_ul()[0].className=d,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(v.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(c){if(c=this.get_node(c),!c||"#"===c.id){return !1}var a=[],e=[],d=this._data.core.selected.concat([]);e.push(c.id),c.state.opened===!0&&a.push(c.id),this.get_node(c,!0).find(".jstree-open").each(function(){a.push(this.id)}),this._load_nodes(e,v.proxy(function(g){this.open_node(a,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:c,nodes:g})},this))},set_id:function(c,a){if(c=this.get_node(c),!c||"#"===c.id){return !1}var e,d,g=this._model.data;for(a=""+a,g[c.parent].children[v.inArray(c.id,g[c.parent].children)]=a,e=0,d=c.parents.length;d>e;e++){g[c.parents[e]].children_d[v.inArray(c.id,g[c.parents[e]].children_d)]=a}for(e=0,d=c.children.length;d>e;e++){g[c.children[e]].parent=a}for(e=0,d=c.children_d.length;d>e;e++){g[c.children_d[e]].parents[v.inArray(c.id,g[c.children_d[e]].parents)]=a}return e=v.inArray(c.id,this._data.core.selected),-1!==e&&(this._data.core.selected[e]=a),e=this.get_node(c.id,!0),e&&e.attr("id",a),delete g[c.id],c.id=a,g[a]=c,!0},get_text:function(a){return a=this.get_node(a),a&&"#"!==a.id?a.text:!1},set_text:function(c,a){var e,d;if(v.isArray(c)){for(c=c.slice(),e=0,d=c.length;d>e;e++){this.set_text(c[e],a)}return !0}return c=this.get_node(c),c&&"#"!==c.id?(c.text=a,this.get_node(c,!0).length&&this.redraw_node(c.id),this.trigger("set_text",{obj:c,text:a}),!0):!1},get_json:function(e,d,h){if(e=this.get_node(e||"#"),!e){return !1}d&&d.flat&&!h&&(h=[]);var g={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:v.extend(!0,{},e.li_attr),a_attr:v.extend(!0,{},e.a_attr),state:{},data:d&&d.no_data?!1:v.extend(!0,{},e.data)},l,c;if(d&&d.flat?g.parent=e.parent:g.children=[],!d||!d.no_state){for(l in e.state){e.state.hasOwnProperty(l)&&(g.state[l]=e.state[l])}}if(d&&d.no_id&&(delete g.id,g.li_attr&&g.li_attr.id&&delete g.li_attr.id,g.a_attr&&g.a_attr.id&&delete g.a_attr.id),d&&d.flat&&"#"!==e.id&&h.push(g),!d||!d.no_children){for(l=0,c=e.children.length;c>l;l++){d&&d.flat?this.get_json(e.children[l],d,h):g.children.push(this.get_json(e.children[l],d))}}return d&&d.flat?h:"#"===e.id?g.children:g},create_node:function(u,e,G,h,F){if(null===u&&(u="#"),u=this.get_node(u),!u){return !1}if(G=G===B?"last":G,!(""+G).match(/^(before|after)$/)&&!F&&!this.is_loaded(u)){return this.load_node(u,function(){this.create_node(u,e,G,h,!0)})}e||(e={text:this.get_string("New node")}),e.text===B&&(e.text=this.get_string("New node"));var D,g,E,t;switch("#"===u.id&&("before"===G&&(G="first"),"after"===G&&(G="last")),G){case"before":D=this.get_node(u.parent),G=v.inArray(u.id,D.children),u=D;break;case"after":D=this.get_node(u.parent),G=v.inArray(u.id,D.children)+1,u=D;break;case"inside":case"first":G=0;break;case"last":G=u.children.length;break;default:G||(G=0)}if(G>u.children.length&&(G=u.children.length),e.id||(e.id=!0),!this.check("create_node",e,u,G)){return this.settings.core.error.call(this,this._data.core.last_error),!1}if(e.id===!0&&delete e.id,e=this._parse_model_from_json(e,u.id,u.parents.concat()),!e){return !1}for(D=this.get_node(e),g=[],g.push(e),g=g.concat(D.children_d),this.trigger("model",{nodes:g,parent:u.id}),u.children_d=u.children_d.concat(g),E=0,t=u.parents.length;t>E;E++){this._model.data[u.parents[E]].children_d=this._model.data[u.parents[E]].children_d.concat(g)}for(e=D,D=[],E=0,t=u.children.length;t>E;E++){D[E>=G?E+1:E]=u.children[E]}return D[G]=e.id,u.children=D,this.redraw_node(u,!0),h&&h.call(this,this.get_node(e)),this.trigger("create_node",{node:this.get_node(e),parent:u.id,position:G}),e.id},rename_node:function(c,a){var e,d,g;if(v.isArray(c)){for(c=c.slice(),e=0,d=c.length;d>e;e++){this.rename_node(c[e],a)}return !0}return c=this.get_node(c),c&&"#"!==c.id?(g=c.text,this.check("rename_node",c,this.get_parent(c),a)?(this.set_text(c,a),this.trigger("rename_node",{node:c,text:a,old:g}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1)):!1},delete_node:function(J){var E,e,K,u,I,G,g,H,D,F;if(v.isArray(J)){for(J=J.slice(),E=0,e=J.length;e>E;E++){this.delete_node(J[E])}return !0}if(J=this.get_node(J),!J||"#"===J.id){return !1}if(K=this.get_node(J.parent),u=v.inArray(J.id,K.children),F=!1,!this.check("delete_node",J,K,u)){return this.settings.core.error.call(this,this._data.core.last_error),!1}for(-1!==u&&(K.children=v.vakata.array_remove(K.children,u)),I=J.children_d.concat([]),I.push(J.id),H=0,D=I.length;D>H;H++){for(G=0,g=J.parents.length;g>G;G++){u=v.inArray(I[H],this._model.data[J.parents[G]].children_d),-1!==u&&(this._model.data[J.parents[G]].children_d=v.vakata.array_remove(this._model.data[J.parents[G]].children_d,u))}this._model.data[I[H]].state.selected&&(F=!0,u=v.inArray(I[H],this._data.core.selected),-1!==u&&(this._data.core.selected=v.vakata.array_remove(this._data.core.selected,u)))}for(this.trigger("delete_node",{node:J,parent:K.id}),F&&this.trigger("changed",{action:"delete_node",node:J,selected:this._data.core.selected,parent:K.id}),H=0,D=I.length;D>H;H++){delete this._model.data[I[H]]}return this.redraw_node(K,!0),!0},check:function(g,e,l,h,u){e=e&&e.id?e:this.get_node(e),l=l&&l.id?l:this.get_node(l);var c=g.match(/^move_node|copy_node|create_node$/i)?l:e,o=this.settings.core.check_callback;return"move_node"!==g&&"copy_node"!==g||u&&u.is_multi||e.id!==l.id&&v.inArray(e.id,l.children)!==h&&-1===v.inArray(l.id,e.children_d)?(c&&c.data&&(c=c.data),c&&c.functions&&(c.functions[g]===!1||c.functions[g]===!0)?(c.functions[g]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+g,data:JSON.stringify({chk:g,pos:h,obj:e&&e.id?e.id:!1,par:l&&l.id?l.id:!1})}),c.functions[g]):o===!1||v.isFunction(o)&&o.call(this,g,e,l,h,u)===!1||o&&o[g]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+g,data:JSON.stringify({chk:g,pos:h,obj:e&&e.id?e.id:!1,par:l&&l.id?l.id:!1})},!1):!0):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:g,pos:h,obj:e&&e.id?e.id:!1,par:l&&l.id?l.id:!1})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(N,F,E,I,T,R){var H,S,K,O,U,D,P,Q,G,J,t,M,e,L;if(F=this.get_node(F),E=E===B?0:E,!F){return !1}if(!(""+E).match(/^(before|after)$/)&&!T&&!this.is_loaded(F)){return this.load_node(F,function(){this.move_node(N,F,E,I,!0)})}if(v.isArray(N)){for(N=N.slice(),H=0,S=N.length;S>H;H++){this.move_node(N[H],F,E,I,T,!0)&&(F=N[H],E="after")}return this.redraw(),!0}if(N=N&&N.id?N:this.get_node(N),!N||"#"===N.id){return !1}if(K=""+(N.parent||"#"),U=(""+E).match(/^(before|after)$/)&&"#"!==F.id?this.get_node(F.parent):F,D=N.instance?N.instance:this._model.data[N.id]?this:v.jstree.reference(N.id),P=!D||!D._id||this._id!==D._id,O=D&&D._id&&K&&D._model.data[K]&&D._model.data[K].children?v.inArray(N.id,D._model.data[K].children):-1,P){return this.copy_node(N,F,E,I,T)?(D&&D.delete_node(N),!0):!1}switch("#"===F.id&&("before"===E&&(E="first"),"after"===E&&(E="last")),E){case"before":E=v.inArray(F.id,U.children);break;case"after":E=v.inArray(F.id,U.children)+1;break;case"inside":case"first":E=0;break;case"last":E=U.children.length;break;default:E||(E=0)}if(E>U.children.length&&(E=U.children.length),!this.check("move_node",N,U,E,{core:!0,is_multi:D&&D._id&&D._id!==this._id,is_foreign:!D||!D._id})){return this.settings.core.error.call(this,this._data.core.last_error),!1}if(N.parent===U.id){for(Q=U.children.concat(),G=v.inArray(N.id,Q),-1!==G&&(Q=v.vakata.array_remove(Q,G),E>G&&E--),G=[],J=0,t=Q.length;t>J;J++){G[J>=E?J+1:J]=Q[J]}G[E]=N.id,U.children=G,this._node_changed(U.id),this.redraw("#"===U.id)}else{for(G=N.children_d.concat(),G.push(N.id),J=0,t=N.parents.length;t>J;J++){for(Q=[],L=D._model.data[N.parents[J]].children_d,M=0,e=L.length;e>M;M++){-1===v.inArray(L[M],G)&&Q.push(L[M])}D._model.data[N.parents[J]].children_d=Q}for(D._model.data[K].children=v.vakata.array_remove_item(D._model.data[K].children,N.id),J=0,t=U.parents.length;t>J;J++){this._model.data[U.parents[J]].children_d=this._model.data[U.parents[J]].children_d.concat(G)}for(Q=[],J=0,t=U.children.length;t>J;J++){Q[J>=E?J+1:J]=U.children[J]}for(Q[E]=N.id,U.children=Q,U.children_d.push(N.id),U.children_d=U.children_d.concat(N.children_d),N.parent=U.id,G=U.parents.concat(),G.unshift(U.id),L=N.parents.length,N.parents=G,G=G.concat(),J=0,t=N.children_d.length;t>J;J++){this._model.data[N.children_d[J]].parents=this._model.data[N.children_d[J]].parents.slice(0,-1*L),Array.prototype.push.apply(this._model.data[N.children_d[J]].parents,G)}("#"===K||"#"===U.id)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(K),this._node_changed(U.id)),R||this.redraw()}return I&&I.call(this,N,U,E),this.trigger("move_node",{node:N,parent:U.id,position:E,old_parent:K,old_position:O,is_multi:D&&D._id&&D._id!==this._id,is_foreign:!D||!D._id,old_instance:D,new_instance:this}),!0},copy_node:function(H,e,R,E,N,L){var D,M,G,I,P,Q,J,K,t,F,O;if(e=this.get_node(e),R=R===B?0:R,!e){return !1}if(!(""+R).match(/^(before|after)$/)&&!N&&!this.is_loaded(e)){return this.load_node(e,function(){this.copy_node(H,e,R,E,!0)})}if(v.isArray(H)){for(H=H.slice(),D=0,M=H.length;M>D;D++){I=this.copy_node(H[D],e,R,E,N,!0),I&&(e=I,R="after")}return this.redraw(),!0}if(H=H&&H.id?H:this.get_node(H),!H||"#"===H.id){return !1}switch(K=""+(H.parent||"#"),t=(""+R).match(/^(before|after)$/)&&"#"!==e.id?this.get_node(e.parent):e,F=H.instance?H.instance:this._model.data[H.id]?this:v.jstree.reference(H.id),O=!F||!F._id||this._id!==F._id,"#"===e.id&&("before"===R&&(R="first"),"after"===R&&(R="last")),R){case"before":R=v.inArray(e.id,t.children);break;case"after":R=v.inArray(e.id,t.children)+1;break;case"inside":case"first":R=0;break;case"last":R=t.children.length;break;default:R||(R=0)}if(R>t.children.length&&(R=t.children.length),!this.check("copy_node",H,t,R,{core:!0,is_multi:F&&F._id&&F._id!==this._id,is_foreign:!F||!F._id})){return this.settings.core.error.call(this,this._data.core.last_error),!1}if(J=F?F.get_json(H,{no_id:!0,no_data:!0,no_state:!0}):H,!J){return !1}if(J.id===!0&&delete J.id,J=this._parse_model_from_json(J,t.id,t.parents.concat()),!J){return !1}for(I=this.get_node(J),H&&H.state&&H.state.loaded===!1&&(I.state.loaded=!1),G=[],G.push(J),G=G.concat(I.children_d),this.trigger("model",{nodes:G,parent:t.id}),P=0,Q=t.parents.length;Q>P;P++){this._model.data[t.parents[P]].children_d=this._model.data[t.parents[P]].children_d.concat(G)}for(G=[],P=0,Q=t.children.length;Q>P;P++){G[P>=R?P+1:P]=t.children[P]}return G[R]=I.id,t.children=G,t.children_d.push(I.id),t.children_d=t.children_d.concat(I.children_d),"#"===t.id&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(t.id),L||this.redraw("#"===t.id),E&&E.call(this,I,t,R),this.trigger("copy_node",{node:I,original:H,parent:t.id,position:R,old_parent:K,old_position:F&&F._id&&K&&F._model.data[K]&&F._model.data[K].children?v.inArray(H.id,F._model.data[K].children):-1,is_multi:F&&F._id&&F._id!==this._id,is_foreign:!F||!F._id,old_instance:F,new_instance:this}),I.id},cut:function(g){if(g||(g=this._data.core.selected.concat()),v.isArray(g)||(g=[g]),!g.length){return !1}var e=[],l,h,n;for(h=0,n=g.length;n>h;h++){l=this.get_node(g[h]),l&&l.id&&"#"!==l.id&&e.push(l)}return e.length?(b=e,j=this,C="move_node",this.trigger("cut",{node:g}),B):!1},copy:function(g){if(g||(g=this._data.core.selected.concat()),v.isArray(g)||(g=[g]),!g.length){return !1}var e=[],l,h,n;for(h=0,n=g.length;n>h;h++){l=this.get_node(g[h]),l&&l.id&&"#"!==l.id&&e.push(l)}return e.length?(b=e,j=this,C="copy_node",this.trigger("copy",{node:g}),B):!1},get_buffer:function(){return{mode:C,node:b,inst:j}},can_paste:function(){return C!==!1&&b!==!1},paste:function(c,a){return c=this.get_node(c),c&&C&&C.match(/^(copy_node|move_node)$/)&&b?(this[C](b,c,a)&&this.trigger("paste",{parent:c.id,node:b,mode:C}),b=!1,C=!1,j=!1,B):!1},clear_buffer:function(){b=!1,C=!1,j=!1,this.trigger("clear_buffer")},edit:function(D,e){if(D=this.get_node(D),!D){return !1}if(this.settings.core.check_callback===!1){return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1}e="string"==typeof e?e:D.text,this.set_text(D,""),D=this._open_to(D);var I=this._data.core.rtl,t=this.element.width(),H=D.children(".jstree-anchor"),F=v("<span>"),g=e,G=v("<div />",{css:{position:"absolute",top:"-200px",left:I?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),u=v("<input />",{value:g,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:v.proxy(function(){var a=F.children(".jstree-rename-input"),c=a.val();""===c&&(c=g),G.remove(),F.replaceWith(H),F.remove(),this.set_text(D,g),this.rename_node(D,v("<div></div>").text(c)[this.settings.core.force_text?"text":"html"]())===!1&&this.set_text(D,g)},this),keydown:function(c){var a=c.which;27===a&&(this.value=g),(27===a||13===a||37===a||38===a||39===a||40===a||32===a)&&c.stopImmediatePropagation(),(27===a||13===a)&&(c.preventDefault(),this.blur())},click:function(a){a.stopImmediatePropagation()},mousedown:function(a){a.stopImmediatePropagation()},keyup:function(a){u.width(Math.min(G.text("pW"+this.value).width(),t))},keypress:function(a){return 13===a.which?!1:B}}),E={fontFamily:H.css("fontFamily")||"",fontSize:H.css("fontSize")||"",fontWeight:H.css("fontWeight")||"",fontStyle:H.css("fontStyle")||"",fontStretch:H.css("fontStretch")||"",fontVariant:H.css("fontVariant")||"",letterSpacing:H.css("letterSpacing")||"",wordSpacing:H.css("wordSpacing")||""};F.attr("class",H.attr("class")).append(H.contents().clone()).append(u),H.replaceWith(F),G.css(E),u.css(E).width(Math.min(G.text("pW"+u[0].value).width(),t))[0].select()},set_theme:function(c,a){if(!c){return !1}if(a===!0){var d=this.settings.core.themes.dir;d||(d=v.jstree.path+"/themes"),a=d+"/"+c+"/style.css"}a&&-1===v.inArray(a,y)&&(v("head").append('<link rel="stylesheet" href="'+a+'" type="text/css" />'),y.push(a)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=c,this.element.addClass("jstree-"+c),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+c+"-responsive"),this.trigger("set_theme",{theme:c})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(a){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=a,a&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(e,d){var h,g,l,c;if(v.isArray(e)){for(e=e.slice(),h=0,g=e.length;g>h;h++){this.set_icon(e[h],d)}return !0}return e=this.get_node(e),e&&"#"!==e.id?(c=e.icon,e.icon=d,l=this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon"),d===!1?this.hide_icon(e):d===!0?(l.removeClass("jstree-themeicon-custom "+c).css("background","").removeAttr("rel"),c===!1&&this.show_icon(e)):-1===d.indexOf("/")&&-1===d.indexOf(".")?(l.removeClass(c).css("background",""),l.addClass(d+" jstree-themeicon-custom").attr("rel",d),c===!1&&this.show_icon(e)):(l.removeClass(c).css("background",""),l.addClass("jstree-themeicon-custom").css("background","url('"+d+"') center center no-repeat").attr("rel",d),c===!1&&this.show_icon(e)),!0):!1},get_icon:function(a){return a=this.get_node(a),a&&"#"!==a.id?a.icon:!1},hide_icon:function(c){var a,d;if(v.isArray(c)){for(c=c.slice(),a=0,d=c.length;d>a;a++){this.hide_icon(c[a])}return !0}return c=this.get_node(c),c&&"#"!==c?(c.icon=!1,this.get_node(c,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0):!1},show_icon:function(c){var a,e,d;if(v.isArray(c)){for(c=c.slice(),a=0,e=c.length;e>a;a++){this.show_icon(c[a])}return !0}return c=this.get_node(c),c&&"#"!==c?(d=this.get_node(c,!0),c.icon=d.length?d.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,c.icon||(c.icon=!0),d.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0):!1}},v.vakata={},v.vakata.attributes=function(c,a){c=v(c)[0];var d=a?{}:[];return c&&c.attributes&&v.each(c.attributes,function(e,g){-1===v.inArray(g.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==g.value&&""!==v.trim(g.value)&&(a?d[g.name]=g.value:d.push(g.name))}),d},v.vakata.array_unique=function(h){var c=[],a,g,d;for(a=0,d=h.length;d>a;a++){for(g=0;a>=g;g++){if(h[a]===h[g]){break}}g===a&&c.push(h[a])}return c},v.vakata.array_remove=function(g,c,a){var d=g.slice((a||c)+1||g.length);return g.length=0>c?g.length+c:c,g.push.apply(g,d),g},v.vakata.array_remove_item=function(c,a){var d=v.inArray(a,c);return -1!==d?v.vakata.array_remove(c,d):c};var z=document.createElement("I");z.className="jstree-icon jstree-checkbox",z.setAttribute("role","presentation"),v.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},v.jstree.plugins.checkbox=function(a,c){this.bind=function(){c.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",v.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",v.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",v.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(v.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",v.proxy(function(u,h){var g=this._model.data,o=g[h.parent],l=h.nodes,D,d;for(D=0,d=l.length;d>D;D++){g[l[D]].state.checked=g[l[D]].original&&g[l[D]].original.state&&g[l[D]].original.state.checked,g[l[D]].state.checked&&this._data.checkbox.selected.push(l[D])}},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",v.proxy(function(O,G){var e=this._model.data,P=e[G.parent],E=G.nodes,L=[],J,D,K,F,H,M,N=this.settings.checkbox.cascade,I=this.settings.checkbox.tie_selection;if(-1!==N.indexOf("down")){if(P.state[I?"selected":"checked"]){for(D=0,K=E.length;K>D;D++){e[E[D]].state[I?"selected":"checked"]=!0}this._data[I?"core":"checkbox"].selected=this._data[I?"core":"checkbox"].selected.concat(E)}else{for(D=0,K=E.length;K>D;D++){if(e[E[D]].state[I?"selected":"checked"]){for(F=0,H=e[E[D]].children_d.length;H>F;F++){e[e[E[D]].children_d[F]].state[I?"selected":"checked"]=!0}this._data[I?"core":"checkbox"].selected=this._data[I?"core":"checkbox"].selected.concat(e[E[D]].children_d)}}}}if(-1!==N.indexOf("up")){for(D=0,K=P.children_d.length;K>D;D++){e[P.children_d[D]].children.length||L.push(e[P.children_d[D]].parent)}for(L=v.vakata.array_unique(L),F=0,H=L.length;H>F;F++){P=e[L[F]];while(P&&"#"!==P.id){for(J=0,D=0,K=P.children.length;K>D;D++){J+=e[P.children[D]].state[I?"selected":"checked"]}if(J!==K){break}P.state[I?"selected":"checked"]=!0,this._data[I?"core":"checkbox"].selected.push(P.id),M=this.get_node(P,!0),M&&M.length&&M.attr("aria-selected",!0).children(".jstree-anchor").addClass(I?"jstree-clicked":"jstree-checked"),P=this.get_node(P.parent)}}}this._data[I?"core":"checkbox"].selected=v.vakata.array_unique(this._data[I?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",v.proxy(function(K,E){var e=E.node,L=this._model.data,u=this.get_node(e.parent),I=this.get_node(e,!0),G,g,H,D,F=this.settings.checkbox.cascade,J=this.settings.checkbox.tie_selection;if(-1!==F.indexOf("down")){for(this._data[J?"core":"checkbox"].selected=v.vakata.array_unique(this._data[J?"core":"checkbox"].selected.concat(e.children_d)),G=0,g=e.children_d.length;g>G;G++){D=L[e.children_d[G]],D.state[J?"selected":"checked"]=!0,D&&D.original&&D.original.state&&D.original.state.undetermined&&(D.original.state.undetermined=!1)}}if(-1!==F.indexOf("up")){while(u&&"#"!==u.id){for(H=0,G=0,g=u.children.length;g>G;G++){H+=L[u.children[G]].state[J?"selected":"checked"]}if(H!==g){break}u.state[J?"selected":"checked"]=!0,this._data[J?"core":"checkbox"].selected.push(u.id),D=this.get_node(u,!0),D&&D.length&&D.attr("aria-selected",!0).children(".jstree-anchor").addClass(J?"jstree-clicked":"jstree-checked"),u=this.get_node(u.parent)}}-1!==F.indexOf("down")&&I.length&&I.find(".jstree-anchor").addClass(J?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",v.proxy(function(u,h){var g=this.get_node("#"),o=this._model.data,l,D,d;for(l=0,D=g.children_d.length;D>l;l++){d=o[g.children_d[l]],d&&d.original&&d.original.state&&d.original.state.undetermined&&(d.original.state.undetermined=!1)}},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",v.proxy(function(F,l){var e=l.node,G=this.get_node(e,!0),h,E,u,g=this.settings.checkbox.cascade,D=this.settings.checkbox.tie_selection;if(e&&e.original&&e.original.state&&e.original.state.undetermined&&(e.original.state.undetermined=!1),-1!==g.indexOf("down")){for(h=0,E=e.children_d.length;E>h;h++){u=this._model.data[e.children_d[h]],u.state[D?"selected":"checked"]=!1,u&&u.original&&u.original.state&&u.original.state.undetermined&&(u.original.state.undetermined=!1)}}if(-1!==g.indexOf("up")){for(h=0,E=e.parents.length;E>h;h++){u=this._model.data[e.parents[h]],u.state[D?"selected":"checked"]=!1,u&&u.original&&u.original.state&&u.original.state.undetermined&&(u.original.state.undetermined=!1),u=this.get_node(e.parents[h],!0),u&&u.length&&u.attr("aria-selected",!1).children(".jstree-anchor").removeClass(D?"jstree-clicked":"jstree-checked")}}for(u=[],h=0,E=this._data[D?"core":"checkbox"].selected.length;E>h;h++){-1!==g.indexOf("down")&&-1!==v.inArray(this._data[D?"core":"checkbox"].selected[h],e.children_d)||-1!==g.indexOf("up")&&-1!==v.inArray(this._data[D?"core":"checkbox"].selected[h],e.parents)||u.push(this._data[D?"core":"checkbox"].selected[h])}this._data[D?"core":"checkbox"].selected=v.vakata.array_unique(u),-1!==g.indexOf("down")&&G.length&&G.find(".jstree-anchor").removeClass(D?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",v.proxy(function(D,G){var u=this.get_node(G.parent),g=this._model.data,H,l,F,E,h=this.settings.checkbox.tie_selection;while(u&&"#"!==u.id){for(F=0,H=0,l=u.children.length;l>H;H++){F+=g[u.children[H]].state[h?"selected":"checked"]}if(F!==l){break}u.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(u.id),E=this.get_node(u,!0),E&&E.length&&E.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),u=this.get_node(u.parent)}},this)).on("move_node.jstree",v.proxy(function(K,E){var e=E.is_multi,L=E.old_parent,u=this.get_node(E.parent),I=this._model.data,G,g,H,D,F,J=this.settings.checkbox.tie_selection;if(!e){G=this.get_node(L);while(G&&"#"!==G.id){for(g=0,H=0,D=G.children.length;D>H;H++){g+=I[G.children[H]].state[J?"selected":"checked"]}if(g!==D){break}G.state[J?"selected":"checked"]=!0,this._data[J?"core":"checkbox"].selected.push(G.id),F=this.get_node(G,!0),F&&F.length&&F.attr("aria-selected",!0).children(".jstree-anchor").addClass(J?"jstree-clicked":"jstree-checked"),G=this.get_node(G.parent)}}G=u;while(G&&"#"!==G.id){for(g=0,H=0,D=G.children.length;D>H;H++){g+=I[G.children[H]].state[J?"selected":"checked"]}if(g===D){G.state[J?"selected":"checked"]||(G.state[J?"selected":"checked"]=!0,this._data[J?"core":"checkbox"].selected.push(G.id),F=this.get_node(G,!0),F&&F.length&&F.attr("aria-selected",!0).children(".jstree-anchor").addClass(J?"jstree-clicked":"jstree-checked"))}else{if(!G.state[J?"selected":"checked"]){break}G.state[J?"selected":"checked"]=!1,this._data[J?"core":"checkbox"].selected=v.vakata.array_remove_item(this._data[J?"core":"checkbox"].selected,G.id),F=this.get_node(G,!0),F&&F.length&&F.attr("aria-selected",!1).children(".jstree-anchor").removeClass(J?"jstree-clicked":"jstree-checked")}G=this.get_node(G.parent)}},this))},this._undetermined=function(){var h,g,o=this._model.data,l=this.settings.checkbox.tie_selection,D=this._data[l?"core":"checkbox"].selected,e=[],u=this;for(h=0,g=D.length;g>h;h++){o[D[h]]&&o[D[h]].parents&&(e=e.concat(o[D[h]].parents))}for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var i=u.get_node(this),d;if(i.state.loaded){for(h=0,g=i.children_d.length;g>h;h++){d=o[i.children_d[h]],!d.state.loaded&&d.original&&d.original.state&&d.original.state.undetermined&&d.original.state.undetermined===!0&&(e.push(d.id),e=e.concat(d.parents))}}else{i.original&&i.original.state&&i.original.state.undetermined&&i.original.state.undetermined===!0&&(e.push(i.id),e=e.concat(i.parents))}}),e=v.vakata.array_unique(e),e=v.vakata.array_remove_item(e,"#"),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),h=0,g=e.length;g>h;h++){o[e[h]].state[l?"selected":"checked"]||(D=this.get_node(e[h],!0),D&&D.length&&D.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))}},this.redraw_node=function(h,g,l,D){if(h=c.redraw_node.apply(this,arguments)){var e,u,r=null;for(e=0,u=h.childNodes.length;u>e;e++){if(h.childNodes[e]&&h.childNodes[e].className&&-1!==h.childNodes[e].className.indexOf("jstree-anchor")){r=h.childNodes[e];break}}r&&(!this.settings.checkbox.tie_selection&&this._model.data[h.id].state.checked&&(r.className+=" jstree-checked"),r.insertBefore(z.cloneNode(!1),r.childNodes[0]))}return l||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(v.proxy(this._undetermined,this),50)),h},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(h){h=this.get_node(h);var g=this.settings.checkbox.cascade,o,l,D=this.settings.checkbox.tie_selection,e=this._data[D?"core":"checkbox"].selected,u=this._model.data;if(!h||h.state[D?"selected":"checked"]===!0||-1===g.indexOf("undetermined")||-1===g.indexOf("down")&&-1===g.indexOf("up")){return !1}if(!h.state.loaded&&h.original.state.undetermined===!0){return !0}for(o=0,l=h.children_d.length;l>o;o++){if(-1!==v.inArray(h.children_d[o],e)||!u[h.children_d[o]].state.loaded&&u[h.children_d[o]].original.state.undetermined){return !0}}return !1},this.activate_node=function(d,e){return this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||v(e.target).hasClass("jstree-checkbox"))&&(e.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!v(e.target).hasClass("jstree-checkbox")?c.activate_node.call(this,d,e):(this.is_checked(d)?this.uncheck_node(d,e):this.check_node(d,e),this.trigger("activate_node",{node:this.get_node(d)}),B)},this.check_node=function(g,l){if(this.settings.checkbox.tie_selection){return this.select_node(g,!1,!0,l)}var h,t,e,o;if(v.isArray(g)){for(g=g.slice(),t=0,e=g.length;e>t;t++){this.check_node(g[t],l)}return !0}return g=this.get_node(g),g&&"#"!==g.id?(h=this.get_node(g,!0),g.state.checked||(g.state.checked=!0,this._data.checkbox.selected.push(g.id),h&&h.length&&h.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:g,selected:this._data.checkbox.selected,event:l})),B):!1},this.uncheck_node=function(e,h){if(this.settings.checkbox.tie_selection){return this.deselect_node(e,!1,h)}var g,l,d;if(v.isArray(e)){for(e=e.slice(),g=0,l=e.length;l>g;g++){this.uncheck_node(e[g],h)}return !0}return e=this.get_node(e),e&&"#"!==e.id?(d=this.get_node(e,!0),e.state.checked&&(e.state.checked=!1,this._data.checkbox.selected=v.vakata.array_remove_item(this._data.checkbox.selected,e.id),d.length&&d.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:e,selected:this._data.checkbox.selected,event:h})),B):!1},this.check_all=function(){if(this.settings.checkbox.tie_selection){return this.select_all()}var h=this._data.checkbox.selected.concat([]),g,d;for(this._data.checkbox.selected=this._model.data["#"].children_d.concat(),g=0,d=this._data.checkbox.selected.length;d>g;g++){this._model.data[this._data.checkbox.selected[g]]&&(this._model.data[this._data.checkbox.selected[g]].state.checked=!0)}this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection){return this.deselect_all()}var h=this._data.checkbox.selected.concat([]),g,d;for(g=0,d=this._data.checkbox.selected.length;d>g;g++){this._model.data[this._data.checkbox.selected[g]]&&(this._model.data[this._data.checkbox.selected[g]].state.checked=!1)}this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:h})},this.is_checked=function(d){return this.settings.checkbox.tie_selection?this.is_selected(d):(d=this.get_node(d),d&&"#"!==d.id?d.state.checked:!1)},this.get_checked=function(d){return this.settings.checkbox.tie_selection?this.get_selected(d):d?v.map(this._data.checkbox.selected,v.proxy(function(g){return this.get_node(g)},this)):this._data.checkbox.selected},this.get_top_checked=function(h){if(this.settings.checkbox.tie_selection){return this.get_top_selected(h)}var g=this.get_checked(!0),o={},l,D,e,u;for(l=0,D=g.length;D>l;l++){o[g[l].id]=g[l]}for(l=0,D=g.length;D>l;l++){for(e=0,u=g[l].children_d.length;u>e;e++){o[g[l].children_d[e]]&&delete o[g[l].children_d[e]]}}g=[];for(l in o){o.hasOwnProperty(l)&&g.push(l)}return h?v.map(g,v.proxy(function(d){return this.get_node(d)},this)):g},this.get_bottom_checked=function(e){if(this.settings.checkbox.tie_selection){return this.get_bottom_selected(e)}var d=this.get_checked(!0),h=[],g,l;for(g=0,l=d.length;l>g;g++){d[g].children.length||h.push(d[g].id)}return e?v.map(h,v.proxy(function(i){return this.get_node(i)},this)):h}},v.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(c,a){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(e){var d=v.jstree.reference(e.reference),g=d.get_node(e.reference);d.create_node(g,{},"last",function(h){setTimeout(function(){d.edit(h)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(e){var d=v.jstree.reference(e.reference),g=d.get_node(e.reference);d.edit(g)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(e){var d=v.jstree.reference(e.reference),g=d.get_node(e.reference);d.is_selected(g)?d.delete_node(d.get_selected()):d.delete_node(g)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){var d=v.jstree.reference(e.reference),g=d.get_node(e.reference);d.is_selected(g)?d.cut(d.get_selected()):d.cut(g)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){var d=v.jstree.reference(e.reference),g=d.get_node(e.reference);d.is_selected(g)?d.copy(d.get_selected()):d.copy(g)}},paste:{separator_before:!1,icon:!1,_disabled:function(d){return !v.jstree.reference(d.reference).can_paste()},separator_after:!1,label:"Paste",action:function(e){var d=v.jstree.reference(e.reference),g=d.get_node(e.reference);d.paste(g)}}}}}}},v.jstree.plugins.contextmenu=function(a,c){this.bind=function(){c.bind.call(this);var d=0;this.element.on("contextmenu.jstree",".jstree-anchor",v.proxy(function(g){g.preventDefault(),d=g.ctrlKey?g.timeStamp:0,this.is_loading(g.currentTarget)||this.show_contextmenu(g.currentTarget,g.pageX,g.pageY,g)},this)).on("click.jstree",".jstree-anchor",v.proxy(function(e){this._data.contextmenu.visible&&(!d||e.timeStamp-d>250)&&v.vakata.context.hide()},this)),v(document).on("context_hide.vakata.jstree",v.proxy(function(){this._data.contextmenu.visible=!1},this))},this.teardown=function(){this._data.contextmenu.visible&&v.vakata.context.hide(),c.teardown.call(this)},this.show_contextmenu=function(u,e,G,h){if(u=this.get_node(u),!u||"#"===u.id){return !1}var F=this.settings.contextmenu,D=this.get_node(u,!0),g=D.children(".jstree-anchor"),E=!1,t=!1;(F.show_at_node||e===B||G===B)&&(E=g.offset(),e=E.left,G=E.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(u)&&this.activate_node(u,h),t=F.items,v.isFunction(t)&&(t=t.call(this,u,v.proxy(function(d){this._show_contextmenu(u,e,G,d)},this))),v.isPlainObject(t)&&this._show_contextmenu(u,e,G,t)},this._show_contextmenu=function(g,e,l,h){var o=this.get_node(g,!0),d=o.children(".jstree-anchor");v(document).one("context_show.vakata.jstree",v.proxy(function(s,n){var u="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";v(n.element).addClass(u)},this)),this._data.contextmenu.visible=!0,v.vakata.context.show(d,{x:e,y:l},h),this.trigger("show_contextmenu",{node:g,x:e,y:l})}},function(d){var a=!1,c={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};d.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(e){d(document).triggerHandler("context_"+e+".vakata",{reference:c.reference,element:c.element,position:{x:c.position_x,y:c.position_y}})},_execute:function(e){return e=c.items[e],e&&(!e._disabled||d.isFunction(e._disabled)&&!e._disabled({item:e,reference:c.reference,element:c.element}))&&e.action?e.action.call(null,{item:e,reference:c.reference,element:c.element,position:{x:c.position_x,y:c.position_y}}):!1},_parse:function(g,h){if(!g){return !1}h||(c.html="",c.items=[]);var o="",e=!1,l;return h&&(o+="<ul>"),d.each(g,function(n,r){return r?(c.items.push(r),!e&&r.separator_before&&(o+="<li class='vakata-context-separator'><a href='#' "+(d.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),e=!1,o+="<li class='"+(r._class||"")+(r._disabled===!0||d.isFunction(r._disabled)&&r._disabled({item:r,reference:c.reference,element:c.element})?" vakata-contextmenu-disabled ":"")+"' "+(r.shortcut?" data-shortcut='"+r.shortcut+"' ":"")+">",o+="<a href='#' rel='"+(c.items.length-1)+"'>",d.vakata.context.settings.icons&&(o+="<i ",r.icon&&(o+=-1!==r.icon.indexOf("/")||-1!==r.icon.indexOf(".")?" style='background:url(\""+r.icon+"\") center center no-repeat' ":" class='"+r.icon+"' "),o+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),o+=(d.isFunction(r.label)?r.label({item:n,reference:c.reference,element:c.element}):r.label)+(r.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+r.shortcut+'">'+(r.shortcut_label||"")+"</span>":"")+"</a>",r.submenu&&(l=d.vakata.context._parse(r.submenu,!0),l&&(o+=l)),o+="</li>",r.separator_after&&(o+="<li class='vakata-context-separator'><a href='#' "+(d.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",e=!0),B):!0}),o=o.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),h&&(o+="</ul>"),h||(c.html=o,d.vakata.context._trigger("parse")),o.length>10?o:!1},_show_submenu:function(g){if(g=d(g),g.length&&g.children("ul").length){var i=g.children("ul"),h=g.offset().left+g.outerWidth(),E=g.offset().top,e=i.width(),u=i.height(),l=d(window).width()+d(window).scrollLeft(),D=d(window).height()+d(window).scrollTop();a?g[0>h-(e+10+g.outerWidth())?"addClass":"removeClass"]("vakata-context-left"):g[h+e+10>l?"addClass":"removeClass"]("vakata-context-right"),E+u+10>D&&i.css("bottom","-1px"),i.show()}},show:function(K,L,i){var H,F,e,G,r,D,I,J,E=!0;switch(c.element&&c.element.length&&c.element.width(""),E){case !L&&!K:return !1;case !!L&&!!K:c.reference=K,c.position_x=L.x,c.position_y=L.y;break;case !L&&!!K:c.reference=K,H=K.offset(),c.position_x=H.left+K.outerHeight(),c.position_y=H.top;break;case !!L&&!K:c.position_x=L.x,c.position_y=L.y}K&&!i&&d(K).data("vakata_contextmenu")&&(i=d(K).data("vakata_contextmenu")),d.vakata.context._parse(i)&&c.element.html(c.html),c.items.length&&(c.element.appendTo("body"),F=c.element,e=c.position_x,G=c.position_y,r=F.width(),D=F.height(),I=d(window).width()+d(window).scrollLeft(),J=d(window).height()+d(window).scrollTop(),a&&(e-=F.outerWidth(),d(window).scrollLeft()+20>e&&(e=d(window).scrollLeft()+20)),e+r+20>I&&(e=I-(r+20)),G+D+20>J&&(G=J-(D+20)),c.element.css({left:e,top:G}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),c.is_visible=!0,d.vakata.context._trigger("show"))},hide:function(){c.is_visible&&(c.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),c.is_visible=!1,d.vakata.context._trigger("hide"))}},d(function(){a="rtl"===d("body").css("direction");var e=!1;c.element=d("<ul class='vakata-context'></ul>"),c.element.on("mouseenter","li",function(g){g.stopImmediatePropagation(),d.contains(this,g.relatedTarget)||(e&&clearTimeout(e),c.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),d(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),d.vakata.context._show_submenu(this))}).on("mouseleave","li",function(g){d.contains(this,g.relatedTarget)||d(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(g){d(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),d.vakata.context.settings.hide_onmouseleave&&(e=setTimeout(function(h){return function(){d.vakata.context.hide()}}(this),d.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(g){g.preventDefault(),d(this).blur().parent().hasClass("vakata-context-disabled")||d.vakata.context._execute(d(this).attr("rel"))===!1||d.vakata.context.hide()}).on("keydown","a",function(h){var g=null;switch(h.which){case 13:case 32:h.type="mouseup",h.preventDefault(),d(h.currentTarget).trigger(h);break;case 37:c.is_visible&&(c.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),h.stopImmediatePropagation(),h.preventDefault());break;case 38:c.is_visible&&(g=c.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),g.length||(g=c.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),g.addClass("vakata-context-hover").children("a").focus(),h.stopImmediatePropagation(),h.preventDefault());break;case 39:c.is_visible&&(c.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),h.stopImmediatePropagation(),h.preventDefault());break;case 40:c.is_visible&&(g=c.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),g.length||(g=c.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),g.addClass("vakata-context-hover").children("a").focus(),h.stopImmediatePropagation(),h.preventDefault());break;case 27:d.vakata.context.hide(),h.preventDefault();break;default:}}).on("keydown",function(h){h.preventDefault();var g=c.element.find(".vakata-contextmenu-shortcut-"+h.which).parent();g.parent().not(".vakata-context-disabled")&&g.click()}),d(document).on("mousedown.vakata.jstree",function(g){c.is_visible&&!d.contains(c.element[0],g.target)&&d.vakata.context.hide()}).on("context_show.vakata.jstree",function(h,g){c.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),a&&c.element.addClass("vakata-context-rtl").css("direction","rtl"),c.element.find("ul").hide().end()})})}(v),v.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0},v.jstree.plugins.dnd=function(a,c){this.bind=function(){c.bind.call(this),this.element.on("mousedown.jstree touchstart.jstree",".jstree-anchor",v.proxy(function(d){var g=this.get_node(d.target),e=this.is_selected(g)?this.get_selected().length:1;return g&&g.id&&"#"!==g.id&&(1===d.which||"touchstart"===d.type)&&(this.settings.dnd.is_draggable===!0||v.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,e>1?this.get_selected(!0):[g]))?(this.element.trigger("mousedown.jstree"),v.vakata.dnd.start(d,{jstree:!0,origin:this,obj:this.get_node(g,!0),nodes:e>1?this.get_selected():[g.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+(e>1?e+" "+this.get_string("nodes"):this.get_text(d.currentTarget,!0))+'<ins class="jstree-copy" style="display:none;">+</ins></div>')):B},this))}},v(function(){var a=!1,d=!1,c=!1,e=v('<div id="jstree-marker">&#160;</div>').hide();v(document).on("dnd_start.vakata.jstree",function(h,g){a=!1,g&&g.data&&g.data.jstree&&e.appendTo("body")}).on("dnd_move.vakata.jstree",function(Q,N){if(c&&clearTimeout(c),N&&N.data&&N.data.jstree&&(!N.event.target.id||"jstree-marker"!==N.event.target.id)){var F=v.jstree.reference(N.event.target),O=!1,H=!1,K=!1,R,t,L,M,E,G,s,J,i,I,n,P,r,D;if(F&&F._data&&F._data.dnd){if(e.attr("class","jstree-"+F.get_theme()+(F.settings.core.themes.responsive?" jstree-dnd-responsive":"")),N.helper.children().attr("class","jstree-"+F.get_theme()+" jstree-"+F.get_theme()+"-"+F.get_theme_variant()+" "+(F.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"show":"hide"](),N.event.target!==F.element[0]&&N.event.target!==F.get_container_ul()[0]||0!==F.get_container_ul().children().length){if(O=v(N.event.target).closest(".jstree-anchor"),O&&O.length&&O.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(H=O.offset(),K=N.event.pageY-H.top,L=O.height(),G=L/3>K?["b","i","a"]:K>L-L/3?["a","i","b"]:K>L/2?["i","a","b"]:["i","b","a"],v.each(G,function(g,l){switch(l){case"b":R=H.left-6,t=H.top,M=F.get_parent(O),E=O.parent().index();break;case"i":r=F.settings.dnd.inside_pos,D=F.get_node(O.parent()),R=H.left-2,t=H.top+L/2+1,M=D.id,E="first"===r?0:"last"===r?D.children.length:Math.min(r,D.children.length);break;case"a":R=H.left-6,t=H.top+L,M=F.get_parent(O),E=O.parent().index()+1}for(s=!0,J=0,i=N.data.nodes.length;i>J;J++){if(I=N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"copy_node":"move_node",n=E,"move_node"===I&&"a"===l&&N.data.origin&&N.data.origin===F&&M===F.get_parent(N.data.nodes[J])&&(P=F.get_node(M),n>v.inArray(N.data.nodes[J],P.children)&&(n-=1)),s=s&&(F&&F.settings&&F.settings.dnd&&F.settings.dnd.check_while_dragging===!1||F.check(I,N.data.origin&&N.data.origin!==F?N.data.origin.get_node(N.data.nodes[J]):N.data.nodes[J],M,n,{dnd:!0,ref:F.get_node(O.parent()),pos:l,is_multi:N.data.origin&&N.data.origin!==F,is_foreign:!N.data.origin})),!s){F&&F.last_error&&(d=F.last_error());break}}return"i"===l&&O.parent().is(".jstree-closed")&&F.settings.dnd.open_timeout&&(c=setTimeout(function(o,h){return function(){o.open_node(h)}}(F,O),F.settings.dnd.open_timeout)),s?(a={ins:F,par:M,pos:"i"!==l||"last"!==r||0!==E||F.is_loaded(D)?E:"last"},e.css({left:R+"px",top:t+"px"}).show(),N.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),d={},G=!0,!1):B}),G===!0)){return}}else{for(s=!0,J=0,i=N.data.nodes.length;i>J;J++){if(s=s&&F.check(N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"copy_node":"move_node",N.data.origin&&N.data.origin!==F?N.data.origin.get_node(N.data.nodes[J]):N.data.nodes[J],"#","last",{dnd:!0,ref:F.get_node("#"),pos:"i",is_multi:N.data.origin&&N.data.origin!==F,is_foreign:!N.data.origin}),!s){break}}if(s){return a={ins:F,par:"#",pos:"last"},e.hide(),N.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),B}}}a=!1,N.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),e.hide()}}).on("dnd_scroll.vakata.jstree",function(h,g){g&&g.data&&g.data.jstree&&(e.hide(),a=!1,g.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(h,g){if(c&&clearTimeout(c),g&&g.data&&g.data.jstree){e.hide().detach();var l,i,n=[];if(a){for(l=0,i=g.data.nodes.length;i>l;l++){n[l]=g.data.origin?g.data.origin.get_node(g.data.nodes[l]):g.data.nodes[l],g.data.origin&&(n[l].instance=g.data.origin)}for(a.ins[g.data.origin&&(g.data.origin.settings.dnd.always_copy||g.data.origin.settings.dnd.copy&&(g.event.metaKey||g.event.ctrlKey))?"copy_node":"move_node"](n,a.par,a.pos),l=0,i=n.length;i>l;l++){n[l].instance&&(n[l].instance=null)}}else{l=v(g.event.target).closest(".jstree"),l.length&&d&&d.error&&"check"===d.error&&(l=l.jstree(!0),l&&l.settings.core.error.call(this,d))}}}).on("keyup.jstree keydown.jstree",function(h,g){g=v.vakata.dnd._get(),g&&g.data&&g.data.jstree&&g.helper.find(".jstree-copy").first()[g.data.origin&&(g.data.origin.settings.dnd.always_copy||g.data.origin.settings.dnd.copy&&(h.metaKey||h.ctrlKey))?"show":"hide"]()})}),function(c){var a={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};c.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(e,d){var g=c.vakata.dnd._get();g.event=d,c(document).triggerHandler("dnd_"+e+".vakata",g)},_get:function(){return{data:a.data,element:a.element,helper:a.helper}},_clean:function(){a.helper&&a.helper.remove(),a.scroll_i&&(clearInterval(a.scroll_i),a.scroll_i=!1),a={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},c(document).off("mousemove.vakata.jstree touchmove.vakata.jstree",c.vakata.dnd.drag),c(document).off("mouseup.vakata.jstree touchend.vakata.jstree",c.vakata.dnd.stop)},_scroll:function(d){if(!a.scroll_e||!a.scroll_l&&!a.scroll_t){return a.scroll_i&&(clearInterval(a.scroll_i),a.scroll_i=!1),!1}if(!a.scroll_i){return a.scroll_i=setInterval(c.vakata.dnd._scroll,100),!1}if(d===!0){return !1}var g=a.scroll_e.scrollTop(),e=a.scroll_e.scrollLeft();a.scroll_e.scrollTop(g+a.scroll_t*c.vakata.dnd.settings.scroll_speed),a.scroll_e.scrollLeft(e+a.scroll_l*c.vakata.dnd.settings.scroll_speed),(g!==a.scroll_e.scrollTop()||e!==a.scroll_e.scrollLeft())&&c.vakata.dnd._trigger("scroll",a.scroll_e)},start:function(d,g,e){"touchstart"===d.type&&d.originalEvent&&d.originalEvent.changedTouches&&d.originalEvent.changedTouches[0]&&(d.pageX=d.originalEvent.changedTouches[0].pageX,d.pageY=d.originalEvent.changedTouches[0].pageY,d.target=document.elementFromPoint(d.originalEvent.changedTouches[0].pageX-window.pageXOffset,d.originalEvent.changedTouches[0].pageY-window.pageYOffset)),a.is_drag&&c.vakata.dnd.stop({});try{d.currentTarget.unselectable="on",d.currentTarget.onselectstart=function(){return !1},d.currentTarget.style&&(d.currentTarget.style.MozUserSelect="none")}catch(h){}return a.init_x=d.pageX,a.init_y=d.pageY,a.data=g,a.is_down=!0,a.element=d.currentTarget,a.target=d.target,a.is_touch="touchstart"===d.type,e!==!1&&(a.helper=c("<div id='vakata-dnd'></div>").html(e).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),c(document).on("mousemove.vakata.jstree touchmove.vakata.jstree",c.vakata.dnd.drag),c(document).on("mouseup.vakata.jstree touchend.vakata.jstree",c.vakata.dnd.stop),!1},drag:function(e){if("touchmove"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),a.is_down){if(!a.is_drag){if(!(Math.abs(e.pageX-a.init_x)>(a.is_touch?c.vakata.dnd.settings.threshold_touch:c.vakata.dnd.settings.threshold)||Math.abs(e.pageY-a.init_y)>(a.is_touch?c.vakata.dnd.settings.threshold_touch:c.vakata.dnd.settings.threshold))){return}a.helper&&(a.helper.appendTo("body"),a.helper_w=a.helper.outerWidth()),a.is_drag=!0,c.vakata.dnd._trigger("start",e)}var J=!1,i=!1,G=!1,E=!1,g=!1,F=!1,t=!1,D=!1,H=!1,I=!1;return a.scroll_t=0,a.scroll_l=0,a.scroll_e=!1,c(c(e.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(c(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var d=c(this),h=d.offset();return this.scrollHeight>this.offsetHeight&&(h.top+d.height()-e.pageY<c.vakata.dnd.settings.scroll_proximity&&(a.scroll_t=1),e.pageY-h.top<c.vakata.dnd.settings.scroll_proximity&&(a.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(h.left+d.width()-e.pageX<c.vakata.dnd.settings.scroll_proximity&&(a.scroll_l=1),e.pageX-h.left<c.vakata.dnd.settings.scroll_proximity&&(a.scroll_l=-1)),a.scroll_t||a.scroll_l?(a.scroll_e=c(this),!1):B}),a.scroll_e||(J=c(document),i=c(window),G=J.height(),E=i.height(),g=J.width(),F=i.width(),t=J.scrollTop(),D=J.scrollLeft(),G>E&&e.pageY-t<c.vakata.dnd.settings.scroll_proximity&&(a.scroll_t=-1),G>E&&E-(e.pageY-t)<c.vakata.dnd.settings.scroll_proximity&&(a.scroll_t=1),g>F&&e.pageX-D<c.vakata.dnd.settings.scroll_proximity&&(a.scroll_l=-1),g>F&&F-(e.pageX-D)<c.vakata.dnd.settings.scroll_proximity&&(a.scroll_l=1),(a.scroll_t||a.scroll_l)&&(a.scroll_e=J)),a.scroll_e&&c.vakata.dnd._scroll(!0),a.helper&&(H=parseInt(e.pageY+c.vakata.dnd.settings.helper_top,10),I=parseInt(e.pageX+c.vakata.dnd.settings.helper_left,10),G&&H+25>G&&(H=G-50),g&&I+a.helper_w>g&&(I=g-(a.helper_w+2)),a.helper.css({left:I+"px",top:H+"px"})),c.vakata.dnd._trigger("move",e),!1}},stop:function(d){if("touchend"===d.type&&d.originalEvent&&d.originalEvent.changedTouches&&d.originalEvent.changedTouches[0]&&(d.pageX=d.originalEvent.changedTouches[0].pageX,d.pageY=d.originalEvent.changedTouches[0].pageY,d.target=document.elementFromPoint(d.originalEvent.changedTouches[0].pageX-window.pageXOffset,d.originalEvent.changedTouches[0].pageY-window.pageYOffset)),a.is_drag){c.vakata.dnd._trigger("stop",d)}else{if("touchend"===d.type&&d.target===a.target){var e=setTimeout(function(){c(d.target).click()},100);c(d.target).one("click",function(){e&&clearTimeout(e)})}}return c.vakata.dnd._clean(),!1}}}(v),v.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},v.jstree.plugins.search=function(a,c){this.bind=function(){c.bind.call(this),this._data.search.str="",this._data.search.dom=v(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this.element.on("before_open.jstree",v.proxy(function(h,g){var u,l,F,e=this._data.search.res,E=[],D=v();if(e&&e.length&&(this._data.search.dom=v(this.element[0].querySelectorAll("#"+v.map(e,function(d){return -1!=="0123456789".indexOf(d[0])?"\\3"+d[0]+" "+d.substr(1).replace(v.jstree.idregex,"\\$&"):d.replace(v.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),this._data.search.som&&this._data.search.res.length)){for(u=0,l=e.length;l>u;u++){E=E.concat(this.get_node(e[u]).parents)}E=v.vakata.array_remove_item(v.vakata.array_unique(E),"#"),D=E.length?v(this.element[0].querySelectorAll("#"+v.map(E,function(d){return -1!=="0123456789".indexOf(d[0])?"\\3"+d[0]+" "+d.substr(1).replace(v.jstree.idregex,"\\$&"):d.replace(v.jstree.idregex,"\\$&")}).join(", #"))):v(),this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),D=D.add(this._data.search.dom),D.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){v(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})}},this)).on("search.jstree",v.proxy(function(e,d){this._data.search.som&&d.nodes.length&&(this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),d.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){v(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")}))},this)).on("clear_search.jstree",v.proxy(function(g,d){this._data.search.som&&d.nodes.length&&this.element.find(".jstree-node").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")},this))},this.search=function(D,e,I){if(D===!1||""===v.trim(""+D)){return this.clear_search()}D=""+D;var t=this.settings.search,H=t.ajax?t.ajax:!1,F=null,g=[],G=[],u,E;return this._data.search.res.length&&this.clear_search(),I===B&&(I=t.show_only_matches),e||H===!1?(this._data.search.str=D,this._data.search.dom=v(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=I,F=new v.vakata.search(D,!0,{caseSensitive:t.case_sensitive,fuzzy:t.fuzzy}),v.each(this._model.data,function(h,d){d.text&&(t.search_callback&&t.search_callback.call(this,D,d)||!t.search_callback&&F.search(d.text).isMatch)&&(!t.search_leaves_only||d.state.loaded&&0===d.children.length)&&(g.push(h),G=G.concat(d.parents))}),g.length&&(G=v.vakata.array_unique(G),this._search_open(G),this._data.search.dom=v(this.element[0].querySelectorAll("#"+v.map(g,function(d){return -1!=="0123456789".indexOf(d[0])?"\\3"+d[0]+" "+d.substr(1).replace(v.jstree.idregex,"\\$&"):d.replace(v.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=g,this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")),this.trigger("search",{nodes:this._data.search.dom,str:D,res:this._data.search.res,show_only_matches:I}),B):v.isFunction(H)?H.call(this,D,v.proxy(function(d){d&&d.d&&(d=d.d),this._load_nodes(v.isArray(d)?v.vakata.array_unique(d):[],function(){this.search(D,!0,I)},!0)},this)):(H=v.extend({},H),H.data||(H.data={}),H.data.str=D,v.ajax(H).fail(v.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(H)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(v.proxy(function(d){d&&d.d&&(d=d.d),this._load_nodes(v.isArray(d)?v.vakata.array_unique(d):[],function(){this.search(D,!0,I)},!0)},this)))},this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search"),this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=v()},this._search_open=function(e){var d=this;v.each(e.concat([]),function(h,g){if("#"===g){return !0}try{g=v("#"+g.replace(v.jstree.idregex,"\\$&"),d.element)}catch(i){}g&&g.length&&d.is_closed(g)&&(d._data.search.opn.push(g[0].id),d.open_node(g,function(){d._search_open(e)},0))})}},function(a){a.vakata.search=function(F,J,E){E=E||{},E.fuzzy!==!1&&(E.fuzzy=!0),F=E.caseSensitive?F:F.toLowerCase();var g=E.location||0,K=E.distance||100,u=E.threshold||0.6,I=F.length,G,h,H,D;return I>32&&(E.fuzzy=!1),E.fuzzy&&(G=1<<I-1,h=function(){var d={},c=0;for(c=0;I>c;c++){d[F.charAt(c)]=0}for(c=0;I>c;c++){d[F.charAt(c)]|=1<<I-c-1}return d}(),H=function(l,d){var c=l/I,o=Math.abs(g-d);return K?c+o/K:o?1:c}),D=function(S){if(S=E.caseSensitive?S:S.toLowerCase(),F===S||-1!==S.indexOf(F)){return{isMatch:!0,score:0}}if(!E.fuzzy){return{isMatch:!1,score:1}}var T,e,o=S.length,Q=u,R=S.indexOf(F,g),r,L,c=I+o,d,P,n,N,i,O=1,M=[];for(-1!==R&&(Q=Math.min(H(0,R),Q),R=S.lastIndexOf(F,g+I),-1!==R&&(Q=Math.min(H(0,R),Q))),R=-1,T=0;I>T;T++){r=0,L=c;while(L>r){Q>=H(T,g+L)?r=L:c=L,L=Math.floor((c-r)/2+r)}for(c=L,P=Math.max(1,g-L+1),n=Math.min(g+L,o)+I,N=Array(n+2),N[n+1]=(1<<T)-1,e=n;e>=P;e--){if(i=h[S.charAt(e-1)],N[e]=0===T?(1|N[e+1]<<1)&i:(1|N[e+1]<<1)&i|(1|(d[e+1]|d[e])<<1)|d[e+1],N[e]&G&&(O=H(T,e-1),Q>=O)){if(Q=O,R=e-1,M.push(R),!(R>g)){break}P=Math.max(1,2*g-R)}}if(H(T+1,g)>Q){break}d=N}return{isMatch:R>=0,score:O}},J===!0?{search:D}:D(J)}}(v),v.jstree.defaults.sort=function(c,a){return this.get_text(c)>this.get_text(a)?1:-1},v.jstree.plugins.sort=function(c,a){this.bind=function(){a.bind.call(this),this.element.on("model.jstree",v.proxy(function(g,d){this.sort(d.parent,!0)},this)).on("rename_node.jstree create_node.jstree",v.proxy(function(g,d){this.sort(d.parent||d.node.parent,!1),this.redraw_node(d.parent||d.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",v.proxy(function(g,d){this.sort(d.parent,!1),this.redraw_node(d.parent,!0)},this))},this.sort=function(e,d){var h,g;if(e=this.get_node(e),e&&e.children&&e.children.length&&(e.children.sort(v.proxy(this.settings.sort,this)),d)){for(h=0,g=e.children_d.length;g>h;h++){this.sort(e.children_d[h],!1)}}}};var A=!1;v.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree",ttl:!1,filter:!1},v.jstree.plugins.state=function(c,a){this.bind=function(){a.bind.call(this);var d=v.proxy(function(){this.element.on(this.settings.state.events,v.proxy(function(){A&&clearTimeout(A),A=setTimeout(v.proxy(function(){this.save_state()},this),100)},this))},this);this.element.on("ready.jstree",v.proxy(function(h,g){this.element.one("restore_state.jstree",d),this.restore_state()||d()},this))},this.save_state=function(){var d={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};v.vakata.storage.set(this.settings.state.key,JSON.stringify(d))},this.restore_state=function(){var e=v.vakata.storage.get(this.settings.state.key);if(e){try{e=JSON.parse(e)}catch(d){return !1}}return e&&e.ttl&&e.sec&&+new Date-e.sec>e.ttl?!1:(e&&e.state&&(e=e.state),e&&v.isFunction(this.settings.state.filter)&&(e=this.settings.state.filter.call(this,e)),e?(this.element.one("set_state.jstree",function(g,h){h.instance.trigger("restore_state",{state:v.extend(!0,{},e)})}),this.set_state(e),!0):!1)},this.clear_state=function(){return v.vakata.storage.del(this.settings.state.key)}},function(c,a){c.vakata.storage={set:function(g,d){return window.localStorage.setItem(g,d)},get:function(d){return window.localStorage.getItem(d)},del:function(d){return window.localStorage.removeItem(d)}}}(v),v.jstree.defaults.types={"#":{},"default":{}},v.jstree.plugins.types=function(a,c){this.init=function(h,d){var g,l;if(d&&d.types&&d.types["default"]){for(g in d.types){if("default"!==g&&"#"!==g&&d.types.hasOwnProperty(g)){for(l in d.types["default"]){d.types["default"].hasOwnProperty(l)&&d.types[g][l]===B&&(d.types[g][l]=d.types["default"][l])}}}}c.init.call(this,h,d),this._model.data["#"].type="#"},this.refresh=function(g,d){c.refresh.call(this,g,d),this._model.data["#"].type="#"},this.bind=function(){this.element.on("model.jstree",v.proxy(function(u,h){var t=this._model.data,l=h.nodes,F=this.settings.types,g,E,D="default";for(g=0,E=l.length;E>g;g++){D="default",t[l[g]].original&&t[l[g]].original.type&&F[t[l[g]].original.type]&&(D=t[l[g]].original.type),t[l[g]].data&&t[l[g]].data.jstree&&t[l[g]].data.jstree.type&&F[t[l[g]].data.jstree.type]&&(D=t[l[g]].data.jstree.type),t[l[g]].type=D,t[l[g]].icon===!0&&F[D].icon!==B&&(t[l[g]].icon=F[D].icon)}t["#"].type="#"},this)),c.bind.call(this)},this.get_json=function(h,g,l){var E,e,u=this._model.data,r=g?v.extend(!0,{},g,{no_id:!1}):{},D=c.get_json.call(this,h,r,l);if(D===!1){return !1}if(v.isArray(D)){for(E=0,e=D.length;e>E;E++){D[E].type=D[E].id&&u[D[E].id]&&u[D[E].id].type?u[D[E].id].type:"default",g&&g.no_id&&(delete D[E].id,D[E].li_attr&&D[E].li_attr.id&&delete D[E].li_attr.id,D[E].a_attr&&D[E].a_attr.id&&delete D[E].a_attr.id)}}else{D.type=D.id&&u[D.id]&&u[D.id].type?u[D.id].type:"default",g&&g.no_id&&(D=this._delete_ids(D))}return D},this._delete_ids=function(e){if(v.isArray(e)){for(var d=0,g=e.length;g>d;d++){e[d]=this._delete_ids(e[d])}return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&v.isArray(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(t,H,g,F,D){if(c.check.call(this,t,H,g,F,D)===!1){return !1}H=H&&H.id?H:this.get_node(H),g=g&&g.id?g:this.get_node(g);var e=H&&H.id?v.jstree.reference(H.id):null,E,r,u,G;switch(e=e&&e._model&&e._model.data?e._model.data:null,t){case"create_node":case"move_node":case"copy_node":if("move_node"!==t||-1===v.inArray(H.id,g.children)){if(E=this.get_rules(g),E.max_children!==B&&-1!==E.max_children&&E.max_children===g.children.length){return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+t,data:JSON.stringify({chk:t,pos:F,obj:H&&H.id?H.id:!1,par:g&&g.id?g.id:!1})},!1}if(E.valid_children!==B&&-1!==E.valid_children&&-1===v.inArray(H.type||"default",E.valid_children)){return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+t,data:JSON.stringify({chk:t,pos:F,obj:H&&H.id?H.id:!1,par:g&&g.id?g.id:!1})},!1}if(e&&H.children_d&&H.parents){for(r=0,u=0,G=H.children_d.length;G>u;u++){r=Math.max(r,e[H.children_d[u]].parents.length)}r=r-H.parents.length+1}(0>=r||r===B)&&(r=1);do{if(E.max_depth!==B&&-1!==E.max_depth&&r>E.max_depth){return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+t,data:JSON.stringify({chk:t,pos:F,obj:H&&H.id?H.id:!1,par:g&&g.id?g.id:!1})},!1}g=this.get_node(g.parent),E=this.get_rules(g),r++}while(g)}}return !0},this.get_rules=function(g){if(g=this.get_node(g),!g){return !1}var d=this.get_type(g,!0);return d.max_depth===B&&(d.max_depth=-1),d.max_children===B&&(d.max_children=-1),d.valid_children===B&&(d.valid_children=-1),d},this.get_type=function(e,d){return e=this.get_node(e),e?d?v.extend({type:e.type},this.settings.types[e.type]):e.type:!1},this.set_type=function(g,l){var h,D,e,u,t;if(v.isArray(g)){for(g=g.slice(),D=0,e=g.length;e>D;D++){this.set_type(g[D],l)}return !0}return h=this.settings.types,g=this.get_node(g),h[l]&&g?(u=g.type,t=this.get_icon(g),g.type=l,(t===!0||h[u]&&h[u].icon!==B&&t===h[u].icon)&&this.set_icon(g,h[l].icon!==B?h[l].icon:!0),!0):!1}},v.jstree.defaults.unique={case_sensitive:!1,duplicate:function(c,a){return c+" ("+a+")"}},v.jstree.plugins.unique=function(a,c){this.check=function(I,u,J,g,G){if(c.check.call(this,I,u,J,g,G)===!1){return !1}if(u=u&&u.id?u:this.get_node(u),J=J&&J.id?J:this.get_node(J),!J||!J.children){return !0}var E="rename_node"===I?g:u.text,e=[],F=this.settings.unique.case_sensitive,r=this._model.data,D,H;for(D=0,H=J.children.length;H>D;D++){e.push(F?r[J.children[D]].text:r[J.children[D]].text.toLowerCase())}switch(F||(E=E.toLowerCase()),I){case"delete_node":return !0;case"rename_node":return D=-1===v.inArray(E,e)||u.text&&u.text[F?"toString":"toLowerCase"]()===E,D||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+E+" already exists. Preventing: "+I,data:JSON.stringify({chk:I,pos:g,obj:u&&u.id?u.id:!1,par:J&&J.id?J.id:!1})}),D;case"create_node":return D=-1===v.inArray(E,e),D||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+E+" already exists. Preventing: "+I,data:JSON.stringify({chk:I,pos:g,obj:u&&u.id?u.id:!1,par:J&&J.id?J.id:!1})}),D;case"copy_node":return D=-1===v.inArray(E,e),D||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+E+" already exists. Preventing: "+I,data:JSON.stringify({chk:I,pos:g,obj:u&&u.id?u.id:!1,par:J&&J.id?J.id:!1})}),D;case"move_node":return D=u.parent===J.id||-1===v.inArray(E,e),D||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+E+" already exists. Preventing: "+I,data:JSON.stringify({chk:I,pos:g,obj:u&&u.id?u.id:!1,par:J&&J.id?J.id:!1})}),D}return !0},this.create_node=function(D,M,r,J,H){if(!M||M.text===B){if(null===D&&(D="#"),D=this.get_node(D),!D){return c.create_node.call(this,D,M,r,J,H)}if(r=r===B?"last":r,!(""+r).match(/^(before|after)$/)&&!H&&!this.is_loaded(D)){return c.create_node.call(this,D,M,r,J,H)}M||(M={});var e,I,t,E,K,L=this._model.data,F=this.settings.unique.case_sensitive,G=this.settings.unique.duplicate;for(I=e=this.get_string("New node"),t=[],E=0,K=D.children.length;K>E;E++){t.push(F?L[D.children[E]].text:L[D.children[E]].text.toLowerCase())}E=1;while(-1!==v.inArray(F?I:I.toLowerCase(),t)){I=""+G.call(this,e,++E)}M.text=I}return c.create_node.call(this,D,M,r,J,H)}};var q=document.createElement("DIV");q.setAttribute("unselectable","on"),q.setAttribute("role","presentation"),q.className="jstree-wholerow",q.innerHTML="&#160;",v.jstree.plugins.wholerow=function(c,a){this.bind=function(){a.bind.call(this),this.element.on("ready.jstree set_state.jstree",v.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",v.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",v.proxy(function(g,d){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",v.proxy(function(n,g){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var d=!1,l,h;for(l=0,h=g.selected.length;h>l;l++){d=this.get_node(g.selected[l],!0),d&&d.length&&d.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}},this)).on("open_node.jstree",v.proxy(function(g,d){this.get_node(d.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",v.proxy(function(g,d){"hover_node"===g.type&&this.is_disabled(d.node)||this.get_node(d.node,!0).children(".jstree-wholerow")["hover_node"===g.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",v.proxy(function(e){e.preventDefault();var d=v.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});v(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(d)},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var d=v.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});v(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(d).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",v.proxy(function(e){e.stopImmediatePropagation();var d=v.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});v(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(d).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",v.proxy(function(d){return d.stopImmediatePropagation(),this.is_disabled(d.currentTarget)||this.hover_node(d.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",v.proxy(function(d){this.dehover_node(d.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),a.teardown.call(this)},this.redraw_node=function(e,h,g,i){if(e=a.redraw_node.apply(this,arguments)){var d=q.cloneNode(!0);-1!==v.inArray(e.id,this._data.core.selected)&&(d.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===e.id&&(d.className+=" jstree-wholerow-hovered"),e.insertBefore(d,e.childNodes[0])}return e}},function(d){if(document.registerElement&&Object&&Object.create){var c=Object.create(HTMLElement.prototype);c.createdCallback=function(){var g={core:{},plugins:[]},e;for(e in d.jstree.plugins){d.jstree.plugins.hasOwnProperty(e)&&this.attributes[e]&&(g.plugins.push(e),this.getAttribute(e)&&JSON.parse(this.getAttribute(e))&&(g[e]=JSON.parse(this.getAttribute(e))))}for(e in d.jstree.defaults.core){d.jstree.defaults.core.hasOwnProperty(e)&&this.attributes[e]&&(g.core[e]=JSON.parse(this.getAttribute(e))||this.getAttribute(e))}jQuery(this).jstree(g)};try{document.registerElement("vakata-jstree",{prototype:c})}catch(a){}}}(jQuery)}});
/*!
 * Knockout JavaScript library v3.2.0
 * (c) Steven Sanderson - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
(function(){(function(p){var s=this||(0,eval)("this"),v=s.document,L=s.navigator,w=s.jQuery,D=s.JSON;(function(p){"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?p(module.exports||exports,require):"function"===typeof define&&define.amd?define(["exports","require"],p):p(s.ko={})})(function(M,N){function H(a,d){return null===a||typeof a in R?a===d:!1}function S(a,d){var c;return function(){c||(c=setTimeout(function(){c=p;a()},d))}}function T(a,d){var c;return function(){clearTimeout(c);c=setTimeout(a,d)}}function I(b,d,c,e){a.d[b]={init:function(b,h,k,f,m){var l,q;a.s(function(){var f=a.a.c(h()),k=!c!==!f,z=!q;if(z||d||k!==l){z&&a.Y.la()&&(q=a.a.ia(a.f.childNodes(b),!0)),k?(z||a.f.T(b,a.a.ia(q)),a.Ca(e?e(m,f):m,b)):a.f.ja(b),l=k}},null,{o:b});return{controlsDescendantBindings:!0}}};a.h.ha[b]=!1;a.f.Q[b]=!0}var a="undefined"!==typeof M?M:{};a.b=function(b,d){for(var c=b.split("."),e=a,g=0;g<c.length-1;g++){e=e[c[g]]}e[c[c.length-1]]=d};a.A=function(a,d,c){a[d]=c};a.version="3.2.0";a.b("version",a.version);a.a=function(){function b(a,b){for(var c in a){a.hasOwnProperty(c)&&b(c,a[c])}}function d(a,b){if(b){for(var c in b){b.hasOwnProperty(c)&&(a[c]=b[c])}}return a}function c(a,b){a.__proto__=b;return a}var e={__proto__:[]} instanceof Array,g={},h={};g[L&&/Firefox\/2/i.test(L.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];g.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");b(g,function(a,b){if(b.length){for(var c=0,d=b.length;c<d;c++){h[b[c]]=a}}});var k={propertychange:!0},f=v&&function(){for(var a=3,b=v.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];){}return 4<a?a:p}();return{vb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],u:function(a,b){for(var c=0,d=a.length;c<d;c++){b(a[c],c)}},m:function(a,b){if("function"==typeof Array.prototype.indexOf){return Array.prototype.indexOf.call(a,b)}for(var c=0,d=a.length;c<d;c++){if(a[c]===b){return c}}return -1},qb:function(a,b,c){for(var d=0,f=a.length;d<f;d++){if(b.call(c,a[d],d)){return a[d]}}return null},ua:function(m,b){var c=a.a.m(m,b);0<c?m.splice(c,1):0===c&&m.shift()},rb:function(m){m=m||[];for(var b=[],c=0,d=m.length;c<d;c++){0>a.a.m(b,m[c])&&b.push(m[c])}return b},Da:function(a,b){a=a||[];for(var c=[],d=0,f=a.length;d<f;d++){c.push(b(a[d],d))}return c},ta:function(a,b){a=a||[];for(var c=[],d=0,f=a.length;d<f;d++){b(a[d],d)&&c.push(a[d])}return c},ga:function(a,b){if(b instanceof Array){a.push.apply(a,b)}else{for(var c=0,d=b.length;c<d;c++){a.push(b[c])}}return a},ea:function(b,c,d){var f=a.a.m(a.a.Xa(b),c);0>f?d&&b.push(c):d||b.splice(f,1)},xa:e,extend:d,za:c,Aa:e?c:d,G:b,na:function(a,b){if(!a){return a}var c={},d;for(d in a){a.hasOwnProperty(d)&&(c[d]=b(a[d],d,a))}return c},Ka:function(b){for(;b.firstChild;){a.removeNode(b.firstChild)}},oc:function(b){b=a.a.S(b);for(var c=v.createElement("div"),d=0,f=b.length;d<f;d++){c.appendChild(a.R(b[d]))}return c},ia:function(b,c){for(var d=0,f=b.length,e=[];d<f;d++){var k=b[d].cloneNode(!0);e.push(c?a.R(k):k)}return e},T:function(b,c){a.a.Ka(b);if(c){for(var d=0,f=c.length;d<f;d++){b.appendChild(c[d])}}},Lb:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var f=d[0],e=f.parentNode,k=0,g=c.length;k<g;k++){e.insertBefore(c[k],f)}k=0;for(g=d.length;k<g;k++){a.removeNode(d[k])}}},ka:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;){a.shift()}if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;){if(a.push(c),c=c.nextSibling,!c){return}}a.push(d)}}return a},Nb:function(a,b){7>f?a.setAttribute("selected",b):a.selected=b},cb:function(a){return null===a||a===p?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},vc:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===b},cc:function(a,b){if(a===b){return !0}if(11===a.nodeType){return !1}if(b.contains){return b.contains(3===a.nodeType?a.parentNode:a)}if(b.compareDocumentPosition){return 16==(b.compareDocumentPosition(a)&16)}for(;a&&a!=b;){a=a.parentNode}return !!a},Ja:function(b){return a.a.cc(b,b.ownerDocument.documentElement)},ob:function(b){return !!a.a.qb(b,a.a.Ja)},t:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},n:function(b,c,d){var e=f&&k[c];if(!e&&w){w(b).bind(c,d)}else{if(e||"function"!=typeof b.addEventListener){if("undefined"!=typeof b.attachEvent){var g=function(a){d.call(b,a)},h="on"+c;b.attachEvent(h,g);a.a.w.da(b,function(){b.detachEvent(h,g)})}else{throw Error("Browser doesn't support addEventListener or attachEvent")}}else{b.addEventListener(c,d,!1)}}},oa:function(b,c){if(!b||!b.nodeType){throw Error("element must be a DOM node when calling triggerEvent")}var d;"input"===a.a.t(b)&&b.type&&"click"==c.toLowerCase()?(d=b.type,d="checkbox"==d||"radio"==d):d=!1;if(w&&!d){w(b).trigger(c)}else{if("function"==typeof v.createEvent){if("function"==typeof b.dispatchEvent){d=v.createEvent(h[c]||"HTMLEvents"),d.initEvent(c,!0,!0,s,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(d)}else{throw Error("The supplied element doesn't support dispatchEvent")}}else{if(d&&b.click){b.click()}else{if("undefined"!=typeof b.fireEvent){b.fireEvent("on"+c)}else{throw Error("Browser doesn't support triggering events")}}}}},c:function(b){return a.C(b)?b():b},Xa:function(b){return a.C(b)?b.v():b},Ba:function(b,c,d){if(c){var f=/\S+/g,e=b.className.match(f)||[];a.a.u(c.match(f),function(b){a.a.ea(e,b,d)});b.className=e.join(" ")}},bb:function(b,c){var d=a.a.c(c);if(null===d||d===p){d=""}var f=a.f.firstChild(b);!f||3!=f.nodeType||a.f.nextSibling(f)?a.f.T(b,[b.ownerDocument.createTextNode(d)]):f.data=d;a.a.fc(b)},Mb:function(a,b){a.name=b;if(7>=f){try{a.mergeAttributes(v.createElement("<input name='"+a.name+"'/>"),!1)}catch(c){}}},fc:function(a){9<=f&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},dc:function(a){if(f){var b=a.style.width;a.style.width=0;a.style.width=b}},sc:function(b,c){b=a.a.c(b);c=a.a.c(c);for(var d=[],f=b;f<=c;f++){d.push(f)}return d},S:function(a){for(var b=[],c=0,d=a.length;c<d;c++){b.push(a[c])}return b},yc:6===f,zc:7===f,L:f,xb:function(b,c){for(var d=a.a.S(b.getElementsByTagName("input")).concat(a.a.S(b.getElementsByTagName("textarea"))),f="string"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},e=[],k=d.length-1;0<=k;k--){f(d[k])&&e.push(d[k])}return e},pc:function(b){return"string"==typeof b&&(b=a.a.cb(b))?D&&D.parse?D.parse(b):(new Function("return "+b))():null},eb:function(b,c,d){if(!D||!D.stringify){throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js")}return D.stringify(a.a.c(b),c,d)},qc:function(c,d,f){f=f||{};var e=f.params||{},k=f.includeFields||this.vb,g=c;if("object"==typeof c&&"form"===a.a.t(c)){for(var g=c.action,h=k.length-1;0<=h;h--){for(var r=a.a.xb(c,k[h]),E=r.length-1;0<=E;E--){e[r[E].name]=r[E].value}}}d=a.a.c(d);var y=v.createElement("form");y.style.display="none";y.action=g;y.method="post";for(var p in d){c=v.createElement("input"),c.type="hidden",c.name=p,c.value=a.a.eb(a.a.c(d[p])),y.appendChild(c)}b(e,function(a,b){var c=v.createElement("input");c.type="hidden";c.name=a;c.value=b;y.appendChild(c)});v.body.appendChild(y);f.submitter?f.submitter(y):y.submit();setTimeout(function(){y.parentNode.removeChild(y)},0)}}}();a.b("utils",a.a);a.b("utils.arrayForEach",a.a.u);a.b("utils.arrayFirst",a.a.qb);a.b("utils.arrayFilter",a.a.ta);a.b("utils.arrayGetDistinctValues",a.a.rb);a.b("utils.arrayIndexOf",a.a.m);a.b("utils.arrayMap",a.a.Da);a.b("utils.arrayPushAll",a.a.ga);a.b("utils.arrayRemoveItem",a.a.ua);a.b("utils.extend",a.a.extend);a.b("utils.fieldsIncludedWithJsonPost",a.a.vb);a.b("utils.getFormFields",a.a.xb);a.b("utils.peekObservable",a.a.Xa);a.b("utils.postJson",a.a.qc);a.b("utils.parseJson",a.a.pc);a.b("utils.registerEventHandler",a.a.n);a.b("utils.stringifyJson",a.a.eb);a.b("utils.range",a.a.sc);a.b("utils.toggleDomNodeCssClass",a.a.Ba);a.b("utils.triggerEvent",a.a.oa);a.b("utils.unwrapObservable",a.a.c);a.b("utils.objectForEach",a.a.G);a.b("utils.addOrRemoveItem",a.a.ea);a.b("unwrap",a.a.c);Function.prototype.bind||(Function.prototype.bind=function(a){var d=this,c=Array.prototype.slice.call(arguments);a=c.shift();return function(){return d.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});a.a.e=new function(){function a(b,h){var k=b[c];if(!k||"null"===k||!e[k]){if(!h){return p}k=b[c]="ko"+d++;e[k]={}}return e[k]}var d=0,c="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=a(c,!1);return e===p?p:e[d]},set:function(c,d,e){if(e!==p||a(c,!1)!==p){a(c,!0)[d]=e}},clear:function(a){var b=a[c];return b?(delete e[b],a[c]=null,!0):!1},F:function(){return d+++c}}};a.b("utils.domData",a.a.e);a.b("utils.domData.clear",a.a.e.clear);a.a.w=new function(){function b(b,d){var f=a.a.e.get(b,c);f===p&&d&&(f=[],a.a.e.set(b,c,f));return f}function d(c){var e=b(c,!1);if(e){for(var e=e.slice(0),f=0;f<e.length;f++){e[f](c)}}a.a.e.clear(c);a.a.w.cleanExternalData(c);if(g[c.nodeType]){for(e=c.firstChild;c=e;){e=c.nextSibling,8===c.nodeType&&d(c)}}}var c=a.a.e.F(),e={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{da:function(a,c){if("function"!=typeof c){throw Error("Callback must be a function")}b(a,!0).push(c)},Kb:function(d,e){var f=b(d,!1);f&&(a.a.ua(f,e),0==f.length&&a.a.e.set(d,c,p))},R:function(b){if(e[b.nodeType]&&(d(b),g[b.nodeType])){var c=[];a.a.ga(c,b.getElementsByTagName("*"));for(var f=0,m=c.length;f<m;f++){d(c[f])}}return b},removeNode:function(b){a.R(b);b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){w&&"function"==typeof w.cleanData&&w.cleanData([a])}}};a.R=a.a.w.R;a.removeNode=a.a.w.removeNode;a.b("cleanNode",a.R);a.b("removeNode",a.removeNode);a.b("utils.domNodeDisposal",a.a.w);a.b("utils.domNodeDisposal.addDisposeCallback",a.a.w.da);a.b("utils.domNodeDisposal.removeDisposeCallback",a.a.w.Kb);(function(){a.a.ba=function(b){var d;if(w){if(w.parseHTML){d=w.parseHTML(b)||[]}else{if((d=w.clean([b]))&&d[0]){for(b=d[0];b.parentNode&&11!==b.parentNode.nodeType;){b=b.parentNode}b.parentNode&&b.parentNode.removeChild(b)}}}else{var c=a.a.cb(b).toLowerCase();d=v.createElement("div");c=c.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!c.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!c.indexOf("<td")||!c.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];b="ignored<div>"+c[1]+b+c[2]+"</div>";for("function"==typeof s.innerShiv?d.appendChild(s.innerShiv(b)):d.innerHTML=b;c[0]--;){d=d.lastChild}d=a.a.S(d.lastChild.childNodes)}return d};a.a.$a=function(b,d){a.a.Ka(b);d=a.a.c(d);if(null!==d&&d!==p){if("string"!=typeof d&&(d=d.toString()),w){w(b).html(d)}else{for(var c=a.a.ba(d),e=0;e<c.length;e++){b.appendChild(c[e])}}}}})();a.b("utils.parseHtmlFragment",a.a.ba);a.b("utils.setHtml",a.a.$a);a.D=function(){function b(c,d){if(c){if(8==c.nodeType){var g=a.D.Gb(c.nodeValue);null!=g&&d.push({bc:c,mc:g})}else{if(1==c.nodeType){for(var g=0,h=c.childNodes,k=h.length;g<k;g++){b(h[g],d)}}}}}var d={};return{Ua:function(a){if("function"!=typeof a){throw Error("You can only pass a function to ko.memoization.memoize()")}var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);d[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},Rb:function(a,b){var g=d[a];if(g===p){throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.")}try{return g.apply(null,b||[]),!0}finally{delete d[a]}},Sb:function(c,d){var g=[];b(c,g);for(var h=0,k=g.length;h<k;h++){var f=g[h].bc,m=[f];d&&a.a.ga(m,d);a.D.Rb(g[h].mc,m);f.nodeValue="";f.parentNode&&f.parentNode.removeChild(f)}},Gb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}();a.b("memoization",a.D);a.b("memoization.memoize",a.D.Ua);a.b("memoization.unmemoize",a.D.Rb);a.b("memoization.parseMemoText",a.D.Gb);a.b("memoization.unmemoizeDomNodeAndDescendants",a.D.Sb);a.La={throttle:function(b,d){b.throttleEvaluation=d;var c=null;return a.j({read:b,write:function(a){clearTimeout(c);c=setTimeout(function(){b(a)},d)}})},rateLimit:function(a,d){var c,e,g;"number"==typeof d?c=d:(c=d.timeout,e=d.method);g="notifyWhenChangesStop"==e?T:S;a.Ta(function(a){return g(a,c)})},notify:function(a,d){a.equalityComparer="always"==d?null:H}};var R={undefined:1,"boolean":1,number:1,string:1};a.b("extenders",a.La);a.Pb=function(b,d,c){this.target=b;this.wa=d;this.ac=c;this.Cb=!1;a.A(this,"dispose",this.K)};a.Pb.prototype.K=function(){this.Cb=!0;this.ac()};a.P=function(){a.a.Aa(this,a.P.fn);this.M={}};var G="change",A={U:function(b,d,c){var e=this;c=c||G;var g=new a.Pb(e,d?b.bind(d):b,function(){a.a.ua(e.M[c],g);e.nb&&e.nb()});e.va&&e.va(c);e.M[c]||(e.M[c]=[]);e.M[c].push(g);return g},notifySubscribers:function(b,d){d=d||G;if(this.Ab(d)){try{a.k.Ea();for(var c=this.M[d].slice(0),e=0,g;g=c[e];++e){g.Cb||g.wa(b)}}finally{a.k.end()}}},Ta:function(b){var d=this,c=a.C(d),e,g,h;d.qa||(d.qa=d.notifySubscribers,d.notifySubscribers=function(a,b){b&&b!==G?"beforeChange"===b?d.kb(a):d.qa(a,b):d.lb(a)});var k=b(function(){c&&h===d&&(h=d());e=!1;d.Pa(g,h)&&d.qa(g=h)});d.lb=function(a){e=!0;h=a;k()};d.kb=function(a){e||(g=a,d.qa(a,"beforeChange"))}},Ab:function(a){return this.M[a]&&this.M[a].length},yb:function(){var b=0;a.a.G(this.M,function(a,c){b+=c.length});return b},Pa:function(a,d){return !this.equalityComparer||!this.equalityComparer(a,d)},extend:function(b){var d=this;b&&a.a.G(b,function(b,e){var g=a.La[b];"function"==typeof g&&(d=g(d,e)||d)});return d}};a.A(A,"subscribe",A.U);a.A(A,"extend",A.extend);a.A(A,"getSubscriptionsCount",A.yb);a.a.xa&&a.a.za(A,Function.prototype);a.P.fn=A;a.Db=function(a){return null!=a&&"function"==typeof a.U&&"function"==typeof a.notifySubscribers};a.b("subscribable",a.P);a.b("isSubscribable",a.Db);a.Y=a.k=function(){function b(a){c.push(e);e=a}function d(){e=c.pop()}var c=[],e,g=0;return{Ea:b,end:d,Jb:function(b){if(e){if(!a.Db(b)){throw Error("Only subscribable things can act as dependencies")}e.wa(b,b.Vb||(b.Vb=++g))}},B:function(a,c,f){try{return b(),a.apply(c,f||[])}finally{d()}},la:function(){if(e){return e.s.la()}},ma:function(){if(e){return e.ma}}}}();a.b("computedContext",a.Y);a.b("computedContext.getDependenciesCount",a.Y.la);a.b("computedContext.isInitial",a.Y.ma);a.b("computedContext.isSleeping",a.Y.Ac);a.p=function(b){function d(){if(0<arguments.length){return d.Pa(c,arguments[0])&&(d.X(),c=arguments[0],d.W()),this}a.k.Jb(d);return c}var c=b;a.P.call(d);a.a.Aa(d,a.p.fn);d.v=function(){return c};d.W=function(){d.notifySubscribers(c)};d.X=function(){d.notifySubscribers(c,"beforeChange")};a.A(d,"peek",d.v);a.A(d,"valueHasMutated",d.W);a.A(d,"valueWillMutate",d.X);return d};a.p.fn={equalityComparer:H};var F=a.p.rc="__ko_proto__";a.p.fn[F]=a.p;a.a.xa&&a.a.za(a.p.fn,a.P.fn);a.Ma=function(b,d){return null===b||b===p||b[F]===p?!1:b[F]===d?!0:a.Ma(b[F],d)};a.C=function(b){return a.Ma(b,a.p)};a.Ra=function(b){return"function"==typeof b&&b[F]===a.p||"function"==typeof b&&b[F]===a.j&&b.hc?!0:!1};a.b("observable",a.p);a.b("isObservable",a.C);a.b("isWriteableObservable",a.Ra);a.b("isWritableObservable",a.Ra);a.aa=function(b){b=b||[];if("object"!=typeof b||!("length" in b)){throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")}b=a.p(b);a.a.Aa(b,a.aa.fn);return b.extend({trackArrayChanges:!0})};a.aa.fn={remove:function(b){for(var d=this.v(),c=[],e="function"!=typeof b||a.C(b)?function(a){return a===b}:b,g=0;g<d.length;g++){var h=d[g];e(h)&&(0===c.length&&this.X(),c.push(h),d.splice(g,1),g--)}c.length&&this.W();return c},removeAll:function(b){if(b===p){var d=this.v(),c=d.slice(0);this.X();d.splice(0,d.length);this.W();return c}return b?this.remove(function(c){return 0<=a.a.m(b,c)}):[]},destroy:function(b){var d=this.v(),c="function"!=typeof b||a.C(b)?function(a){return a===b}:b;this.X();for(var e=d.length-1;0<=e;e--){c(d[e])&&(d[e]._destroy=!0)}this.W()},destroyAll:function(b){return b===p?this.destroy(function(){return !0}):b?this.destroy(function(d){return 0<=a.a.m(b,d)}):[]},indexOf:function(b){var d=this();return a.a.m(d,b)},replace:function(a,d){var c=this.indexOf(a);0<=c&&(this.X(),this.v()[c]=d,this.W())}};a.a.u("pop push reverse shift sort splice unshift".split(" "),function(b){a.aa.fn[b]=function(){var a=this.v();this.X();this.sb(a,b,arguments);a=a[b].apply(a,arguments);this.W();return a}});a.a.u(["slice"],function(b){a.aa.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.a.xa&&a.a.za(a.aa.fn,a.p.fn);a.b("observableArray",a.aa);var J="arrayChange";a.La.trackArrayChanges=function(b){function d(){if(!c){c=!0;var d=b.notifySubscribers;b.notifySubscribers=function(a,b){b&&b!==G||++g;return d.apply(this,arguments)};var f=[].concat(b.v()||[]);e=null;b.U(function(c){c=[].concat(c||[]);if(b.Ab(J)){var d;if(!e||1<g){e=a.a.Fa(f,c,{sparse:!0})}d=e;d.length&&b.notifySubscribers(d,J)}f=c;e=null;g=0})}}if(!b.sb){var c=!1,e=null,g=0,h=b.U;b.U=b.subscribe=function(a,b,c){c===J&&d();return h.apply(this,arguments)};b.sb=function(b,d,m){function l(a,b,c){return q[q.length]={status:a,value:b,index:c}}if(c&&!g){var q=[],h=b.length,t=m.length,z=0;switch(d){case"push":z=h;case"unshift":for(d=0;d<t;d++){l("added",m[d],z+d)}break;case"pop":z=h-1;case"shift":h&&l("deleted",b[z],z);break;case"splice":d=Math.min(Math.max(0,0>m[0]?h+m[0]:m[0]),h);for(var h=1===t?h:Math.min(d+(m[1]||0),h),t=d+t-2,z=Math.max(h,t),u=[],r=[],E=2;d<z;++d,++E){d<h&&r.push(l("deleted",b[d],d)),d<t&&u.push(l("added",m[E],d))}a.a.wb(r,u);break;default:return}e=q}}}};a.s=a.j=function(b,d,c){function e(){a.a.G(v,function(a,b){b.K()});v={}}function g(){e();C=0;u=!0;n=!1}function h(){var a=f.throttleEvaluation;a&&0<=a?(clearTimeout(P),P=setTimeout(k,a)):f.ib?f.ib():k()}function k(b){if(t){if(E){throw Error("A 'pure' computed must not be called recursively")}}else{if(!u){if(w&&w()){if(!z){s();return}}else{z=!1}t=!0;if(y){try{var c={};a.k.Ea({wa:function(a,b){c[b]||(c[b]=1,++C)},s:f,ma:p});C=0;q=r.call(d)}finally{a.k.end(),t=!1}}else{try{var e=v,m=C;a.k.Ea({wa:function(a,b){u||(m&&e[b]?(v[b]=e[b],++C,delete e[b],--m):v[b]||(v[b]=a.U(h),++C))},s:f,ma:E?p:!C});v={};C=0;try{var l=d?r.call(d):r()}finally{a.k.end(),m&&a.a.G(e,function(a,b){b.K()}),n=!1}f.Pa(q,l)&&(f.notifySubscribers(q,"beforeChange"),q=l,!0!==b&&f.notifySubscribers(q))}finally{t=!1}}C||s()}}}function f(){if(0<arguments.length){if("function"===typeof O){O.apply(d,arguments)}else{throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")}return this}a.k.Jb(f);n&&k(!0);return q}function m(){n&&!C&&k(!0);return q}function l(){return n||0<C}var q,n=!0,t=!1,z=!1,u=!1,r=b,E=!1,y=!1;r&&"object"==typeof r?(c=r,r=c.read):(c=c||{},r||(r=c.read));if("function"!=typeof r){throw Error("Pass a function that returns the value of the ko.computed")}var O=c.write,x=c.disposeWhenNodeIsRemoved||c.o||null,B=c.disposeWhen||c.Ia,w=B,s=g,v={},C=0,P=null;d||(d=c.owner);a.P.call(f);a.a.Aa(f,a.j.fn);f.v=m;f.la=function(){return C};f.hc="function"===typeof c.write;f.K=function(){s()};f.Z=l;var A=f.Ta;f.Ta=function(a){A.call(f,a);f.ib=function(){f.kb(q);n=!0;f.lb(f)}};c.pure?(y=E=!0,f.va=function(){y&&(y=!1,k(!0))},f.nb=function(){f.yb()||(e(),y=n=!0)}):c.deferEvaluation&&(f.va=function(){m();delete f.va});a.A(f,"peek",f.v);a.A(f,"dispose",f.K);a.A(f,"isActive",f.Z);a.A(f,"getDependenciesCount",f.la);x&&(z=!0,x.nodeType&&(w=function(){return !a.a.Ja(x)||B&&B()}));y||c.deferEvaluation||k();x&&l()&&x.nodeType&&(s=function(){a.a.w.Kb(x,s);g()},a.a.w.da(x,s));return f};a.jc=function(b){return a.Ma(b,a.j)};A=a.p.rc;a.j[A]=a.p;a.j.fn={equalityComparer:H};a.j.fn[A]=a.j;a.a.xa&&a.a.za(a.j.fn,a.P.fn);a.b("dependentObservable",a.j);a.b("computed",a.j);a.b("isComputed",a.jc);a.Ib=function(b,d){if("function"===typeof b){return a.s(b,d,{pure:!0})}b=a.a.extend({},b);b.pure=!0;return a.s(b,d)};a.b("pureComputed",a.Ib);(function(){function b(a,g,h){h=h||new c;a=g(a);if("object"!=typeof a||null===a||a===p||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean){return a}var k=a instanceof Array?[]:{};h.save(a,k);d(a,function(c){var d=g(a[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":k[c]=d;break;case"object":case"undefined":var l=h.get(d);k[c]=l!==p?l:b(d,g,h)}});return k}function d(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++){b(c)}"function"==typeof a.toJSON&&b("toJSON")}else{for(c in a){b(c)}}}function c(){this.keys=[];this.hb=[]}a.Qb=function(c){if(0==arguments.length){throw Error("When calling ko.toJS, pass the object you want to convert.")}return b(c,function(b){for(var c=0;a.C(b)&&10>c;c++){b=b()}return b})};a.toJSON=function(b,c,d){b=a.Qb(b);return a.a.eb(b,c,d)};c.prototype={save:function(b,c){var d=a.a.m(this.keys,b);0<=d?this.hb[d]=c:(this.keys.push(b),this.hb.push(c))},get:function(b){b=a.a.m(this.keys,b);return 0<=b?this.hb[b]:p}}})();a.b("toJS",a.Qb);a.b("toJSON",a.toJSON);(function(){a.i={q:function(b){switch(a.a.t(b)){case"option":return !0===b.__ko__hasDomDataOptionValue__?a.a.e.get(b,a.d.options.Va):7>=a.a.L?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?a.i.q(b.options[b.selectedIndex]):p;default:return b.value}},ca:function(b,d,c){switch(a.a.t(b)){case"option":switch(typeof d){case"string":a.a.e.set(b,a.d.options.Va,p);"__ko__hasDomDataOptionValue__" in b&&delete b.__ko__hasDomDataOptionValue__;b.value=d;break;default:a.a.e.set(b,a.d.options.Va,d),b.__ko__hasDomDataOptionValue__=!0,b.value="number"===typeof d?d:""}break;case"select":if(""===d||null===d){d=p}for(var e=-1,g=0,h=b.options.length,k;g<h;++g){if(k=a.i.q(b.options[g]),k==d||""==k&&d===p){e=g;break}}if(c||0<=e||d===p&&1<b.size){b.selectedIndex=e}break;default:if(null===d||d===p){d=""}b.value=d}}}})();a.b("selectExtensions",a.i);a.b("selectExtensions.readValue",a.i.q);a.b("selectExtensions.writeValue",a.i.ca);a.h=function(){function b(b){b=a.a.cb(b);123===b.charCodeAt(0)&&(b=b.slice(1,-1));var c=[],d=b.match(e),k,n,t=0;if(d){d.push(",");for(var z=0,u;u=d[z];++z){var r=u.charCodeAt(0);if(44===r){if(0>=t){k&&c.push(n?{key:k,value:n.join("")}:{unknown:k});k=n=t=0;continue}}else{if(58===r){if(!n){continue}}else{if(47===r&&z&&1<u.length){(r=d[z-1].match(g))&&!h[r[0]]&&(b=b.substr(b.indexOf(u)+1),d=b.match(e),d.push(","),z=-1,u="/")}else{if(40===r||123===r||91===r){++t}else{if(41===r||125===r||93===r){--t}else{if(!k&&!n){k=34===r||39===r?u.slice(1,-1):u;continue}}}}}}n?n.push(u):n=[u]}}return c}var d=["true","false","null","undefined"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,e=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),g=/[\])"'A-Za-z0-9_$]+$/,h={"in":1,"return":1,"typeof":1},k={};return{ha:[],V:k,Wa:b,ya:function(f,m){function e(b,m){var f;if(!z){var u=a.getBindingHandler(b);if(u&&u.preprocess&&!(m=u.preprocess(m,b,e))){return}if(u=k[b]){f=m,0<=a.a.m(d,f)?f=!1:(u=f.match(c),f=null===u?!1:u[1]?"Object("+u[1]+")"+u[2]:f),u=f}u&&h.push("'"+b+"':function(_z){"+f+"=_z}")}t&&(m="function(){return "+m+" }");g.push("'"+b+"':"+m)}m=m||{};var g=[],h=[],t=m.valueAccessors,z=m.bindingParams,u="string"===typeof f?b(f):f;a.a.u(u,function(a){e(a.key||a.unknown,a.value)});h.length&&e("_ko_property_writers","{"+h.join(",")+" }");return g.join(",")},lc:function(a,b){for(var c=0;c<a.length;c++){if(a[c].key==b){return !0}}return !1},pa:function(b,c,d,e,k){if(b&&a.C(b)){!a.Ra(b)||k&&b.v()===e||b(e)}else{if((b=c.get("_ko_property_writers"))&&b[d]){b[d](e)}}}}}();a.b("expressionRewriting",a.h);a.b("expressionRewriting.bindingRewriteValidators",a.h.ha);a.b("expressionRewriting.parseObjectLiteral",a.h.Wa);a.b("expressionRewriting.preProcessBindings",a.h.ya);a.b("expressionRewriting._twoWayBindings",a.h.V);a.b("jsonExpressionRewriting",a.h);a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.h.ya);(function(){function b(a){return 8==a.nodeType&&h.test(g?a.text:a.nodeValue)}function d(a){return 8==a.nodeType&&k.test(g?a.text:a.nodeValue)}function c(a,c){for(var f=a,e=1,k=[];f=f.nextSibling;){if(d(f)&&(e--,0===e)){return k}k.push(f);b(f)&&e++}if(!c){throw Error("Cannot find closing comment tag to match: "+a.nodeValue)}return null}function e(a,b){var d=c(a,b);return d?0<d.length?d[d.length-1].nextSibling:a.nextSibling:null}var g=v&&"\x3c!--test--\x3e"===v.createComment("test").text,h=g?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,k=g?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,f={ul:!0,ol:!0};a.f={Q:{},childNodes:function(a){return b(a)?c(a):a.childNodes},ja:function(c){if(b(c)){c=a.f.childNodes(c);for(var d=0,f=c.length;d<f;d++){a.removeNode(c[d])}}else{a.a.Ka(c)}},T:function(c,d){if(b(c)){a.f.ja(c);for(var f=c.nextSibling,e=0,k=d.length;e<k;e++){f.parentNode.insertBefore(d[e],f)}}else{a.a.T(c,d)}},Hb:function(a,c){b(a)?a.parentNode.insertBefore(c,a.nextSibling):a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)},Bb:function(c,d,f){f?b(c)?c.parentNode.insertBefore(d,f.nextSibling):f.nextSibling?c.insertBefore(d,f.nextSibling):c.appendChild(d):a.f.Hb(c,d)},firstChild:function(a){return b(a)?!a.nextSibling||d(a.nextSibling)?null:a.nextSibling:a.firstChild},nextSibling:function(a){b(a)&&(a=e(a));return a.nextSibling&&d(a.nextSibling)?null:a.nextSibling},gc:b,xc:function(a){return(a=(g?a.text:a.nodeValue).match(h))?a[1]:null},Fb:function(c){if(f[a.a.t(c)]){var k=c.firstChild;if(k){do{if(1===k.nodeType){var g;g=k.firstChild;var h=null;if(g){do{if(h){h.push(g)}else{if(b(g)){var t=e(g,!0);t?g=t:h=[g]}else{d(g)&&(h=[g])}}}while(g=g.nextSibling)}if(g=h){for(h=k.nextSibling,t=0;t<g.length;t++){h?c.insertBefore(g[t],h):c.appendChild(g[t])}}}}while(k=k.nextSibling)}}}}})();a.b("virtualElements",a.f);a.b("virtualElements.allowedBindings",a.f.Q);a.b("virtualElements.emptyNode",a.f.ja);a.b("virtualElements.insertAfter",a.f.Bb);a.b("virtualElements.prepend",a.f.Hb);a.b("virtualElements.setDomNodeChildren",a.f.T);(function(){a.J=function(){this.Yb={}};a.a.extend(a.J.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=b.getAttribute("data-bind")||a.g.getComponentNameForNode(b);case 8:return a.f.gc(b);default:return !1}},getBindings:function(b,d){var c=this.getBindingsString(b,d),c=c?this.parseBindingsString(c,d,b):null;return a.g.mb(c,b,d,!1)},getBindingAccessors:function(b,d){var c=this.getBindingsString(b,d),c=c?this.parseBindingsString(c,d,b,{valueAccessors:!0}):null;return a.g.mb(c,b,d,!0)},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind");case 8:return a.f.xc(b);default:return null}},parseBindingsString:function(b,d,c,e){try{var g=this.Yb,h=b+(e&&e.valueAccessors||""),k;if(!(k=g[h])){var f,m="with($context){with($data||{}){return{"+a.h.ya(b,e)+"}}}";f=new Function("$context","$element",m);k=g[h]=f}return k(d,c)}catch(l){throw l.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+l.message,l}}});a.J.instance=new a.J})();a.b("bindingProvider",a.J);(function(){function b(a){return function(){return a}}function d(a){return a()}function c(b){return a.a.na(a.k.B(b),function(a,c){return function(){return b()[c]}})}function e(a,b){return c(this.getBindings.bind(this,a,b))}function g(b,c,d){var f,e=a.f.firstChild(c),k=a.J.instance,g=k.preprocessNode;if(g){for(;f=e;){e=a.f.nextSibling(f),g.call(k,f)}e=a.f.firstChild(c)}for(;f=e;){e=a.f.nextSibling(f),h(b,f,d)}}function h(b,c,d){var e=!0,k=1===c.nodeType;k&&a.f.Fb(c);if(k&&d||a.J.instance.nodeHasBindings(c)){e=f(c,null,b,d).shouldBindDescendants}e&&!l[a.a.t(c)]&&g(b,c,!k)}function k(b){var c=[],d={},f=[];a.a.G(b,function y(e){if(!d[e]){var k=a.getBindingHandler(e);k&&(k.after&&(f.push(e),a.a.u(k.after,function(c){if(b[c]){if(-1!==a.a.m(f,c)){throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+f.join(", "))}y(c)}}),f.length--),c.push({key:e,zb:k}));d[e]=!0}});return c}function f(b,c,f,g){var m=a.a.e.get(b,q);if(!c){if(m){throw Error("You cannot apply bindings multiple times to the same element.")}a.a.e.set(b,q,!0)}!m&&g&&a.Ob(b,f);var l;if(c&&"function"!==typeof c){l=c}else{var h=a.J.instance,n=h.getBindingAccessors||e,s=a.j(function(){(l=c?c(f,b):n.call(h,b,f))&&f.I&&f.I();return l},null,{o:b});l&&s.Z()||(s=null)}var v;if(l){var w=s?function(a){return function(){return d(s()[a])}}:function(a){return l[a]},A=function(){return a.a.na(s?s():l,d)};A.get=function(a){return l[a]&&d(w(a))};A.has=function(a){return a in l};g=k(l);a.a.u(g,function(c){var d=c.zb.init,e=c.zb.update,k=c.key;if(8===b.nodeType&&!a.f.Q[k]){throw Error("The binding '"+k+"' cannot be used with virtual elements")}try{"function"==typeof d&&a.k.B(function(){var a=d(b,w(k),A,f.$data,f);if(a&&a.controlsDescendantBindings){if(v!==p){throw Error("Multiple bindings ("+v+" and "+k+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")}v=k}}),"function"==typeof e&&a.j(function(){e(b,w(k),A,f.$data,f)},null,{o:b})}catch(g){throw g.message='Unable to process binding "'+k+": "+l[k]+'"\nMessage: '+g.message,g}})}return{shouldBindDescendants:v===p}}function m(b){return b&&b instanceof a.N?b:new a.N(b)}a.d={};var l={script:!0};a.getBindingHandler=function(b){return a.d[b]};a.N=function(b,c,d,f){var e=this,k="function"==typeof b&&!a.C(b),g,m=a.j(function(){var g=k?b():b,l=a.a.c(g);c?(c.I&&c.I(),a.a.extend(e,c),m&&(e.I=m)):(e.$parents=[],e.$root=l,e.ko=a);e.$rawData=g;e.$data=l;d&&(e[d]=l);f&&f(e,c,l);return e.$data},null,{Ia:function(){return g&&!a.a.ob(g)},o:!0});m.Z()&&(e.I=m,m.equalityComparer=null,g=[],m.Tb=function(b){g.push(b);a.a.w.da(b,function(b){a.a.ua(g,b);g.length||(m.K(),e.I=m=p)})})};a.N.prototype.createChildContext=function(b,c,d){return new a.N(b,this,c,function(a,b){a.$parentContext=b;a.$parent=b.$data;a.$parents=(b.$parents||[]).slice(0);a.$parents.unshift(a.$parent);d&&d(a)})};a.N.prototype.extend=function(b){return new a.N(this.I||this.$data,this,null,function(c,d){c.$rawData=d.$rawData;a.a.extend(c,"function"==typeof b?b():b)})};var q=a.a.e.F(),n=a.a.e.F();a.Ob=function(b,c){if(2==arguments.length){a.a.e.set(b,n,c),c.I&&c.I.Tb(b)}else{return a.a.e.get(b,n)}};a.ra=function(b,c,d){1===b.nodeType&&a.f.Fb(b);return f(b,c,m(d),!0)};a.Wb=function(d,f,e){e=m(e);return a.ra(d,"function"===typeof f?c(f.bind(null,e,d)):a.a.na(f,b),e)};a.Ca=function(a,b){1!==b.nodeType&&8!==b.nodeType||g(m(a),b,!0)};a.pb=function(a,b){!w&&s.jQuery&&(w=s.jQuery);if(b&&1!==b.nodeType&&8!==b.nodeType){throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node")}b=b||s.document.body;h(m(a),b,!0)};a.Ha=function(b){switch(b.nodeType){case 1:case 8:var c=a.Ob(b);if(c){return c}if(b.parentNode){return a.Ha(b.parentNode)}}return p};a.$b=function(b){return(b=a.Ha(b))?b.$data:p};a.b("bindingHandlers",a.d);a.b("applyBindings",a.pb);a.b("applyBindingsToDescendants",a.Ca);a.b("applyBindingAccessorsToNode",a.ra);a.b("applyBindingsToNode",a.Wb);a.b("contextFor",a.Ha);a.b("dataFor",a.$b)})();(function(b){function d(d,f){var e=g.hasOwnProperty(d)?g[d]:b,l;e||(e=g[d]=new a.P,c(d,function(a){h[d]=a;delete g[d];l?e.notifySubscribers(a):setTimeout(function(){e.notifySubscribers(a)},0)}),l=!0);e.U(f)}function c(a,b){e("getConfig",[a],function(c){c?e("loadComponent",[a,c],function(a){b(a)}):b(null)})}function e(c,d,g,l){l||(l=a.g.loaders.slice(0));var h=l.shift();if(h){var n=h[c];if(n){var t=!1;if(n.apply(h,d.concat(function(a){t?g(null):null!==a?g(a):e(c,d,g,l)}))!==b&&(t=!0,!h.suppressLoaderExceptions)){throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}}else{e(c,d,g,l)}}else{g(null)}}var g={},h={};a.g={get:function(a,c){var e=h.hasOwnProperty(a)?h[a]:b;e?setTimeout(function(){c(e)},0):d(a,c)},tb:function(a){delete h[a]},jb:e};a.g.loaders=[];a.b("components",a.g);a.b("components.get",a.g.get);a.b("components.clearCachedDefinition",a.g.tb)})();(function(){function b(b,c,d,e){function k(){0===--u&&e(h)}var h={},u=2,r=d.template;d=d.viewModel;r?g(c,r,function(c){a.g.jb("loadTemplate",[b,c],function(a){h.template=a;k()})}):k();d?g(c,d,function(c){a.g.jb("loadViewModel",[b,c],function(a){h[f]=a;k()})}):k()}function d(a,b,c){if("function"===typeof b){c(function(a){return new b(a)})}else{if("function"===typeof b[f]){c(b[f])}else{if("instance" in b){var e=b.instance;c(function(){return e})}else{"viewModel" in b?d(a,b.viewModel,c):a("Unknown viewModel value: "+b)}}}}function c(b){switch(a.a.t(b)){case"script":return a.a.ba(b.text);case"textarea":return a.a.ba(b.value);case"template":if(e(b.content)){return a.a.ia(b.content.childNodes)}}return a.a.ia(b.childNodes)}function e(a){return s.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType}function g(a,b,c){"string"===typeof b.require?N||s.require?(N||s.require)([b.require],c):a("Uses require, but no AMD loader is present"):c(b)}function h(a){return function(b){throw Error("Component '"+a+"': "+b)}}var k={};a.g.tc=function(b,c){if(!c){throw Error("Invalid configuration for "+b)}if(a.g.Qa(b)){throw Error("Component "+b+" is already registered")}k[b]=c};a.g.Qa=function(a){return a in k};a.g.wc=function(b){delete k[b];a.g.tb(b)};a.g.ub={getConfig:function(a,b){b(k.hasOwnProperty(a)?k[a]:null)},loadComponent:function(a,c,d){var e=h(a);g(e,c,function(c){b(a,e,c,d)})},loadTemplate:function(b,d,f){b=h(b);if("string"===typeof d){f(a.a.ba(d))}else{if(d instanceof Array){f(d)}else{if(e(d)){f(a.a.S(d.childNodes))}else{if(d.element){if(d=d.element,s.HTMLElement?d instanceof HTMLElement:d&&d.tagName&&1===d.nodeType){f(c(d))}else{if("string"===typeof d){var k=v.getElementById(d);k?f(c(k)):b("Cannot find element with ID "+d)}else{b("Unknown element type: "+d)}}}else{b("Unknown template value: "+d)}}}}},loadViewModel:function(a,b,c){d(h(a),b,c)}};var f="createViewModel";a.b("components.register",a.g.tc);a.b("components.isRegistered",a.g.Qa);a.b("components.unregister",a.g.wc);a.b("components.defaultLoader",a.g.ub);a.g.loaders.push(a.g.ub);a.g.Ub=k})();(function(){function b(b,e){var g=b.getAttribute("params");if(g){var g=d.parseBindingsString(g,e,b,{valueAccessors:!0,bindingParams:!0}),g=a.a.na(g,function(d){return a.s(d,null,{o:b})}),h=a.a.na(g,function(d){return d.Z()?a.s(function(){return a.a.c(d())},null,{o:b}):d.v()});h.hasOwnProperty("$raw")||(h.$raw=g);return h}return{$raw:{}}}a.g.getComponentNameForNode=function(b){b=a.a.t(b);return a.g.Qa(b)&&b};a.g.mb=function(c,d,g,h){if(1===d.nodeType){var k=a.g.getComponentNameForNode(d);if(k){c=c||{};if(c.component){throw Error('Cannot use the "component" binding on a custom element matching a component')}var f={name:k,params:b(d,g)};c.component=h?function(){return f}:f}}return c};var d=new a.J;9>a.a.L&&(a.g.register=function(a){return function(b){v.createElement(b);return a.apply(this,arguments)}}(a.g.register),v.createDocumentFragment=function(b){return function(){var d=b(),g=a.g.Ub,h;for(h in g){g.hasOwnProperty(h)&&d.createElement(h)}return d}}(v.createDocumentFragment))})();(function(){var b=0;a.d.component={init:function(d,c,e,g,h){function k(){var a=f&&f.dispose;"function"===typeof a&&a.call(f);m=null}var f,m;a.a.w.da(d,k);a.s(function(){var e=a.a.c(c()),g,n;"string"===typeof e?g=e:(g=a.a.c(e.name),n=a.a.c(e.params));if(!g){throw Error("No component name specified")}var t=m=++b;a.g.get(g,function(b){if(m===t){k();if(!b){throw Error("Unknown component '"+g+"'")}var c=b.template;if(!c){throw Error("Component '"+g+"' has no template")}c=a.a.ia(c);a.f.T(d,c);var c=n,e=b.createViewModel;b=e?e.call(b,c,{element:d}):c;c=h.createChildContext(b);f=b;a.Ca(c,d)}})},null,{o:d});return{controlsDescendantBindings:!0}}};a.f.Q.component=!0})();var Q={"class":"className","for":"htmlFor"};a.d.attr={update:function(b,d){var c=a.a.c(d())||{};a.a.G(c,function(c,d){d=a.a.c(d);var h=!1===d||null===d||d===p;h&&b.removeAttribute(c);8>=a.a.L&&c in Q?(c=Q[c],h?b.removeAttribute(c):b[c]=d):h||b.setAttribute(c,d.toString());"name"===c&&a.a.Mb(b,h?"":d.toString())})}};(function(){a.d.checked={after:["value","attr"],init:function(b,d,c){function e(){var e=b.checked,k=q?h():e;if(!a.Y.ma()&&(!f||e)){var g=a.k.B(d);m?l!==k?(e&&(a.a.ea(g,k,!0),a.a.ea(g,l,!1)),l=k):a.a.ea(g,k,e):a.h.pa(g,c,"checked",k,!0)}}function g(){var c=a.a.c(d());b.checked=m?0<=a.a.m(c,h()):k?c:h()===c}var h=a.Ib(function(){return c.has("checkedValue")?a.a.c(c.get("checkedValue")):c.has("value")?a.a.c(c.get("value")):b.value}),k="checkbox"==b.type,f="radio"==b.type;if(k||f){var m=k&&a.a.c(d()) instanceof Array,l=m?h():p,q=f||m;f&&!b.name&&a.d.uniqueName.init(b,function(){return !0});a.s(e,null,{o:b});a.a.n(b,"click",e);a.s(g,null,{o:b})}}};a.h.V.checked=!0;a.d.checkedValue={update:function(b,d){b.value=a.a.c(d())}}})();a.d.css={update:function(b,d){var c=a.a.c(d());"object"==typeof c?a.a.G(c,function(c,d){d=a.a.c(d);a.a.Ba(b,c,d)}):(c=String(c||""),a.a.Ba(b,b.__ko__cssValue,!1),b.__ko__cssValue=c,a.a.Ba(b,c,!0))}};a.d.enable={update:function(b,d){var c=a.a.c(d());c&&b.disabled?b.removeAttribute("disabled"):c||b.disabled||(b.disabled=!0)}};a.d.disable={update:function(b,d){a.d.enable.update(b,function(){return !a.a.c(d())})}};a.d.event={init:function(b,d,c,e,g){var h=d()||{};a.a.G(h,function(k){"string"==typeof k&&a.a.n(b,k,function(b){var h,l=d()[k];if(l){try{var q=a.a.S(arguments);e=g.$data;q.unshift(e);h=l.apply(e,q)}finally{!0!==h&&(b.preventDefault?b.preventDefault():b.returnValue=!1)}!1===c.get(k+"Bubble")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}};a.d.foreach={Eb:function(b){return function(){var d=b(),c=a.a.Xa(d);if(!c||"number"==typeof c.length){return{foreach:d,templateEngine:a.O.Oa}}a.a.c(d);return{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:a.O.Oa}}},init:function(b,d){return a.d.template.init(b,a.d.foreach.Eb(d))},update:function(b,d,c,e,g){return a.d.template.update(b,a.d.foreach.Eb(d),c,e,g)}};a.h.ha.foreach=!1;a.f.Q.foreach=!0;a.d.hasfocus={init:function(b,d,c){function e(e){b.__ko_hasfocusUpdating=!0;var f=b.ownerDocument;if("activeElement" in f){var g;try{g=f.activeElement}catch(h){g=f.body}e=g===b}f=d();a.h.pa(f,c,"hasfocus",e,!0);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=!1}var g=e.bind(null,!0),h=e.bind(null,!1);a.a.n(b,"focus",g);a.a.n(b,"focusin",g);a.a.n(b,"blur",h);a.a.n(b,"focusout",h)},update:function(b,d){var c=!!a.a.c(d());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===c||(c?b.focus():b.blur(),a.k.B(a.a.oa,null,[b,c?"focusin":"focusout"]))}};a.h.V.hasfocus=!0;a.d.hasFocus=a.d.hasfocus;a.h.V.hasFocus=!0;a.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,d){a.a.$a(b,d())}};I("if");I("ifnot",!1,!0);I("with",!0,!1,function(a,d){return a.createChildContext(d)});var K={};a.d.options={init:function(b){if("select"!==a.a.t(b)){throw Error("options binding applies only to SELECT elements")}for(;0<b.length;){b.remove(0)}return{controlsDescendantBindings:!0}},update:function(b,d,c){function e(){return a.a.ta(b.options,function(a){return a.selected})}function g(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function h(c,d){if(q.length){var e=0<=a.a.m(q,a.i.q(d[0]));a.a.Nb(d[0],e);n&&!e&&a.k.B(a.a.oa,null,[b,"change"])}}var k=0!=b.length&&b.multiple?b.scrollTop:null,f=a.a.c(d()),m=c.get("optionsIncludeDestroyed");d={};var l,q;q=b.multiple?a.a.Da(e(),a.i.q):0<=b.selectedIndex?[a.i.q(b.options[b.selectedIndex])]:[];f&&("undefined"==typeof f.length&&(f=[f]),l=a.a.ta(f,function(b){return m||b===p||null===b||!a.a.c(b._destroy)}),c.has("optionsCaption")&&(f=a.a.c(c.get("optionsCaption")),null!==f&&f!==p&&l.unshift(K)));var n=!1;d.beforeRemove=function(a){b.removeChild(a)};f=h;c.has("optionsAfterRender")&&(f=function(b,d){h(0,d);a.k.B(c.get("optionsAfterRender"),null,[d[0],b!==K?b:p])});a.a.Za(b,l,function(d,e,f){f.length&&(q=f[0].selected?[a.i.q(f[0])]:[],n=!0);e=b.ownerDocument.createElement("option");d===K?(a.a.bb(e,c.get("optionsCaption")),a.i.ca(e,p)):(f=g(d,c.get("optionsValue"),d),a.i.ca(e,a.a.c(f)),d=g(d,c.get("optionsText"),f),a.a.bb(e,d));return[e]},d,f);a.k.B(function(){c.get("valueAllowUnset")&&c.has("value")?a.i.ca(b,a.a.c(c.get("value")),!0):(b.multiple?q.length&&e().length<q.length:q.length&&0<=b.selectedIndex?a.i.q(b.options[b.selectedIndex])!==q[0]:q.length||0<=b.selectedIndex)&&a.a.oa(b,"change")});a.a.dc(b);k&&20<Math.abs(k-b.scrollTop)&&(b.scrollTop=k)}};a.d.options.Va=a.a.e.F();a.d.selectedOptions={after:["options","foreach"],init:function(b,d,c){a.a.n(b,"change",function(){var e=d(),g=[];a.a.u(b.getElementsByTagName("option"),function(b){b.selected&&g.push(a.i.q(b))});a.h.pa(e,c,"selectedOptions",g)})},update:function(b,d){if("select"!=a.a.t(b)){throw Error("values binding applies only to SELECT elements")}var c=a.a.c(d());c&&"number"==typeof c.length&&a.a.u(b.getElementsByTagName("option"),function(b){var d=0<=a.a.m(c,a.i.q(b));a.a.Nb(b,d)})}};a.h.V.selectedOptions=!0;a.d.style={update:function(b,d){var c=a.a.c(d()||{});a.a.G(c,function(c,d){d=a.a.c(d);if(null===d||d===p||!1===d){d=""}b.style[c]=d})}};a.d.submit={init:function(b,d,c,e,g){if("function"!=typeof d()){throw Error("The value for a submit binding must be a function")}a.a.n(b,"submit",function(a){var c,e=d();try{c=e.call(g.$data,b)}finally{!0!==c&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}})}};a.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,d){a.a.bb(b,d())}};a.f.Q.text=!0;(function(){if(s&&s.navigator){var b=function(a){if(a){return parseFloat(a[1])}},d=s.opera&&s.opera.version&&parseInt(s.opera.version()),c=s.navigator.userAgent,e=b(c.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),g=b(c.match(/Firefox\/([^ ]*)/))}if(10>a.a.L){var h=a.a.e.F(),k=a.a.e.F(),f=function(b){var c=this.activeElement;(c=c&&a.a.e.get(c,k))&&c(b)},m=function(b,c){var d=b.ownerDocument;a.a.e.get(d,h)||(a.a.e.set(d,h,!0),a.a.n(d,"selectionchange",f));a.a.e.set(b,k,c)}}a.d.textInput={init:function(b,c,f){function k(c,d){a.a.n(b,c,d)}function h(){var d=a.a.c(c());if(null===d||d===p){d=""}v!==p&&d===v?setTimeout(h,4):b.value!==d&&(s=d,b.value=d)}function u(){y||(v=b.value,y=setTimeout(r,4))}function r(){clearTimeout(y);v=y=p;var d=b.value;s!==d&&(s=d,a.h.pa(c(),f,"textInput",d))}var s=b.value,y,v;10>a.a.L?(k("propertychange",function(a){"value"===a.propertyName&&r()}),8==a.a.L&&(k("keyup",r),k("keydown",r)),8<=a.a.L&&(m(b,r),k("dragend",u))):(k("input",r),5>e&&"textarea"===a.a.t(b)?(k("keydown",u),k("paste",u),k("cut",u)):11>d?k("keydown",u):4>g&&(k("DOMAutoComplete",r),k("dragdrop",r),k("drop",r)));k("change",r);a.s(h,null,{o:b})}};a.h.V.textInput=!0;a.d.textinput={preprocess:function(a,b,c){c("textInput",a)}}})();a.d.uniqueName={init:function(b,d){if(d()){var c="ko_unique_"+ ++a.d.uniqueName.Zb;a.a.Mb(b,c)}}};a.d.uniqueName.Zb=0;a.d.value={after:["options","foreach"],init:function(b,d,c){if("input"!=b.tagName.toLowerCase()||"checkbox"!=b.type&&"radio"!=b.type){var e=["change"],g=c.get("valueUpdate"),h=!1,k=null;g&&("string"==typeof g&&(g=[g]),a.a.ga(e,g),e=a.a.rb(e));var f=function(){k=null;h=!1;var e=d(),f=a.i.q(b);a.h.pa(e,c,"value",f)};!a.a.L||"input"!=b.tagName.toLowerCase()||"text"!=b.type||"off"==b.autocomplete||b.form&&"off"==b.form.autocomplete||-1!=a.a.m(e,"propertychange")||(a.a.n(b,"propertychange",function(){h=!0}),a.a.n(b,"focus",function(){h=!1}),a.a.n(b,"blur",function(){h&&f()}));a.a.u(e,function(c){var d=f;a.a.vc(c,"after")&&(d=function(){k=a.i.q(b);setTimeout(f,0)},c=c.substring(5));a.a.n(b,c,d)});var m=function(){var e=a.a.c(d()),f=a.i.q(b);if(null!==k&&e===k){setTimeout(m,0)}else{if(e!==f){if("select"===a.a.t(b)){var g=c.get("valueAllowUnset"),f=function(){a.i.ca(b,e,g)};f();g||e===a.i.q(b)?setTimeout(f,0):a.k.B(a.a.oa,null,[b,"change"])}else{a.i.ca(b,e)}}}};a.s(m,null,{o:b})}else{a.ra(b,{checkedValue:d})}},update:function(){}};a.h.V.value=!0;a.d.visible={update:function(b,d){var c=a.a.c(d()),e="none"!=b.style.display;c&&!e?b.style.display="":!c&&e&&(b.style.display="none")}};(function(b){a.d[b]={init:function(d,c,e,g,h){return a.d.event.init.call(this,d,function(){var a={};a[b]=c();return a},e,g,h)}}})("click");a.H=function(){};a.H.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")};a.H.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")};a.H.prototype.makeTemplateSource=function(b,d){if("string"==typeof b){d=d||v;var c=d.getElementById(b);if(!c){throw Error("Cannot find template with ID "+b)}return new a.r.l(c)}if(1==b.nodeType||8==b.nodeType){return new a.r.fa(b)}throw Error("Unknown template type: "+b)};a.H.prototype.renderTemplate=function(a,d,c,e){a=this.makeTemplateSource(a,e);return this.renderTemplateSource(a,d,c)};a.H.prototype.isTemplateRewritten=function(a,d){return !1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,d).data("isRewritten")};a.H.prototype.rewriteTemplate=function(a,d,c){a=this.makeTemplateSource(a,c);d=d(a.text());a.text(d);a.data("isRewritten",!0)};a.b("templateEngine",a.H);a.fb=function(){function b(b,c,d,k){b=a.h.Wa(b);for(var f=a.h.ha,m=0;m<b.length;m++){var l=b[m].key;if(f.hasOwnProperty(l)){var q=f[l];if("function"===typeof q){if(l=q(b[m].value)){throw Error(l)}}else{if(!q){throw Error("This template engine does not support the '"+l+"' binding within its templates")}}}}d="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a.h.ya(b,{valueAccessors:!0})+" } })()},'"+d.toLowerCase()+"')";return k.createJavaScriptEvaluatorBlock(d)+c}var d=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{ec:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.fb.nc(b,c)},d)},nc:function(a,g){return a.replace(d,function(a,c,d,e,l){return b(l,c,d,g)}).replace(c,function(a,c){return b(c,"\x3c!-- ko --\x3e","#comment",g)})},Xb:function(b,c){return a.D.Ua(function(d,k){var f=d.nextSibling;f&&f.nodeName.toLowerCase()===c&&a.ra(f,b,k)})}}}();a.b("__tr_ambtns",a.fb.Xb);(function(){a.r={};a.r.l=function(a){this.l=a};a.r.l.prototype.text=function(){var b=a.a.t(this.l),b="script"===b?"text":"textarea"===b?"value":"innerHTML";if(0==arguments.length){return this.l[b]}var d=arguments[0];"innerHTML"===b?a.a.$a(this.l,d):this.l[b]=d};var b=a.a.e.F()+"_";a.r.l.prototype.data=function(c){if(1===arguments.length){return a.a.e.get(this.l,b+c)}a.a.e.set(this.l,b+c,arguments[1])};var d=a.a.e.F();a.r.fa=function(a){this.l=a};a.r.fa.prototype=new a.r.l;a.r.fa.prototype.text=function(){if(0==arguments.length){var b=a.a.e.get(this.l,d)||{};b.gb===p&&b.Ga&&(b.gb=b.Ga.innerHTML);return b.gb}a.a.e.set(this.l,d,{gb:arguments[0]})};a.r.l.prototype.nodes=function(){if(0==arguments.length){return(a.a.e.get(this.l,d)||{}).Ga}a.a.e.set(this.l,d,{Ga:arguments[0]})};a.b("templateSources",a.r);a.b("templateSources.domElement",a.r.l);a.b("templateSources.anonymousTemplate",a.r.fa)})();(function(){function b(b,c,d){var e;for(c=a.f.nextSibling(c);b&&(e=b)!==c;){b=a.f.nextSibling(e),d(e,b)}}function d(c,d){if(c.length){var e=c[0],g=c[c.length-1],h=e.parentNode,n=a.J.instance,t=n.preprocessNode;if(t){b(e,g,function(a,b){var c=a.previousSibling,d=t.call(n,a);d&&(a===e&&(e=d[0]||b),a===g&&(g=d[d.length-1]||c))});c.length=0;if(!e){return}e===g?c.push(e):(c.push(e,g),a.a.ka(c,h))}b(e,g,function(b){1!==b.nodeType&&8!==b.nodeType||a.pb(d,b)});b(e,g,function(b){1!==b.nodeType&&8!==b.nodeType||a.D.Sb(b,[d])});a.a.ka(c,h)}}function c(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,e,h,l,q){q=q||{};var n=b&&c(b),n=n&&n.ownerDocument,t=q.templateEngine||g;a.fb.ec(h,t,n);h=t.renderTemplate(h,l,q,n);if("number"!=typeof h.length||0<h.length&&"number"!=typeof h[0].nodeType){throw Error("Template engine must return an array of DOM nodes")}n=!1;switch(e){case"replaceChildren":a.f.T(b,h);n=!0;break;case"replaceNode":a.a.Lb(b,h);n=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}n&&(d(h,l),q.afterRender&&a.k.B(q.afterRender,null,[h,l.$data]));return h}var g;a.ab=function(b){if(b!=p&&!(b instanceof a.H)){throw Error("templateEngine must inherit from ko.templateEngine")}g=b};a.Ya=function(b,d,h,l,q){h=h||{};if((h.templateEngine||g)==p){throw Error("Set a template engine before calling renderTemplate")}q=q||"replaceChildren";if(l){var n=c(l);return a.j(function(){var g=d&&d instanceof a.N?d:new a.N(a.a.c(d)),p=a.C(b)?b():"function"===typeof b?b(g.$data,g):b,g=e(l,q,p,g,h);"replaceNode"==q&&(l=g,n=c(l))},null,{Ia:function(){return !n||!a.a.Ja(n)},o:n&&"replaceNode"==q?n.parentNode:n})}return a.D.Ua(function(c){a.Ya(b,d,h,c,"replaceNode")})};a.uc=function(b,c,g,h,q){function n(a,b){d(b,s);g.afterRender&&g.afterRender(b,a)}function t(c,d){s=q.createChildContext(c,g.as,function(a){a.$index=d});var f=a.C(b)?b():"function"===typeof b?b(c,s):b;return e(null,"ignoreTargetNode",f,s,g)}var s;return a.j(function(){var b=a.a.c(c)||[];"undefined"==typeof b.length&&(b=[b]);b=a.a.ta(b,function(b){return g.includeDestroyed||b===p||null===b||!a.a.c(b._destroy)});a.k.B(a.a.Za,null,[h,b,t,g,n])},null,{o:h})};var h=a.a.e.F();a.d.template={init:function(b,c){var d=a.a.c(c());"string"==typeof d||d.name?a.f.ja(b):(d=a.f.childNodes(b),d=a.a.oc(d),(new a.r.fa(b)).nodes(d));return{controlsDescendantBindings:!0}},update:function(b,c,d,e,g){var n=c(),t;c=a.a.c(n);d=!0;e=null;"string"==typeof c?c={}:(n=c.name,"if" in c&&(d=a.a.c(c["if"])),d&&"ifnot" in c&&(d=!a.a.c(c.ifnot)),t=a.a.c(c.data));"foreach" in c?e=a.uc(n||b,d&&c.foreach||[],c,b,g):d?(g="data" in c?g.createChildContext(t,c.as):g,e=a.Ya(n||b,g,c,b)):a.f.ja(b);g=e;(t=a.a.e.get(b,h))&&"function"==typeof t.K&&t.K();a.a.e.set(b,h,g&&g.Z()?g:p)}};a.h.ha.template=function(b){b=a.h.Wa(b);return 1==b.length&&b[0].unknown||a.h.lc(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"};a.f.Q.template=!0})();a.b("setTemplateEngine",a.ab);a.b("renderTemplate",a.Ya);a.a.wb=function(a,d,c){if(a.length&&d.length){var e,g,h,k,f;for(e=g=0;(!c||e<c)&&(k=a[g]);++g){for(h=0;f=d[h];++h){if(k.value===f.value){k.moved=f.index;f.moved=k.index;d.splice(h,1);e=h=0;break}}e+=h}}};a.a.Fa=function(){function b(b,c,e,g,h){var k=Math.min,f=Math.max,m=[],l,q=b.length,n,p=c.length,s=p-q||1,u=q+p+1,r,v,w;for(l=0;l<=q;l++){for(v=r,m.push(r=[]),w=k(p,l+s),n=f(0,l-1);n<=w;n++){r[n]=n?l?b[l-1]===c[n-1]?v[n-1]:k(v[n]||u,r[n-1]||u)+1:n+1:l+1}}k=[];f=[];s=[];l=q;for(n=p;l||n;){p=m[l][n]-1,n&&p===m[l][n-1]?f.push(k[k.length]={status:e,value:c[--n],index:n}):l&&p===m[l-1][n]?s.push(k[k.length]={status:g,value:b[--l],index:l}):(--n,--l,h.sparse||k.push({status:"retained",value:c[n]}))}a.a.wb(f,s,10*q);return k.reverse()}return function(a,c,e){e="boolean"===typeof e?{dontLimitMoves:e}:e||{};a=a||[];c=c||[];return a.length<=c.length?b(a,c,"added","deleted",e):b(c,a,"deleted","added",e)}}();a.b("utils.compareArrays",a.a.Fa);(function(){function b(b,d,g,h,k){var f=[],m=a.j(function(){var l=d(g,k,a.a.ka(f,b))||[];0<f.length&&(a.a.Lb(f,l),h&&a.k.B(h,null,[g,l,k]));f.length=0;a.a.ga(f,l)},null,{o:b,Ia:function(){return !a.a.ob(f)}});return{$:f,j:m.Z()?m:p}}var d=a.a.e.F();a.a.Za=function(c,e,g,h,k){function f(b,d){x=q[d];r!==d&&(A[b]=x);x.Na(r++);a.a.ka(x.$,c);s.push(x);w.push(x)}function m(b,c){if(b){for(var d=0,e=c.length;d<e;d++){c[d]&&a.a.u(c[d].$,function(a){b(a,d,c[d].sa)})}}}e=e||[];h=h||{};var l=a.a.e.get(c,d)===p,q=a.a.e.get(c,d)||[],n=a.a.Da(q,function(a){return a.sa}),t=a.a.Fa(n,e,h.dontLimitMoves),s=[],u=0,r=0,v=[],w=[];e=[];for(var A=[],n=[],x,B=0,D,F;D=t[B];B++){switch(F=D.moved,D.status){case"deleted":F===p&&(x=q[u],x.j&&x.j.K(),v.push.apply(v,a.a.ka(x.$,c)),h.beforeRemove&&(e[B]=x,w.push(x)));u++;break;case"retained":f(B,u++);break;case"added":F!==p?f(B,F):(x={sa:D.value,Na:a.p(r++)},s.push(x),w.push(x),l||(n[B]=x))}}m(h.beforeMove,A);a.a.u(v,h.beforeRemove?a.R:a.removeNode);for(var B=0,l=a.f.firstChild(c),G;x=w[B];B++){x.$||a.a.extend(x,b(c,g,x.sa,k,x.Na));for(u=0;t=x.$[u];l=t.nextSibling,G=t,u++){t!==l&&a.f.Bb(c,t,G)}!x.ic&&k&&(k(x.sa,x.$,x.Na),x.ic=!0)}m(h.beforeRemove,e);m(h.afterMove,A);m(h.afterAdd,n);a.a.e.set(c,d,s)}})();a.b("utils.setDomNodeChildrenFromArrayMapping",a.a.Za);a.O=function(){this.allowTemplateRewriting=!1};a.O.prototype=new a.H;a.O.prototype.renderTemplateSource=function(b){var d=(9>a.a.L?0:b.nodes)?b.nodes():null;if(d){return a.a.S(d.cloneNode(!0).childNodes)}b=b.text();return a.a.ba(b)};a.O.Oa=new a.O;a.ab(a.O.Oa);a.b("nativeTemplateEngine",a.O);(function(){a.Sa=function(){var a=this.kc=function(){if(!w||!w.tmpl){return 0}try{if(0<=w.tmpl.tag.tmpl.open.toString().indexOf("__")){return 2}}catch(a){}return 1}();this.renderTemplateSource=function(b,e,g){g=g||{};if(2>a){throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}var h=b.data("precompiled");h||(h=b.text()||"",h=w.template(null,"{{ko_with $item.koBindingContext}}"+h+"{{/ko_with}}"),b.data("precompiled",h));b=[e.$data];e=w.extend({koBindingContext:e},g.templateOptions);e=w.tmpl(h,b,e);e.appendTo(v.createElement("div"));w.fragments={};return e};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(a,b){v.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(w.tmpl.tag.ko_code={open:"__.push($1 || '');"},w.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};a.Sa.prototype=new a.H;var b=new a.Sa;0<b.kc&&a.ab(b);a.b("jqueryTmplTemplateEngine",a.Sa)})()})})()})();!function(b){"undefined"==typeof b.fn.each2&&b.extend(b.fn,{each2:function(a){for(var h=b([0]),g=-1,f=this.length;++g<f&&(h.context=h[0]=this[g])&&a.call(h[0],g,h)!==!1;){}return this}})}(jQuery),function(aE,aD){function aq(a){var d=aE(document.createTextNode(""));a.before(d),d.before(a),d.remove()}function ap(d){function c(b){return ar[b]||b}return d.replace(/[^\u0000-\u007E]/g,c)}function ao(f,e){for(var h=0,g=e.length;g>h;h+=1){if(am(f,e[h])){return h}}return -1}function an(){var a=aE(at);a.appendTo(document.body);var d={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight};return a.remove(),d}function am(b,d){return b===d?!0:b===aD||d===aD?!1:null===b||null===d?!1:b.constructor===String?b+""==d+"":d.constructor===String?d+""==b+"":!1}function al(h,g,l){var k,j,i;if(null===h||h.length<1){return[]}for(k=h.split(g),j=0,i=k.length;i>j;j+=1){k[j]=l(k[j])}return k}function ak(b){return b.outerWidth(!1)-b.width()}function aj(b){var a="keyup-change-value";b.on("keydown",function(){aE.data(b,a)===aD&&aE.data(b,a,b.val())}),b.on("keyup",function(){var c=aE.data(b,a);c!==aD&&b.val()!==c&&(aE.removeData(b,a),b.trigger("keyup-change"))})}function ai(a){a.on("mousemove",function(e){var b=ax;(b===aD||b.x!==e.pageX||b.y!==e.pageY)&&aE(e.target).trigger("mousemove-filtered",e)})}function ah(b,h,g){g=g||aD;var f;return function(){var a=arguments;window.clearTimeout(f),f=window.setTimeout(function(){h.apply(g,a)},b)}}function ag(e,d){var f=ah(e,function(b){d.trigger("scroll-debounced",b)});d.on("scroll",function(b){ao(b.target,d.get())>=0&&f(b)})}function af(b){b[0]!==document.activeElement&&window.setTimeout(function(){var g,a=b[0],h=b.val().length;b.focus();var f=a.offsetWidth>0||a.offsetHeight>0;f&&a===document.activeElement&&(a.setSelectionRange?a.setSelectionRange(h,h):a.createTextRange&&(g=a.createTextRange(),g.collapse(!1),g.select()))},0)}function ae(a){a=aE(a)[0];var h=0,g=0;if("selectionStart" in a){h=a.selectionStart,g=a.selectionEnd-h}else{if("selection" in document){a.focus();var f=document.selection.createRange();g=document.selection.createRange().text.length,f.moveStart("character",-a.value.length),h=f.text.length-g}}return{offset:h,length:g}}function ad(b){b.preventDefault(),b.stopPropagation()}function ac(b){b.preventDefault(),b.stopImmediatePropagation()}function ab(a){if(!ay){var d=a[0].currentStyle||window.getComputedStyle(a[0],null);ay=aE(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:d.fontSize,fontFamily:d.fontFamily,fontStyle:d.fontStyle,fontWeight:d.fontWeight,letterSpacing:d.letterSpacing,textTransform:d.textTransform,whiteSpace:"nowrap"}),ay.attr("class","select2-sizer"),aE(document.body).append(ay)}return ay.text(a.val()),ay.width()}function aa(a,l,k){var j,h,i=[];j=aE.trim(a.attr("class")),j&&(j=""+j,aE(j.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&i.push(this)})),j=aE.trim(l.attr("class")),j&&(j=""+j,aE(j.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(h=k(this),h&&i.push(h))})),a.attr("class",i.join(" "))}function Z(h,g,l,k){var j=ap(h.toUpperCase()).indexOf(ap(g.toUpperCase())),i=g.length;return 0>j?(l.push(k(h)),void 0):(l.push(k(h.substring(0,j))),l.push("<span class='select2-match'>"),l.push(k(h.substring(j,j+i))),l.push("</span>"),l.push(k(h.substring(j+i,h.length))),void 0)}function Y(d){var c={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(d).replace(/[&<>"'\/\\]/g,function(b){return c[b]})}function X(l){var k,j=null,i=l.quietMillis||100,b=l.url,a=this;return function(c){window.clearTimeout(k),k=window.setTimeout(function(){var n=l.data,m=b,h=l.transport||aE.fn.select2.ajaxDefaults.transport,g={type:l.type||"GET",cache:l.cache||!1,jsonpCallback:l.jsonpCallback||aD,dataType:l.dataType||"json"},e=aE.extend({},aE.fn.select2.ajaxDefaults.params,g);n=n?n.call(a,c.term,c.page,c.context):null,m="function"==typeof m?m.call(a,c.term,c.page,c.context):m,j&&"function"==typeof j.abort&&j.abort(),l.params&&(aE.isFunction(l.params)?aE.extend(e,l.params.call(a)):aE.extend(e,l.params)),aE.extend(e,{url:m,dataType:l.dataType,data:n,success:function(f){var d=l.results(f,c.page,c);c.callback(d)},error:function(o,f,q){var p={hasError:!0,jqXHR:o,textStatus:f,errorThrown:q};c.callback(p)}}),j=h.call(a,e)},i)}}function W(a){var k,j,l=a,i=function(b){return""+b.text};aE.isArray(l)&&(j=l,l={results:j}),aE.isFunction(l)===!1&&(j=l,l=function(){return j});var h=l();return h.text&&(i=h.text,aE.isFunction(i)||(k=h.text,i=function(b){return b[k]})),function(c){var f,n=c.term,m={results:[]};return""===n?(c.callback(l()),void 0):(f=function(o,g){var d,b;if(o=o[0],o.children){d={};for(b in o){o.hasOwnProperty(b)&&(d[b]=o[b])}d.children=[],aE(o.children).each2(function(p,e){f(e,d.children)}),(d.children.length||c.matcher(n,i(d),o))&&g.push(d)}else{c.matcher(n,i(o),o)&&g.push(o)}},aE(l().results).each2(function(e,d){f(d,m.results)}),c.callback(m),void 0)}}function V(b){var a=aE.isFunction(b);return function(j){var i=j.term,d={results:[]},c=a?b(j):b;aE.isArray(c)&&(aE(c).each(function(){var e=this.text!==aD,f=e?this.text:this;(""===i||j.matcher(i,f))&&d.results.push(e?this:{id:this,text:this})}),j.callback(d))}}function U(a,d){if(aE.isFunction(a)){return !0}if(!a){return !1}if("string"==typeof a){return !0}throw new Error(d+" must be a string, function, or falsy value")}function T(a,f){if(aE.isFunction(a)){var e=Array.prototype.slice.call(arguments,2);return a.apply(f,e)}return a}function S(a){var d=0;return aE.each(a,function(e,c){c.children?d+=S(c.children):d++}),d}function R(v,u,t,s){var p,o,n,m,b,r=v,q=!1;if(!s.createSearchChoice||!s.tokenSeparators||s.tokenSeparators.length<1){return aD}for(;;){for(o=-1,n=0,m=s.tokenSeparators.length;m>n&&(b=s.tokenSeparators[n],o=v.indexOf(b),!(o>=0));n++){}if(0>o){break}if(p=v.substring(0,o),v=v.substring(o+b.length),p.length>0&&(p=s.createSearchChoice.call(this,p,u),p!==aD&&null!==p&&s.id(p)!==aD&&null!==s.id(p))){for(q=!1,n=0,m=u.length;m>n;n++){if(am(s.id(p),s.id(u[n]))){q=!0;break}}q||t(p)}}return r!==v?v:void 0}function Q(){var a=this;aE.each(arguments,function(b,d){a[d].remove(),a[d]=null})}function P(a,f){var e=function(){};return e.prototype=new a,e.prototype.constructor=e,e.prototype.parent=a.prototype,e.prototype=aE.extend(e.prototype,f),e}if(window.Select2===aD){var aC,aB,aA,az,ay,aw,av,ax={x:0,y:0},au={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(b){switch(b=b.which?b.which:b){case au.LEFT:case au.RIGHT:case au.UP:case au.DOWN:return !0}return !1},isControl:function(d){var c=d.which;switch(c){case au.SHIFT:case au.CTRL:case au.ALT:return !0}return d.metaKey?!0:!1},isFunctionKey:function(b){return b=b.which?b.which:b,b>=112&&123>=b}},at="<div class='select2-measure-scrollbar'></div>",ar={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};aw=aE(document),az=function(){var b=1;return function(){return b++}}(),aC=P(Object,{bind:function(d){var c=this;return function(){d.apply(c,arguments)}},init:function(l){var k,j,f=".select2-results";this.opts=l=this.prepareOpts(l),this.id=l.id,l.element.data("select2")!==aD&&null!==l.element.data("select2")&&l.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=aE(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=aE("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(l.element.attr("id")||"autogen"+az()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",l.element.attr("title")),this.body=aE(document.body),aa(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",l.element.attr("style")),this.container.css(T(l.containerCss,this.opts.element)),this.container.addClass(T(l.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",ad),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),aa(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(l.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",ad),this.results=k=this.container.find(f),this.search=j=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",ad),ai(this.results),this.dropdown.on("mousemove-filtered",f,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",f,this.bind(function(c){this._touchEvent=!0,this.highlightUnderEvent(c)})),this.dropdown.on("touchmove",f,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",f,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),ag(80,this.results),this.dropdown.on("scroll-debounced",f,this.bind(this.loadMoreIfNeeded)),aE(this.container).on("change",".select2-input",function(c){c.stopPropagation()}),aE(this.dropdown).on("change",".select2-input",function(c){c.stopPropagation()}),aE.fn.mousewheel&&k.mousewheel(function(g,d,m,i){var h=k.scrollTop();i>0&&0>=h-i?(k.scrollTop(0),ad(g)):0>i&&k.get(0).scrollHeight-k.scrollTop()+i<=k.height()&&(k.scrollTop(k.get(0).scrollHeight-k.height()),ad(g))}),aj(j),j.on("keyup-change input paste",this.bind(this.updateResults)),j.on("focus",function(){j.addClass("select2-focused")}),j.on("blur",function(){j.removeClass("select2-focused")}),this.dropdown.on("mouseup",f,this.bind(function(c){aE(c.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(c),this.selectHighlighted(c))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(c){c.stopPropagation()}),this.nextSearchTerm=aD,aE.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==l.maximumInputLength&&this.search.attr("maxlength",l.maximumInputLength);var b=l.element.prop("disabled");b===aD&&(b=!1),this.enable(!b);var a=l.element.prop("readonly");a===aD&&(a=!1),this.readonly(a),av=av||an(),this.autofocus=l.element.prop("autofocus"),l.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",l.searchInputPlaceholder)},destroy:function(){var b=this.opts.element,f=b.data("select2"),e=this;this.close(),b.length&&b[0].detachEvent&&e._sync&&b.each(function(){e._sync&&this.detachEvent("onpropertychange",e._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,f!==aD&&(f.container.remove(),f.liveRegion.remove(),f.dropdown.remove(),b.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?b.attr({tabindex:this.elementTabIndex}):b.removeAttr("tabindex"),b.show()),Q.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(b){return b.is("option")?{id:b.prop("value"),text:b.text(),element:b.get(),css:b.attr("class"),disabled:b.prop("disabled"),locked:am(b.attr("locked"),"locked")||am(b.data("locked"),!0)}:b.is("optgroup")?{text:b.attr("label"),children:[],element:b.get(),css:b.attr("class")}:void 0},prepareOpts:function(l){var k,j,f,b,a=this;if(k=l.element,"select"===k.get(0).tagName.toLowerCase()&&(this.select=j=l.element),j&&aE.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in l){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}}),l=aE.extend({},{populateResults:function(p,o,n){var m,i=this.opts.id,c=this.liveRegion;m=function(D,C,B){var A,z,y,x,h,g,I,H,G,F;D=l.sortResults(D,C,n);var E=[];for(A=0,z=D.length;z>A;A+=1){y=D[A],h=y.disabled===!0,x=!h&&i(y)!==aD,g=y.children&&y.children.length>0,I=aE("<li></li>"),I.addClass("select2-results-dept-"+B),I.addClass("select2-result"),I.addClass(x?"select2-result-selectable":"select2-result-unselectable"),h&&I.addClass("select2-disabled"),g&&I.addClass("select2-result-with-children"),I.addClass(a.opts.formatResultCssClass(y)),I.attr("role","presentation"),H=aE(document.createElement("div")),H.addClass("select2-result-label"),H.attr("id","select2-result-label-"+az()),H.attr("role","option"),F=l.formatResult(y,H,n,a.opts.escapeMarkup),F!==aD&&(H.html(F),I.append(H)),g&&(G=aE("<ul></ul>"),G.addClass("select2-result-sub"),m(y.children,G,B+1),I.append(G)),I.data("select2-data",y),E.push(I[0])}C.append(E),c.text(l.formatMatches(D.length))},m(o,p,0)}},aE.fn.select2.defaults,l),"function"!=typeof l.id&&(f=l.id,l.id=function(c){return c[f]}),aE.isArray(l.element.data("select2Tags"))){if("tags" in l){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+l.element.attr("id")}l.tags=l.element.data("select2Tags")}if(j?(l.query=this.bind(function(d){var n,m,i,p={results:[],more:!1},o=d.term;i=function(e,h){var g;e.is("option")?d.matcher(o,e.text(),e)&&h.push(a.optionToData(e)):e.is("optgroup")&&(g=a.optionToData(e),e.children().each2(function(q,c){i(c,g.children)}),g.children.length>0&&h.push(g))},n=k.children(),this.getPlaceholder()!==aD&&n.length>0&&(m=this.getPlaceholderOption(),m&&(n=n.not(m))),n.each2(function(e,c){i(c,p.results)}),d.callback(p)}),l.id=function(c){return c.id}):"query" in l||("ajax" in l?(b=l.element.data("ajax-url"),b&&b.length>0&&(l.ajax.url=b),l.query=X.call(l.element,l.ajax)):"data" in l?l.query=W(l.data):"tags" in l&&(l.query=V(l.tags),l.createSearchChoice===aD&&(l.createSearchChoice=function(c){return{id:aE.trim(c),text:aE.trim(c)}}),l.initSelection===aD&&(l.initSelection=function(c,h){var g=[];aE(al(c.val(),l.separator,l.transformVal)).each(function(){var e={id:this,text:this},i=l.tags;aE.isFunction(i)&&(i=i()),aE(i).each(function(){return am(this.id,e.id)?(e=this,!1):void 0}),g.push(e)}),h(g)}))),"function"!=typeof l.query){throw"query function not defined for Select2 "+l.element.attr("id")}if("top"===l.createSearchChoicePosition){l.createSearchChoicePosition=function(d,c){d.unshift(c)}}else{if("bottom"===l.createSearchChoicePosition){l.createSearchChoicePosition=function(d,c){d.push(c)}}else{if("function"!=typeof l.createSearchChoicePosition){throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function"}}}return l},monitorSource:function(){var b,f=this.opts.element,a=this;f.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var c=f.prop("disabled");c===aD&&(c=!1),this.enable(!c);var e=f.prop("readonly");e===aD&&(e=!1),this.readonly(e),this.container&&(aa(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(aa(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass,this.opts.element)))}),f.length&&f[0].attachEvent&&f.each(function(){this.attachEvent("onpropertychange",a._sync)}),b=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,b!==aD&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new b(function(c){aE.each(c,a._sync)}),this.propertyObserver.observe(f.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){var d=aE.Event("select2-selecting",{val:this.id(a),object:a,choice:a});return this.opts.element.trigger(d),!d.isDefaultPrevented()},triggerChange:function(a){a=a||{},a=aE.extend({},a,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(a),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var d=this._enabled&&!this._readonly,c=!d;return d===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",c),this.close(),this.enabledInterface=d,!0)},enable:function(b){b===aD&&(b=!0),this._enabled!==b&&(this._enabled=b,this.opts.element.prop("disabled",!b),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(b){b===aD&&(b=!1),this._readonly!==b&&(this._readonly=b,this.opts.element.prop("readonly",b),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var C,B,A,j,a,aL=this.dropdown,aK=this.container,aJ=aK.offset(),aI=aK.outerHeight(!1),aH=aK.outerWidth(!1),aG=aL.outerHeight(!1),aF=aE(window),O=aF.width(),N=aF.height(),M=aF.scrollLeft()+O,L=aF.scrollTop()+N,K=aJ.top+aI,J=aJ.left,I=L>=K+aG,H=aJ.top-aG>=aF.scrollTop(),G=aL.outerWidth(!1),F=function(){return M>=J+G},E=function(){return aJ.left+M+aK.outerWidth(!1)>G},D=aL.hasClass("select2-drop-above");D?(B=!0,!H&&I&&(A=!0,B=!1)):(B=!1,!I&&H&&(A=!0,B=!0)),A&&(aL.hide(),aJ=this.container.offset(),aI=this.container.outerHeight(!1),aH=this.container.outerWidth(!1),aG=aL.outerHeight(!1),M=aF.scrollLeft()+O,L=aF.scrollTop()+N,K=aJ.top+aI,J=aJ.left,G=aL.outerWidth(!1),aL.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(a=aE(".select2-results",aL)[0],aL.addClass("select2-drop-auto-width"),aL.css("width",""),G=aL.outerWidth(!1)+(a.scrollHeight===a.clientHeight?0:av.width),G>aH?aH=G:G=aH,aG=aL.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(C=this.body.offset(),K-=C.top,J-=C.left),!F()&&E()&&(J=aJ.left+this.container.outerWidth(!1)-G),j={left:J,width:aH},B?(j.top=aJ.top-aG,j.bottom="auto",this.container.addClass("select2-drop-above"),aL.addClass("select2-drop-above")):(j.top=K,j.bottom="auto",this.container.removeClass("select2-drop-above"),aL.removeClass("select2-drop-above")),j=aE.extend(j,T(this.opts.dropdownCss,this.opts.element)),aL.css(j)},shouldOpen:function(){var a;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(a=aE.Event("select2-opening"),this.opts.element.trigger(a),!a.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),aw.on("mousemove.select2Event",function(b){ax.x=b.pageX,ax.y=b.pageY}),!0):!1},opening:function(){var i,a=this.containerEventName,l="scroll."+a,k="resize."+a,j="orientationchange."+a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),i=aE("#select2-drop-mask"),0===i.length&&(i=aE(document.createElement("div")),i.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body),i.on("mousedown touchstart click",function(e){aq(i);var f,g=aE("#select2-drop");g.length>0&&(f=g.data("select2"),f.opts.selectOnBlur&&f.selectHighlighted({noFocus:!0}),f.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),aE("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),i.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var h=this;this.container.parents().add(window).each(function(){aE(this).on(k+" "+l+" "+j,function(){h.opened()&&h.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerEventName,h="scroll."+a,g="resize."+a,f="orientationchange."+a;this.container.parents().add(window).each(function(){aE(this).off(h).off(g).off(f)}),this.clearDropdownAlignmentPreference(),aE("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),aw.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(aE.Event("select2-close"))}},externalSearch:function(b){this.open(),this.search.val(b),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var q,p,o,n,m,l,k,a,r=this.results;if(p=this.highlight(),!(0>p)){if(0==p){return r.scrollTop(0),void 0}q=this.findHighlightableChoices().find(".select2-result-label"),o=aE(q[p]),a=(o.offset()||{}).top||0,n=a+o.outerHeight(!0),p===q.length-1&&(k=r.find("li.select2-more-results"),k.length>0&&(n=k.offset().top+k.outerHeight(!0))),m=r.offset().top+r.outerHeight(!1),n>m&&r.scrollTop(r.scrollTop()+(n-m)),l=a-r.offset().top,0>l&&"none"!=o.css("display")&&r.scrollTop(r.scrollTop()+l)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(a){for(var h=this.findHighlightableChoices(),g=this.highlight();g>-1&&g<h.length;){g+=a;var f=aE(h[g]);if(f.hasClass("select2-result-selectable")&&!f.hasClass("select2-disabled")&&!f.hasClass("select2-selected")){this.highlight(g);break}}},highlight:function(a){var g,f,h=this.findHighlightableChoices();return 0===arguments.length?ao(h.filter(".select2-highlighted")[0],h.get()):(a>=h.length&&(a=h.length-1),0>a&&(a=0),this.removeHighlight(),g=aE(h[a]),g.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",g.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(g.text()),f=g.data("select2-data"),f&&this.opts.element.trigger({type:"select2-highlight",val:this.id(f),choice:f}),void 0)},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){var f=aE(a.target).closest(".select2-result-selectable");if(f.length>0&&!f.is(".select2-highlighted")){var e=this.findHighlightableChoices();this.highlight(e.index(f))}else{0==f.length&&this.removeHighlight()}},loadMoreIfNeeded:function(){var n,i=this.results,h=i.find("li.select2-more-results"),m=this.resultsPage+1,l=this,k=this.search.val(),j=this.context;0!==h.length&&(n=h.offset().top-i.offset().top-i.height(),n<=this.opts.loadMorePadding&&(h.addClass("select2-active"),this.opts.query({element:this.opts.element,term:k,page:m,context:j,matcher:this.opts.matcher,callback:this.bind(function(a){l.opened()&&(l.opts.populateResults.call(this,i,a.results,{term:k,page:m,context:j}),l.postprocessResults(a,!1,!1),a.more===!0?(h.detach().appendTo(i).html(l.opts.escapeMarkup(T(l.opts.formatLoadMore,l.opts.element,m+1))),window.setTimeout(function(){l.loadMoreIfNeeded()},10)):h.remove(),l.positionDropdown(),l.resultsPage=m,l.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))})})))},tokenize:function(){},updateResults:function(z){function p(){y.removeClass("select2-active"),u.positionDropdown(),x.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?u.liveRegion.text(x.text()):u.liveRegion.text(u.opts.formatMatches(x.find('.select2-result-selectable:not(".select2-selected")').length))}function b(c){x.html(c),p()}var v,t,q,y=this.search,x=this.results,w=this.opts,u=this,s=y.val(),r=aE.data(this.container,"select2-last-term");if((z===!0||!r||!am(s,r))&&(aE.data(this.container,"select2-last-term",s),z===!0||this.showSearchInput!==!1&&this.opened())){q=++this.queryCount;var a=this.getMaximumSelectionSize();if(a>=1&&(v=this.data(),aE.isArray(v)&&v.length>=a&&U(w.formatSelectionTooBig,"formatSelectionTooBig"))){return b("<li class='select2-selection-limit'>"+T(w.formatSelectionTooBig,w.element,a)+"</li>"),void 0}if(y.val().length<w.minimumInputLength){return U(w.formatInputTooShort,"formatInputTooShort")?b("<li class='select2-no-results'>"+T(w.formatInputTooShort,w.element,y.val(),w.minimumInputLength)+"</li>"):b(""),z&&this.showSearch&&this.showSearch(!0),void 0}if(w.maximumInputLength&&y.val().length>w.maximumInputLength){return U(w.formatInputTooLong,"formatInputTooLong")?b("<li class='select2-no-results'>"+T(w.formatInputTooLong,w.element,y.val(),w.maximumInputLength)+"</li>"):b(""),void 0}w.formatSearching&&0===this.findHighlightableChoices().length&&b("<li class='select2-searching'>"+T(w.formatSearching,w.element)+"</li>"),y.addClass("select2-active"),this.removeHighlight(),t=this.tokenize(),t!=aD&&null!=t&&y.val(t),this.resultsPage=1,w.query({element:w.element,term:y.val(),page:this.resultsPage,context:null,matcher:w.matcher,callback:this.bind(function(d){var c;if(q==this.queryCount){if(!this.opened()){return this.search.removeClass("select2-active"),void 0}if(d.hasError!==aD&&U(w.formatAjaxError,"formatAjaxError")){return b("<li class='select2-ajax-error'>"+T(w.formatAjaxError,w.element,d.jqXHR,d.textStatus,d.errorThrown)+"</li>"),void 0}if(this.context=d.context===aD?null:d.context,this.opts.createSearchChoice&&""!==y.val()&&(c=this.opts.createSearchChoice.call(u,y.val(),d.results),c!==aD&&null!==c&&u.id(c)!==aD&&null!==u.id(c)&&0===aE(d.results).filter(function(){return am(u.id(this),u.id(c))}).length&&this.opts.createSearchChoicePosition(d.results,c)),0===d.results.length&&U(w.formatNoMatches,"formatNoMatches")){return b("<li class='select2-no-results'>"+T(w.formatNoMatches,w.element,y.val())+"</li>"),void 0}x.empty(),u.opts.populateResults.call(this,x,d.results,{term:y.val(),page:this.resultsPage,context:null}),d.more===!0&&U(w.formatLoadMore,"formatLoadMore")&&(x.append("<li class='select2-more-results'>"+w.escapeMarkup(T(w.formatLoadMore,w.element,this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(d,z),p(),this.opts.element.trigger({type:"select2-loaded",items:d})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){af(this.search)},selectHighlighted:function(f){if(this._touchMoved){return this.clearTouchMoved(),void 0}var e=this.highlight(),h=this.results.find(".select2-highlighted"),g=h.closest(".select2-result").data("select2-data");g?(this.highlight(e),this.onSelect(g,f)):f&&f.noFocus&&this.close()},getPlaceholder:function(){var b;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((b=this.getPlaceholderOption())!==aD?b.text():aD)},getPlaceholderOption:function(){if(this.select){var a=this.select.children("option").first();if(this.opts.placeholderOption!==aD){return"first"===this.opts.placeholderOption&&a||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select)}if(""===aE.trim(a.text())&&""===a.val()){return a}}},initContainerWidth:function(){function b(){var n,m,l,k,j,i;if("off"===this.opts.width){return null}if("element"===this.opts.width){return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"}if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==aD){for(m=n.split(";"),k=0,j=m.length;j>k;k+=1){if(i=m[k].replace(/\s/g,""),l=i.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==l&&l.length>=1){return l[1]}}}return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return aE.isFunction(this.opts.width)?this.opts.width():this.opts.width}var a=b.call(this);null!==a&&this.container.css("width",a)}}),aB=P(aC,{createContainer:function(){var a=aE(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return a},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var f,b,a;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),f=this.search.get(0),f.createTextRange?(b=f.createTextRange(),b.collapse(!1),b.select()):f.setSelectionRange&&(a=this.search.val().length,f.setSelectionRange(a,a))),""===this.search.val()&&this.nextSearchTerm!=aD&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(aE.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){aE("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),Q.call(this,"selection","focusser")},initContainer:function(){var a,i,l=this.container,k=this.dropdown,j=az();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=a=l.find(".select2-choice"),this.focusser=l.find(".select2-focusser"),a.find(".select2-chosen").attr("id","select2-chosen-"+j),this.focusser.attr("aria-labelledby","select2-chosen-"+j),this.results.attr("id","select2-results-"+j),this.search.attr("aria-owns","select2-results-"+j),this.focusser.attr("id","s2id_autogen"+j),i=aE("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var f=this.opts.element.attr("title");this.opts.element.attr("title",f||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(aE("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(b){if(this.isInterfaceEnabled()&&229!=b.keyCode){if(b.which===au.PAGE_UP||b.which===au.PAGE_DOWN){return ad(b),void 0}switch(b.which){case au.UP:case au.DOWN:return this.moveHighlight(b.which===au.UP?-1:1),ad(b),void 0;case au.ENTER:return this.selectHighlighted(),ad(b),void 0;case au.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case au.ESC:return this.cancel(b),ad(b),void 0}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(b){if(this.isInterfaceEnabled()&&b.which!==au.TAB&&!au.isControl(b)&&!au.isFunctionKey(b)&&b.which!==au.ESC){if(this.opts.openOnEnter===!1&&b.which===au.ENTER){return ad(b),void 0}if(b.which==au.DOWN||b.which==au.UP||b.which==au.ENTER&&this.opts.openOnEnter){if(b.altKey||b.ctrlKey||b.shiftKey||b.metaKey){return}return this.open(),ad(b),void 0}return b.which==au.DELETE||b.which==au.BACKSPACE?(this.opts.allowClear&&this.clear(),ad(b),void 0):void 0}})),aj(this.focusser),this.focusser.on("keyup-change input",this.bind(function(b){if(this.opts.minimumResultsForSearch>=0){if(b.stopPropagation(),this.opened()){return}this.open()}})),a.on("mousedown touchstart","abbr",this.bind(function(b){this.isInterfaceEnabled()&&(this.clear(),ac(b),this.close(),this.selection&&this.selection.focus())})),a.on("mousedown touchstart",this.bind(function(b){aq(a),this.container.hasClass("select2-container-active")||this.opts.element.trigger(aE.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),ad(b)})),k.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),a.on("focus",this.bind(function(b){ad(b)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(aE.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(aE.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(aE.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(a){var h=this.selection.data("select2-data");if(h){var g=aE.Event("select2-clearing");if(this.opts.element.trigger(g),g.isDefaultPrevented()){return}var f=this.getPlaceholderOption();this.opts.element.val(f?f.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),a!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(h),choice:h}),this.triggerChange({removed:h}))}},initSelection:function(){if(this.isPlaceholderOptionSelected()){this.updateSelection(null),this.close(),this.setPlaceholder()}else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==aD&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder(),a.nextSearchTerm=a.opts.nextSearchTerm(b,a.search.val()))})}},isPlaceholderOptionSelected:function(){var b;return this.getPlaceholder()===aD?!1:(b=this.getPlaceholderOption())!==aD&&b.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===aD||null===this.opts.element.val()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),d=this;return"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(e,c){var f=e.find("option").filter(function(){return this.selected&&!this.disabled});c(d.optionToData(f))}:"data" in a&&(a.initSelection=a.initSelection||function(i,h){var g=i.val(),b=null;a.query({matcher:function(e,k,j){var f=am(g,a.id(j));return f&&(b=j),f},callback:aE.isFunction(h)?function(){h(b)}:aE.noop})}),a},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===aD?aD:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var b=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&b!==aD){if(this.select&&this.getPlaceholderOption()===aD){return}this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(b)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(h,f,l){var k=0,j=this;if(this.findHighlightableChoices().each2(function(d,c){return am(j.id(c.data("select2-data")),j.opts.element.val())?(k=d,!1):void 0}),l!==!1&&(f===!0&&k>=0?this.highlight(k):this.highlight(0)),f===!0){var i=this.opts.minimumResultsForSearch;i>=0&&this.showSearch(S(h.results)>=i)}},showSearch:function(a){this.showSearchInput!==a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!a),aE(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(f,e){if(this.triggerSelect(f)){var h=this.opts.element.val(),g=this.data();this.opts.element.val(this.id(f)),this.updateSelection(f),this.opts.element.trigger({type:"select2-selected",val:this.id(f),choice:f}),this.nextSearchTerm=this.opts.nextSearchTerm(f,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),am(h,this.id(f))||this.triggerChange({added:f,removed:g})}},updateSelection:function(b){var g,f,h=this.selection.find(".select2-chosen");this.selection.data("select2-data",b),h.empty(),null!==b&&(g=this.opts.formatSelection(b,h,this.opts.escapeMarkup)),g!==aD&&h.append(g),f=this.opts.formatSelectionCssClass(b,h),f!==aD&&h.addClass(f),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==aD&&this.container.addClass("select2-allowclear")},val:function(){var b,j=!1,i=null,h=this,g=this.data();if(0===arguments.length){return this.opts.element.val()}if(b=arguments[0],arguments.length>1&&(j=arguments[1]),this.select){this.select.val(b).find("option").filter(function(){return this.selected}).each2(function(d,c){return i=h.optionToData(c),!1}),this.updateSelection(i),this.setPlaceholder(),j&&this.triggerChange({added:i,removed:g})}else{if(!b&&0!==b){return this.clear(j),void 0}if(this.opts.initSelection===aD){throw new Error("cannot call val() if initSelection() is not defined")}this.opts.element.val(b),this.opts.initSelection(this.opts.element,function(c){h.opts.element.val(c?h.id(c):""),h.updateSelection(c),h.setPlaceholder(),j&&h.triggerChange({added:c,removed:g})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(b){var f,e=!1;return 0===arguments.length?(f=this.selection.data("select2-data"),f==aD&&(f=null),f):(arguments.length>1&&(e=arguments[1]),b?(f=this.data(),this.opts.element.val(b?this.id(b):""),this.updateSelection(b),e&&this.triggerChange({added:b,removed:f})):this.clear(e),void 0)}}),aA=P(aC,{createContainer:function(){var a=aE(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return a},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),d=this;return"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(e,c){var f=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(h,g){f.push(d.optionToData(g))}),c(f)}:"data" in a&&(a.initSelection=a.initSelection||function(i,h){var g=al(i.val(),a.separator,a.transformVal),b=[];a.query({matcher:function(k,j,f){var e=aE.grep(g,function(c){return am(c,a.id(f))}).length;return e&&b.push(f),e},callback:aE.isFunction(h)?function(){for(var e=[],l=0;l<g.length;l++){for(var k=g[l],j=0;j<b.length;j++){var f=b[j];if(am(k,a.id(f))){e.push(f),b.splice(j,1);break}}}h(e)}:aE.noop})}),a},selectChoice:function(d){var c=this.container.find(".select2-search-choice-focus");c.length&&d&&d[0]==c[0]||(c.length&&this.opts.element.trigger("choice-deselected",c),c.removeClass("select2-search-choice-focus"),d&&d.length&&(this.close(),d.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",d)))},destroy:function(){aE("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),Q.call(this,"searchContainer","selection")},initContainer:function(){var f,a=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=f=this.container.find(a);var e=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){e.search[0].focus(),e.selectChoice(aE(this))}),this.search.attr("id","s2id_autogen"+az()),this.search.prev().text(aE("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(h){if(this.isInterfaceEnabled()){++this.keydowns;var c=f.find(".select2-search-choice-focus"),l=c.prev(".select2-search-choice:not(.select2-locked)"),k=c.next(".select2-search-choice:not(.select2-locked)"),j=ae(this.search);if(c.length&&(h.which==au.LEFT||h.which==au.RIGHT||h.which==au.BACKSPACE||h.which==au.DELETE||h.which==au.ENTER)){var i=c;return h.which==au.LEFT&&l.length?i=l:h.which==au.RIGHT?i=k.length?k:null:h.which===au.BACKSPACE?this.unselect(c.first())&&(this.search.width(10),i=l.length?l:k):h.which==au.DELETE?this.unselect(c.first())&&(this.search.width(10),i=k.length?k:null):h.which==au.ENTER&&(i=null),this.selectChoice(i),ad(h),i&&i.length||this.open(),void 0}if((h.which===au.BACKSPACE&&1==this.keydowns||h.which==au.LEFT)&&0==j.offset&&!j.length){return this.selectChoice(f.find(".select2-search-choice:not(.select2-locked)").last()),ad(h),void 0}if(this.selectChoice(null),this.opened()){switch(h.which){case au.UP:case au.DOWN:return this.moveHighlight(h.which===au.UP?-1:1),ad(h),void 0;case au.ENTER:return this.selectHighlighted(),ad(h),void 0;case au.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case au.ESC:return this.cancel(h),ad(h),void 0}}if(h.which!==au.TAB&&!au.isControl(h)&&!au.isFunctionKey(h)&&h.which!==au.BACKSPACE&&h.which!==au.ESC){if(h.which===au.ENTER){if(this.opts.openOnEnter===!1){return}if(h.altKey||h.ctrlKey||h.shiftKey||h.metaKey){return}}this.open(),(h.which===au.PAGE_UP||h.which===au.PAGE_DOWN)&&ad(h),h.which===au.ENTER&&ad(h)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(c){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),c.stopImmediatePropagation(),this.opts.element.trigger(aE.Event("select2-blur"))})),this.container.on("click",a,this.bind(function(c){this.isInterfaceEnabled()&&(aE(c.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(aE.Event("select2-focus")),this.open(),this.focusSearch(),c.preventDefault()))})),this.container.on("focus",a,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(aE.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==aD&&null!==b&&(a.updateSelection(b),a.close(),a.clearSearch())})}},clearSearch:function(){var b=this.getPlaceholder(),d=this.getMaxSearchWidth();b!==aD&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(b).addClass("select2-default"),this.search.width(d>0?d:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=aD&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(aE.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var h=[],g=[],f=this;aE(a).each(function(){ao(f.id(this),h)<0&&(h.push(f.id(this)),g.push(this))}),a=g,this.selection.find(".select2-search-choice").remove(),aE(a).each(function(){f.addSelectedChoice(this)}),f.postprocessResults()},tokenize:function(){var b=this.search.val();b=this.opts.tokenizer.call(this,b,this.data(),this.bind(this.onSelect),this.opts),null!=b&&b!=aD&&(this.search.val(b),b.length>0&&this.open())},onSelect:function(b,d){this.triggerSelect(b)&&""!==b.text&&(this.addSelectedChoice(b),this.opts.element.trigger({type:"selected",val:this.id(b),choice:b}),this.nextSearchTerm=this.opts.nextSearchTerm(b,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(b,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=aD&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:b}),d&&d.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(r){var b,a,q=!r.locked,p=aE("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),o=aE("<li class='select2-search-choice select2-locked'><div></div></li>"),n=q?p:o,m=this.id(r),l=this.getVal();b=this.opts.formatSelection(r,n.find("div"),this.opts.escapeMarkup),b!=aD&&n.find("div").replaceWith(aE("<div></div>").html(b)),a=this.opts.formatSelectionCssClass(r,n.find("div")),a!=aD&&n.addClass(a),q&&n.find(".select2-search-choice-close").on("mousedown",ad).on("click dblclick",this.bind(function(c){this.isInterfaceEnabled()&&(this.unselect(aE(c.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),ad(c),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),n.data("select2-data",r),n.insertBefore(this.searchContainer),l.push(m),this.setVal(l)},unselect:function(a){var i,h,j=this.getVal();if(a=a.closest(".select2-search-choice"),0===a.length){throw"Invalid argument: "+a+". Must be .select2-search-choice"}if(i=a.data("select2-data")){var g=aE.Event("select2-removing");if(g.val=this.id(i),g.choice=i,this.opts.element.trigger(g),g.isDefaultPrevented()){return !1}for(;(h=ao(this.id(i),j))>=0;){j.splice(h,1),this.setVal(j),this.select&&this.postprocessResults()}return a.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(i,h,n){var m=this.getVal(),l=this.results.find(".select2-result"),k=this.results.find(".select2-result-with-children"),j=this;l.each2(function(e,d){var f=j.id(d.data("select2-data"));ao(f,m)>=0&&(d.addClass("select2-selected"),d.find(".select2-result-selectable").addClass("select2-selected"))}),k.each2(function(d,c){c.is(".select2-result-selectable")||0!==c.find(".select2-result-selectable:not(.select2-selected)").length||c.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&this.opts.closeOnSelect===!0&&j.highlight(0),!this.opts.createSearchChoice&&!l.filter(".select2-result:not(.select2-selected)").length>0&&(!i||i&&!i.more&&0===this.results.find(".select2-no-results").length)&&U(j.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+T(j.opts.formatNoMatches,j.opts.element,j.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-ak(this.search)},resizeSearch:function(){var h,g,l,k,j,i=ak(this.search);h=ab(this.search)+10,g=this.search.offset().left,l=this.selection.width(),k=this.selection.offset().left,j=l-(g-k)-i,h>j&&(j=l-i),40>j&&(j=l-i),0>=j&&(j=h),this.search.width(Math.floor(j))},getVal:function(){var b;return this.select?(b=this.select.val(),null===b?[]:b):(b=this.opts.element.val(),al(b,this.opts.separator,this.opts.transformVal))},setVal:function(a){var d;this.select?this.select.val(a):(d=[],aE(a).each(function(){ao(this,d)<0&&d.push(this)}),this.opts.element.val(0===d.length?"":d.join(this.opts.separator)))},buildChangeDetails:function(f,e){for(var e=e.slice(0),f=f.slice(0),h=0;h<e.length;h++){for(var g=0;g<f.length;g++){am(this.opts.id(e[h]),this.opts.id(f[g]))&&(e.splice(h,1),h>0&&h--,f.splice(g,1),g--)}}return{added:e,removed:f}},val:function(h,g){var b,a=this;if(0===arguments.length){return this.getVal()}if(b=this.data(),b.length||(b=[]),!h&&0!==h){return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),g&&this.triggerChange({added:this.data(),removed:b}),void 0}if(this.setVal(h),this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection)),g&&this.triggerChange(this.buildChangeDetails(b,this.data()))}else{if(this.opts.initSelection===aD){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(d){var e=aE.map(d,a.id);a.setVal(e),a.updateSelection(d),a.clearSearch(),g&&a.triggerChange(a.buildChangeDetails(b,a.data()))})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var a=[],d=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){a.push(d.opts.id(aE(this).data("select2-data")))}),this.setVal(a),this.triggerChange()},data:function(a,j){var h,g,i=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return aE(this).data("select2-data")}).get():(g=this.data(),a||(a=[]),h=aE.map(a,function(b){return i.opts.id(b)}),this.setVal(h),this.updateSelection(a),this.clearSearch(),j&&this.triggerChange(this.buildChangeDetails(g,this.data())),void 0)}}),aE.fn.select2=function(){var s,r,q,p,o,t=Array.prototype.slice.call(arguments,0),n=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],m=["opened","isFocused","container","dropdown"],b=["val","data"],a={search:"externalSearch"};return this.each(function(){if(0===t.length||"object"==typeof t[0]){s=0===t.length?{}:aE.extend({},t[0]),s.element=aE(this),"select"===s.element.get(0).tagName.toLowerCase()?o=s.element.prop("multiple"):(o=s.multiple||!1,"tags" in s&&(s.multiple=o=!0)),r=o?new window.Select2["class"].multi:new window.Select2["class"].single,r.init(s)}else{if("string"!=typeof t[0]){throw"Invalid arguments to select2 plugin: "+t}if(ao(t[0],n)<0){throw"Unknown method: "+t[0]}if(p=aD,r=aE(this).data("select2"),r===aD){return}if(q=t[0],"container"===q?p=r.container:"dropdown"===q?p=r.dropdown:(a[q]&&(q=a[q]),p=r[q].apply(r,t.slice(1))),ao(t[0],m)>=0||ao(t[0],b)>=0&&1==t.length){return !1}}}),p===aD?this:p},aE.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(g,f,j,i){var h=[];return Z(this.text(g),j.term,h,i),h.join("")},transformVal:function(a){return aE.trim(a)},formatSelection:function(b,f,e){return b?e(this.text(b)):aD},sortResults:function(b){return b},formatResultCssClass:function(b){return b.css},formatSelectionCssClass:function(){return aD},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(b){return b==aD?null:b.id},text:function(a){return a&&this.data&&this.data.text?aE.isFunction(this.data.text)?this.data.text(a):a[this.data.text]:a.text},matcher:function(d,c){return ap(""+c).toUpperCase().indexOf(ap(""+d).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:R,escapeMarkup:Y,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(b){return b},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return aD},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(d){var c="ontouchstart" in window||navigator.msMaxTouchPoints>0;return c?d.opts.minimumResultsForSearch<0?!1:!0:!0}},aE.fn.select2.locales=[],aE.fn.select2.locales.en={formatMatches:function(b){return 1===b?"One result is available, press enter to select it.":b+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,d){var f=d-e.length;return"Please enter "+f+" or more character"+(1==f?"":"s")},formatInputTooLong:function(e,d){var f=e.length-d;return"Please delete "+f+" character"+(1==f?"":"s")},formatSelectionTooBig:function(b){return"You can only select "+b+" item"+(1==b?"":"s")},formatLoadMore:function(){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}},aE.extend(aE.fn.select2.defaults,aE.fn.select2.locales.en),aE.fn.select2.ajaxDefaults={transport:aE.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:X,local:W,tags:V},util:{debounce:ah,markMatch:Z,escapeMarkup:Y,stripDiacritics:ap},"class":{"abstract":aC,single:aB,multi:aA}}}}(jQuery);CKEDITOR.disableAutoInline=true;ko.bindingHandlers.ckeditorInline={counter:0,prefix:"__cked_",init:function(c,d,e,b){if(!c.id){c.id=ko.bindingHandlers.ckeditorInline.prefix+(++ko.bindingHandlers.ckeditorInline.counter)}var a=e.get("ckeditorOptions")||{};var f=e.get("ckUpdate")||function(){};a.floatSpaceDockedOffsetY=0;a.extraPlugins="sourcedialog";a.removePlugins="sourcearea";ko.utils.domNodeDisposal.addDisposeCallback(c,function(){if(CKEDITOR.instances[c.id]){CKEDITOR.remove(CKEDITOR.instances[c.id])}});$(c).on("click",function(){if(!CKEDITOR.instances[c.id]){var g=CKEDITOR.inline(c.id,a);g.on("change",function(){d()(g.getData())});$(c).trigger("blur");ko.bindingHandlers.ckeditorInline.update(c,d,e,b);return false}})},update:function(c,d,f,b){var e=ko.utils.unwrapObservable(d());var a=CKEDITOR.instances&&CKEDITOR.instances[c.id];if(a){if(e!==a.getData()){a.setData(e,function(){this.checkDirty()})}}else{$(c).html(e)}}};ko.bindingHandlers.select2={init:function(b,d,f){var c=b.dataset.ajaxUrl||"";var e=b.dataset.ajaxTerm||"q";var a=b.dataset.minimumInputLength||2;$(b).select2({minimumInputLength:a,multiple:true,placeholder:b.dataset.placeholder,ajax:{url:c,dataType:"json",data:function(g,h){var i={};i[e]=g;return i},results:function(h,g){return{results:h}},cache:true}});$(b).select2("data",ko.utils.unwrapObservable(d()));$(b).on("change",function(){var g=$(b).select2("data");d()(g)});ko.utils.domNodeDisposal.addDisposeCallback(b,function(){$(b).select2("destroy")})}};function ModalConfirm(b){b=b?b:{};if(b.prototype){return}var a=this;a.modal_selector=b.modal_selector;a.message=ko.observable(b.message);a.header=ko.observable(b.header);a.variable_name=b.variable_name;a.label={yes:"",no:""};a.custom_modal_body=b.custom_modal_body?b.custom_modal_body:"";a.callback_confirm=null;a.callback_decline=null;a._generate_modal=function(){if(a.variable_name==null){console.error("One should pass variable_name to use autogenerate modal:\nvar modalForm = new ModalConfirm({variable_name: 'modalForm'})");return}var d="modal-"+a.variable_name;$("#"+d).remove();var c='<div id="'+d+'" class="modal fade" role="dialog" data-bind="with: '+a.variable_name+'"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" data-bind="text: header"></div><div class="modal-body"><span data-bind="html: message"></span>'+a.custom_modal_body+'</div><div class="modal-footer"><button type="button" class="btn btn-default" data-decline data-dismiss="modal">'+a.label.no+'</button><button type="button" class="btn btn-danger" data-confirm data-dismiss="modal">'+a.label.yes+"</button></div></div></div></div>";$("body").prepend(c);return"#"+d};a.init=function(){if(a.modal_selector==null){a.modal_selector=a._generate_modal()}$(a.modal_selector).find("[data-confirm]").unbind("click");$(a.modal_selector).find("[data-confirm]").click(function(){if(a.callback_confirm){a.callback_confirm()}});$(a.modal_selector).find("[data-decline]").unbind("click");$(a.modal_selector).find("[data-decline]").click(function(){if(a.callback_decline){a.callback_decline()}})};a.show=function(c,d){a.callback_confirm=c===undefined?null:c;a.callback_decline=d===undefined?null:d;$(a.modal_selector).modal("show")};a.init()}(function(){function b(d,e){var c=this;c.lab=d;c.pk=e.id;c.users=ko.observableArray(e.users);c.description=ko.observable(e.description);c.complexity=ko.observable(e.complexity);c.base_values={description:ko.observable(e.description),complexity:ko.observable(e.complexity),users:ko.observableArray(e.users)};c.changed=ko.pureComputed(function(){var f=JSON.stringify(c.users())==JSON.stringify(c.base_values.users());return !f||c.description()!=c.base_values.description()||c.complexity()!=c.base_values.complexity()});c.reset=function(){c.base_values.description(c.description());c.base_values.complexity(c.complexity());c.base_values.users(c.users())};c.setComplex=function(f){c.complexity(f)};c.Save=function(f){$.post(f,{pk:c.pk,description:c.description(),complexity:c.complexity(),users:c.users().map(function(g){return g.id}),csrfmiddlewaretoken:$.cookie("csrftoken")}).done(function(){c.reset()})};c.Remove=function(f,g){d.tasks.pop(c)}}function a(e,f){var c=this;c.model=e;c.pk=f.id;c.tasks=ko.observableArray([]);c.description=ko.observable(f.description);c.title=ko.observable(f.title);c.Init=function(g){c.tasks.removeAll();g.tasks.every(function(h){c.tasks.push(new b(c,h));return true})};function d(g){return $(g).parents(".lab")[0]}c.Save=function(g,j){var h=j.currentTarget;var k=h.dataset.action;c.tasks().every(function(i){if(i.changed()){i.Save(e.urls.tasks.update)}return true});$.post(k,{title:c.title(),pk:c.pk,description:c.description(),csrfmiddlewaretoken:$.cookie("csrftoken")}).done(function(){InterfaceAlerts.showSuccess()})};c.AddTask=function(){$.post(e.urls.tasks.add,{lab_id:c.pk,description:"...",csrfmiddlewaretoken:$.cookie("csrftoken")}).done(function(){e.previewLabs()})};c.Init(f)}window.LabsTree=function(h){var d=this;d.labs=ko.observableArray();d.cool=ko.observable("cool");d.lastNode=null;d.lastNodeID=null;d.urls={tasks:{update:h.urls.tasks.update,users:h.urls.tasks.users,add:h.urls.tasks.add},labs:{update:h.urls.labs.update,list:h.urls.labs.list,list_json:h.urls.labs.list_json},tree:h.urls.tree};d.ckeditor_config=h.ckeditor_config;var f=$("#labs-preview");var c=$("#tree");var g=$("#labs-tree");d.complex_choices=ko.observableArray();function e(){g.jstree({core:{check_callback:function(l,j,k){if(l=="move_node"){if(j.data.lab_id&&k.data.discipline_id||j.data.task_id&&k.data.lab_id){return true}return false}},multiple:false},dnd:{inside_pos:"last",is_draggable:function(j){if(j[0].data.lab_id){return true}}},plugins:["dnd","wholerow","state"]}).on("move_node.jstree",function(l,k){if(k.node.data.lab_id){var j=$("#"+k.node.parent)[0].dataset.discipline_id;$.post(d.urls.labs.update,{pk:k.node.data.lab_id,position:k.position,discipline_id:j,csrfmiddlewaretoken:$.cookie("csrftoken")}).done(function(){d.previewLabs(d.lastNode);InterfaceAlerts.showSuccess()}).fail(function(){InterfaceAlerts.showFail()})}if(k.node.data.task_id){var m=$("#"+k.node.parent)[0].dataset.lab_id;$.post(d.urls.tasks.update,{pk:k.node.data.task_id,position:k.position,lab_id:m,csrfmiddlewaretoken:$.cookie("csrftoken")}).done(function(){InterfaceAlerts.showSuccess()}).fail(function(){InterfaceAlerts.showFail()})}}).on("select_node.jstree",function(k,j){d.previewLabs(j.node)});var i=g.jstree("get_node",localStorage.lastNodeID);if(i){g.jstree("close_all");if(i){g.jstree("open_node",i)}else{g.jstree("open_all")}d.previewLabs(i)}}d.previewLabs=function(i){if(!i&&d.lastNode){i=d.lastNode}if(!i){return false}$.get(d.urls.labs.list_json,{discipline_id:i.data.discipline_id,lab_id:i.data.lab_id}).done(function(j){d.labs.removeAll();d.complex_choices(j.complex_choices);j.labs.every(function(k){d.labs.push(new a(d,k));return true})})};d.Init=function(){e()};d.ReloadTree=function(){$.get(d.urls.tree).done(function(i){g.jstree("destroy");g.html(i);e()})};d.Init();f.on("click",".form-button-remove-lab",function(){MethodPostDataset(this,{csrfmiddlewaretoken:$.cookie("csrftoken")}).success(function(){InterfaceAlerts.showSuccess();d.previewLabs(d.lastNode);d.ReloadTree()})});f.on("click",".form-button-add-task",function(){MethodPostDataset(this,{csrfmiddlewaretoken:$.cookie("csrftoken")}).success(function(){InterfaceAlerts.showSuccess();d.previewLabs(d.lastNode);d.ReloadTree()})});c.on("submit","#form-lab-add",function(){var i;if(d.lastNode){var j=g.jstree("get_node",d.lastNode.parent);if(d.lastNode.data.discipline_id){i=d.lastNode.data.discipline_id}else{if(j&&j.data.discipline_id){i=j.data.discipline_id}}}$.post(this.action,{csrfmiddlewaretoken:$.cookie("csrftoken"),title:this.title.value,description:this.title.description,discipline_id:i}).done(function(){d.ReloadTree()});return false});f.on("click",".menu-complexity-item",function(){var i=$(this).parents(".task.item");i.removeClass(i[0].dataset.complexity);i[0].dataset.complexity=this.dataset.value;i.addClass(this.dataset.value)});f.on("click","a.remove",function(){$.get(this.href).done(function(){InterfaceAlerts.showSuccess();d.previewLabs(d.lastNode)}).fail(function(){InterfaceAlerts.showFail()});return false})}})();