(function(){var e;e=function(){function e(e,t){e.setKeystroke([[CKEDITOR.CTRL+CKEDITOR.ALT+83,"saveme"]]),e.on("instanceReady",function(e){return e.editor.addCommand("saveme",{exec:function(){var n,r,o,i;return r=$(t).find("form.save")[0],null===r&&rturn(!1),o=e.editor.getData(),n=$(r).serializeArray(),n.push({name:"raw",value:o}),i=$.post(r.action,n),i.success(function(){return location.reload()})}}),e.editor.addCommand("insert_article_file",{exec:function(){var n,r;return r=$(""+t+" form.upload-file"),0===r.size()?void console.error("form '"+id_contoller+" form.upload-file' not found"):(r=r[0],n=$(r).find(":file")[0],$(n).on("change",function(){var t;return t=new FormData(r),$.ajax({url:r.action,type:"POST",data:t,beforeSend:function(){return $(n).unbind("change")},success:function(t){var n;return console.log(t),n=null,"image"===t.type?(n=e.editor.document.createElement("img"),n.setAttribute("src",t.url),n.setAttribute("alt",t.filename)):(n=e.editor.document.createElement("a"),n.setAttribute("href",t.url),n.setText(t.filename)),n?e.editor.insertElement(n):void 0},contentType:!1,processData:!1})}),n.click())}})})}return e}(),window.Editor=e}).call(this);