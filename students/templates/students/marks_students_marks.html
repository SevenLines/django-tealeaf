<!-- ko if: group() && (isStudentsLoading() || (students && students().length == 0)) -->
<div class="jumbotron">
    <div class="row">
        <div class="col-md-9">
            <h1 class="">Группа &laquo;<!-- ko text: group()? group().title : '' --><!-- /ko -->&raquo;</h1>

            <p>
                <!-- ko if: isStudentsLoading -->Загружаю список...<!-- /ko-->
                <!-- ko ifnot: isStudentsLoading -->Список пока не готов &gt;_&gt;<!-- /ko-->
            </p>
        </div>
        <!-- ko if: isStudentsLoading -->
        <div class="col-md-3">
            <div class="pull-right loader"></div>
        </div>
        <!-- /ko -->
    </div>
</div>
<!-- /ko -->
<div class="table-responsive">
    <!-- ko ifnot: isStudentsLoading -->
    <table class="table table-condensed table-bordered table-hover" data-bind="visible: students && students().length">
        <thead>
        <tr>
            <th class="headcol" style="text-align: center">
                {% include "students/marks_students_control.html" %}
            </th>
            <!-- СТРОКА ЗАНЯТИЙ -->
            <!-- ko foreach: lessons -->
            <th class="mark" data-bind="css: style">
                {% if user.is_authenticated %}
                    {% include "students/marks_modal_lesson_editor.html" %}
                {% else %}
                    <div class="btn btn-sm btn-default" rel="tooltip" data-html="true" data-toggle="tooltip"
                         data-bind="attr: { 'data-original-title': info }">
                        <!-- ko if: description -->
                        <span class="glyphicon glyphicon-pushpin"></span>
                        <!-- /ko -->
                        <!-- ko ifnot: description -->
                        <span class="" data-bind="text: day"></span>
                        <!-- /ko -->
                    </div>
                {% endif %}
            </th>
            <!-- /ko -->
            <!-- КОНЕЦ СТРОКА ЗАНЯТИЙ -->
            <th>
                {% if user.is_authenticated %}
                    <!-- КНОПКА ДОБАВЛНЕИЯ ЗАНЯТИЯ -->
                    <button class="btn btn-sm btn-primary" data-bind="visible: discipline, click: addLesson">
                        <i class="glyphicon glyphicon glyphicon-plus"></i>
                    </button>
                    <!-- КОНЕЦ КНОПКИ ДОБАВЛНЕИЯ ЗАНЯТИЯ -->
                {% endif %}
            </th>
        </tr>
        </thead>
        <!-- ТАБЛИЦА ОЦЕНОК -->
        <tbody data-bind="foreach: $root.students">
        <tr style="text-align: center">
            <td class="headcol" data-bind="text: (second_name + ' ' + name), style: color, css: style"></td>
            <!-- ko foreach: marks -->
            <td class="mark"
                data-bind="css: mark_class{% if user.is_authenticated %},click: $root.clickMark{% endif %}">
                <span class="mark-text" data-bind="text: mark_text()"></span>
            </td>
            <!-- /ko -->
            <td></td>
        </tr>
        </tbody>
        <!-- КОНЕЦ ТАБЛИЦА ОЦЕНОК -->
        <!-- ko if: lessons().length > 0 -->
        <tfoot>
        <tr>
            <td class="headcol" style="text-align: center">
                {% include "students/marks_students_control.html" %}
            </td>
            <!-- ko foreach: lessons -->
            <td class="mark" data-bind="css: style">
                <div class="btn btn-sm btn-default" rel="tooltip" data-html="true" data-toggle="tooltip"
                     data-bind="attr: { 'data-original-title': info }">
                    <!-- ko if: description -->
                    <span class="glyphicon glyphicon-pushpin"></span>
                    <!-- /ko -->
                    <!-- ko ifnot: description -->
                    <span class="" data-bind="text: day"></span>
                    <!-- /ko -->
                </div>
            </td>
            <!-- /ko -->
        </tr>
        </tfoot>
        <!-- /ko -->
    </table>
    <!-- /ko -->
</div>
{% if user.is_authenticated %}
    {% include "students/mark_selector.html" %}
{% endif %}