// Generated by CoffeeScript 1.7.1
(function() {
  var $add_student_form, $add_student_form_discp_id, $add_student_form_group_id, clear_items, cookie_discp_id, cookie_group_id, groups_forms, set_post_objects_events, student_content_selector;

  cookie_group_id = function() {
    return $.cookie('group_id');
  };

  cookie_discp_id = function() {
    return $.cookie('discipline_id');
  };

  $add_student_form = $($("form#add_student")[0]);

  $add_student_form_group_id = $($add_student_form.children("input[name='group_id']")[0]);

  $add_student_form_discp_id = $($add_student_form.children("input[name='discipline_id']")[0]);

  student_content_selector = '#group-students .content';

  groups_forms = $($(".groups-nav li form"));

  clear_items = function() {
    return $('.groups .item form').find(':submit').removeClass('btn-primary');
  };

  set_post_objects_events = function() {
    return $("#group-students .content form.ajaxed").ajaxForm({
      target: student_content_selector,
      success: function(response, status, xhr, $form) {
        return set_post_objects_events();
      }
    });
  };

  $('.groups .item form').ajaxForm({
    target: student_content_selector,
    success: function(response, status, xhr, $form) {
      var sbm;
      clear_items();
      $add_student_form_group_id.attr('value', cookie_group_id());
      $add_student_form_discp_id.attr('value', cookie_discp_id());
      sbm = $form.find(':submit');
      $(sbm).addClass("btn-primary");
      return set_post_objects_events();
    }
  });

  $add_student_form.ajaxForm({
    target: student_content_selector,
    success: function(response, status, xhr, $form) {
      return set_post_objects_events();
    },
    beforeSubmit: function(formData, jqForm, options) {
      $add_student_form.find("input[type=text]").val('');
      return $($add_student_form.find("input[type=text]")[0]).focus();
    }
  });

  if (cookie_group_id()) {
    groups_forms.find("input[name='group_id'][value='" + (cookie_group_id()) + "']").siblings('[type=submit]')[0].click();
  } else {
    $(groups_forms[0]).find("[type=submit]").click();
  }

}).call(this);
